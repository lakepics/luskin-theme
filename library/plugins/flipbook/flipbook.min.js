"use strict";!function(){function i(i){var t,i=e(),n=/^\d+$/;return-1!=(t=jQuery.inArray(i,f))?t+=1:t=n.test(i)?i:1,t}function t(){return window.location.href.split("#").shift()}function e(){return window.location.hash.slice(1)}function n(i){var e,n=i.turn("page");e=""!=f[n]&&void 0!=f[n]?t()+"#"+f[n]:n%2!=0?t()+"#"+n:n==i.data().totalPages?t()+"#"+n:t()+"#"+(n+1),window.location.href=e}function s(t,e){var n=i();t.position();n=parseInt(n),n-1!=t.turn("page")&&(n==t.data().totalPages?(c(t),t.turn("page",n)):n%2!=0?(c(t),t.turn("page",n)):(c(t),t.turn("page",n+1)))}function a(i){i.find("div.even div.fb-page").prepend('<div class="fb-inside-shadow-left"></div>'),i.find("div.odd div.fb-page").prepend('<div class="fb-inside-shadow-right"></div>'),i.find("div.last div.fb-page").prepend('<div class="fb-inside-shadow-left"></div>'),i.find("div.first div.fb-page").prepend('<div class="fb-inside-shadow-right"></div>'),i.find("div.even div.fb-page").prepend('<div class="fb-page-edge-shadow-left"></div>'),i.find("div.odd div.fb-page").prepend('<div class="fb-page-edge-shadow-right"></div>'),i.append('<div class="fb-shadow-bottom-left"></div>'),i.append('<div class="fb-shadow-bottom-right"></div>'),i.append('<div class="fb-shadow-top-left"></div>'),i.append('<div class="fb-shadow-top-right"></div>')}function o(i,t,e,n,s){var a,o,d,p,h,s,r=(e.turn("view"),e.turn("page")),c=!1;c||(isNaN(s)?s=parseInt(e.position().left):c=!0,("start"==i||c)&&(a=e.activePageCorner()),("start"==i&&"tl"!=a&&"bl"!=a&&"tr"!=a&&"br"!=a||c&&"tl"!=a&&"bl"!=a&&"tr"!=a&&"br"!=a)&&(a=t),e.children("div.fb-shadow-top-left").stop().clearQueue(),e.children("div.fb-shadow-bottom-left").stop().clearQueue(),e.children("div.fb-shadow-top-right").stop().clearQueue(),e.children("div.fb-shadow-bottom-right").stop().clearQueue(),n.find("div.preview").stop(!0,!0),n.find("div.next").stop(!0,!0),n.find("div.preview").hasClass("small")?(o=s+e.width()-40,p=s-45,d=s+e.width()-50,h=s):(o=s+e.width()+24,p=s-110,d=s+e.width()-50,h=s),2!=r||!c||"tl"!=a&&"bl"!=a&&"left"!=a?r!=e.data().totalPages-2||!c||"tr"!=a&&"br"!=a&&"right"!=a||(e.children("div.fb-shadow-top-right").animate({opacity:0},200),e.children("div.fb-shadow-bottom-right").animate({opacity:0},200)):(e.children("div.fb-shadow-top-left").animate({opacity:0},200),e.children("div.fb-shadow-bottom-left").animate({opacity:0},200)),c||(2!=r||"tl"!=a&&"bl"!=a&&"left"!=a?1!=r&&(e.children("div.fb-shadow-top-left").animate({opacity:1},500),e.children("div.fb-shadow-bottom-left").animate({opacity:1},500),n.find("div.preview").animate({opacity:1,left:p},500,"easeOutExpo",function(){c=!1})):(e.children("div.fb-shadow-top-left").animate({opacity:0},200),e.children("div.fb-shadow-bottom-left").animate({opacity:0},200),n.find("div.preview").animate({opacity:0,left:h},500,"easeOutExpo",function(){c=!1})),r!=e.data().totalPages-2||"tr"!=a&&"br"!=a&&"right"!=a?r!=e.data().totalPages&&(e.children("div.fb-shadow-top-right").animate({opacity:1},500),e.children("div.fb-shadow-bottom-right").animate({opacity:1},500),n.find("div.next").animate({opacity:1,left:o},500,"easeOutExpo",function(){c=!1})):(e.children("div.fb-shadow-top-right").animate({opacity:0},200),e.children("div.fb-shadow-bottom-right").animate({opacity:0},200),n.find("div.next").animate({opacity:0,left:d},500,"easeOutExpo",function(){c=!1}))))}function d(i,t){var e,n,s,a,o,d;d=i.turn("page"),e=parseInt(i.position().left),t.find("div.preview").hasClass("small")?(n=e+i.width()-40,s=e-45,a=e+i.width()-50,o=e):(n=e+i.width()+24,s=e-110,a=e+i.width()-50,o=e),1==d?t.find("div.preview").animate({opacity:0,left:o},200,"easeOutExpo"):t.find("div.preview").animate({opacity:1,left:s},200,"easeOutExpo"),d==i.data().totalPages?t.find("div.next").animate({opacity:0,left:a},200,"easeOutExpo"):t.find("div.next").animate({opacity:1,left:n},200,"easeOutExpo")}function p(i,t,e,n,s){var a,o;if(e.turn("size",i,t),a=e.find("div.turn-page-wrapper.first").width(),o=e.find("div.turn-page-wrapper.first").height(),s){var d=!1;zoomCont=n.find("div.zoomed"),fbZoomedBorder=parseInt(zoomCont.css("border-left-width"));var p=n.offset();fbTopMargin=p.top,zoomCont.find("img.bg-img").hasClass("zoom-large")&&(d=!0),d?(zoomCont.find("img.bg-img").css("display","none"),zoomCont.find("img.bg-img.zoom-large").css({"margin-top":"0px",opacity:1,display:"block"})):(zoomCont.find("img.bg-img").css({"margin-top":"0px",opacity:1}),zoomCont.find("img.bg-img.zoom-large").css("opacity",0)),zoomCont.children().css("margin-top",0),jQuery(this).find("div.fb-page").hasClass("double")&&zoomCont.addClass("double"),jQuery(this).hasClass("odd")&&zoomCont.addClass("odd"),zoomCont.width(.5*e.width()*g),zoomCont.height(e.height()-2*fbZoomedBorder),zoomCont.find(" > div, img.bg-img, div.video").each(function(){var i=jQuery(this);i.hasClass("video")||(zoomCont.hasClass("double")?(i.width(100*g+"%"),i.height(e.find("div.first").height()*g)):(i.width(e.find("div.first").width()*g),i.height(e.find("div.first").height()*g)))}),zoomCont.find(".enlarge").each(function(){var i=jQuery(this);i.height()*g;i.css({"font-size":Math.round(parseInt(i.css("font-size"))*g)+"px","line-height":Math.round(parseInt(i.css("line-height"))*g)+"px"})}),zoomCont.find("img.bg-img").width(e.find("div.first").width()*g),zoomCont.find("img.bg-img").height(e.find("div.first").height()*g),n.find("div.zoomed.double img.bg-img").width(2*e.find("div.first").width()*g),n.find("div.zoomed.double.odd img.bg-img").css("margin-left","0px"),n.find("div.zoomed.double img.bg-img").css({left:"0px",right:"0px"}),zoomCont.css("left",(n.width()-zoomCont.outerWidth())/2),n.find("div.zoomed-shadow").css({left:parseInt(zoomCont.css("left"))+fbZoomedBorder,top:parseInt(zoomCont.css("top"))+fbZoomedBorder,width:zoomCont.css("width"),height:zoomCont.css("height")}),n.find("div.zoomed-shadow-top").css({left:parseInt(zoomCont.css("left"))+fbZoomedBorder,width:zoomCont.css("width")}),n.find("div.zoomed-shadow-bottom").css({left:parseInt(zoomCont.css("left"))+fbZoomedBorder,top:zoomCont.height()-40+2*fbZoomedBorder,width:zoomCont.css("width")})}e.find("div.page-content").each(function(){var i=jQuery(this);if(i.width(a-parseInt(i.css("margin-top"))),i.height(o-2*parseInt(i.css("margin-top"))),i.find("img.bg-img").height(i.height()),i.find("object, iframe").length&&i.find(".preview-content").height("100%"),i.parent().hasClass("double")){if(i.find("img.bg-img").width(2*i.width()),i.parent().parent().parent().hasClass("odd")){parseInt(i.css("margin-right"));i.find("img.bg-img").css("margin-left",-i.width()+"px"),i.find("div.container img.bg-img").css("margin-left","0px")}}else i.find("img.bg-img").width(i.width());i.parent().find("div.fb-inside-shadow-left").height(i.height()),i.parent().find("div.fb-inside-shadow-right").height(i.height()),i.parent().find("div.fb-page-edge-shadow-left").height(i.height()),i.parent().find("div.fb-page-edge-shadow-right").height(i.height())}),e.find("div.fb-shadow-bottom-left").width(i/2),e.find("div.fb-shadow-bottom-right").width(i/2),e.find("div.fb-shadow-top-left").width(i/2),e.find("div.fb-shadow-top-right").width(i/2),n.find("div.preview, div.next").css("top",(e.find("div.turn-page-wrapper.first").height()-86)/2)}function h(i,t,e,n){var s=t.data().done,a=t.width(),d=a/2,p={duration:s?600:0,easing:"easeOutExpo",complete:function(){t.turn("resize")}};if(t.stop(!0),1==i||i==t.data().totalPages){var h;h=1==i?Math.floor(.5*(e.width()-d))-d:Math.floor(.5*(e.width()-d)),parseInt(t.css("left"))!=h&&(t.animate({left:h},p),o("center",n,t,e,Math.floor(.5*(e.width()-d))-d))}else t.animate({left:Math.floor(.5*(e.width()-a))},p),o("center",n,t,e,Math.floor(.5*(e.width()-a)))}function r(i,t){jQuery(window).trigger("resize"),t.find("div.next").stop().clearQueue(),t.find("div.preview").stop().clearQueue(),t.find("div.preview").css("left",0),t.find("div.next").css("left",.5*jQuery(window).width()),o("turned","false",i,t,"first run"),jQuery("div.fb-nav").hasClass("small")?jQuery("div.fb-nav").animate({opacity:1,top:-20-parseInt(i.css("margin-bottom").replace("px",""))-parseInt(jQuery("div.fb-nav").css("margin-top").replace("px",""))},1e3,"easeOutExpo"):jQuery("div.fb-nav").animate({opacity:1,top:"0"},1e3,"easeOutExpo"),i.parent().css("background-image","none")}function c(i){i.find("div.fb-shadow-bottom-left").css("opacity",0),i.find("div.fb-shadow-top-left").css("opacity",0),i.find("div.fb-shadow-bottom-right").css("opacity",0),i.find("div.fb-shadow-top-right").css("opacity",0)}var l,f=[],v=3,g=2,u=2e3;jQuery(document).ready(function(t){var e,m,w,b,y,x=t(".flipbook"),z=t("div.flipbook-container"),C=z.find("div.fb-nav"),I=!1,k=!1,Q="false",E=0,O=!1,j=!1,M=!1,P="ontouchstart"in document.documentElement;"Microsoft Internet Explorer"==navigator.appName&&(M=!0),x.bind("turning",function(i,t){j=!0}),x.bind("turned",function(i,e){var n=t(this);n.data().done;h(e,x,z,Q),z.find("div.preview, div.next").css("top",(x.find("div.turn-page-wrapper.first").height()-86)/2),I&&(l=setTimeout(function(){n.turn("next"),x.turn("page")+2>=x.data().totalPages&&(I=!1,C.find("ul li.slideshow span.button-icon-over").animate({opacity:0},300),C.find("ul li.slideshow span.button-icon").animate({opacity:1},300),C.find("ul li.slideshow").trigger("mouseout"),setTimeout(function(){z.find("div.next, div.preview").fadeIn(500)},600),o("start","right",x,z,"end"))},Y)),o("turned","false",x,z,"end"),setTimeout(function(){d(x,z)},350),j=!1}),x.find("div.fb-page").each(function(){var i=t(this);if(i.hasClass("double")){var e=i.clone(!0);e.insertAfter(i)}}),b=i(),1!=b&&f.length<2?x.turn({page:b+1,acceleration:!0,shadows:!t.isTouch,duration:500}):x.turn({page:b,acceleration:!0,shadows:!t.isTouch,duration:500}),x.find("div.turn-page-wrapper").each(function(){var i=t(this),e=t(this).attr("page"),n=x.data().totalPages;if(1==e?(i.addClass("first"),i.find("div.page-content").addClass("first")):e==n?(i.addClass("last"),i.find("div.page-content").addClass("last")):e%2==0?(i.addClass("even"),i.find("div.page-content").addClass("even")):(i.addClass("odd"),i.find("div.page-content").addClass("odd")),e%2!=0&&1!=e&&e!=n){var s=parseInt(i.find("div.double div.page-content").css("margin-right"));i.find("div.double div.page-content img.bg-img").css("margin-left",-i.width()+s+"px"),i.find("div.container img.bg-img").css("margin-left","0px")}}),x.find(" > div:last-child > div").each(function(){var i=t(this);E++,e=x.data().totalPages,i.addClass("page-transition"),i.attr("page",E),1==E?i.addClass("first"):E==e?i.addClass("last"):E%2==0?i.addClass("even"):i.addClass("odd")});x.find("div.turn-page-wrapper > div").width(),x.find("div.turn-page-wrapper > div").height();x.find("div.turn-page-wrapper").addSwipeEvents().bind("doubletap",function(i,e){t(this).trigger("dblclick")}),x.find("div.turn-page-wrapper").dblclick(function(i){function e(i,t){x.off("turned",e),y.dblclick()}function n(){x.css({visibility:"visible","pointer-events":"all"}),x.stop(!0).animate({opacity:1},300,function(){o("turned","false",x,z,"zoom")}),a.animate({opacity:0},300,function(){t(this).remove(),k=!1,C.find("ul li.zoom").trigger("mouseout")}),C.css("visibility","visible"),C.stop(!0).animate({opacity:1},300),z.find("div.next, div.preview").stop(!0).fadeIn(500),z.find("div.zoomed-shadow-top").clearQueue(),z.find("div.zoomed-shadow-bottom").clearQueue(),z.find("div.zoomed-shadow").animate({opacity:0},300,function(){t(this).remove()}),z.find("div.zoomed-shadow-bottom").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.zoomed-shadow-top").animate({opacity:0},100,function(){t(this).remove()}),z.find("span.big-side.show-previous").fadeOut(200),z.find("span.big-side.show-next").fadeOut(200)}function s(){z.find("div.zoomed-shadow-top").clearQueue(),z.find("div.zoomed-shadow-bottom").clearQueue(),z.find("div.zoomed-shadow").animate({opacity:0},300,function(){t(this).remove()}),z.find("div.zoomed-shadow-bottom").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.zoomed-shadow-top").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.page-content.zoomed").animate({opacity:0},100,function(){t(this).remove()}),z.find("span.big-side.show-previous").fadeOut(200),z.find("span.big-side.show-next").fadeOut(200)}var a,d,p,h,r=g,c=!1,f=t(this);I&&(I=!I,clearTimeout(l),C.find("ul li.slideshow").children("span.button-icon-over").css({opacity:0}),C.find("ul li.slideshow").children("span.button-icon").css({opacity:1}),C.find("ul li.slideshow").children("span.button-over").css({opacity:0}),C.find("ul li.slideshow").children("span.button").css({opacity:1})),x.parent().prepend(t(this).find("div.page-content").clone(!0).addClass("zoomed")).css("opacity",0).animate({opacity:1},500),x.parent().prepend('<div class="zoomed-shadow"></div>').css("opacity",0).animate({opacity:1},500),x.animate({opacity:0},500,function(){x.css({visibility:"none","pointer-events":"none"})});var v=z.children(".big-side.show-previous"),u=z.children(".big-side.show-next");u.length?(v.off("click"),u.off("click")):(v=jQuery('<span class="big-side show-previous"><span class="arrow"></span><span class="left"></span><span class="center"></span><span class="right"></span><span class="left hover"></span><span class="center hover"></span><span class="right hover"></span></span>'),z.append(v),u=jQuery('<span class="big-side show-next"><span class="arrow"></span><span class="left"></span><span class="center"></span><span class="right"></span><span class="left hover"></span><span class="center hover"></span><span class="right hover"></span></span>'),z.append(u)),v.height(x.height()),u.height(x.height()),v.stop(!0).fadeIn(100),u.stop(!0).fadeIn(100),f.is(".first, .last")&&(f.hasClass("first")?v.stop(!0,!0).fadeOut(100):u.stop(!0,!0).fadeOut(100)),v.on("click",function(i){i.preventDefault()}),u.on("click",function(i){i.preventDefault()}),v.one("click",function(i){t(this);y=f.prev(),s(),y.css("z-index")!=f.css("z-index")?(x.turn("previous"),x.off("turned",e),x.on("turned",e)):y.dblclick()}),u.one("click",function(i){t(this);y=f.next(),s(),y.css("z-index")!=f.css("z-index")?(x.turn("next"),x.off("turned",e),x.on("turned",e)):y.dblclick()}),x.animate({opacity:0},500,function(){x.css({visibility:"hidden","pointer-events":"none"})}),z.find("div.next:not(.zoom), div.preview:not(.zoom)").stop(!0).fadeOut(500),a=z.find("div.zoomed"),x.parent().prepend('<div class="zoomed-shadow-top"></div><div class="zoomed-shadow-bottom"></div>'),p=parseInt(a.css("border-left-width"));var m=z.offset();d=m.top,void 0==i.pageY&&(i.pageY=d),a.children().css("margin-top",d-i.pageY),a.find("img.bg-img").hasClass("zoom-large")&&(c=!0),c?(a.find("img.bg-img").css("display","none"),a.find("img.bg-img.zoom-large").css({"margin-top":"0px",opacity:1,display:"block"})):(a.find("img.bg-img").css({"margin-top":"0px",opacity:1}),a.find("img.bg-img.zoom-large").css("opacity",0)),t(this).find("div.fb-page").hasClass("double")&&a.addClass("double"),t(this).hasClass("odd")&&a.addClass("odd"),a.width(.5*x.width()*r),a.height(x.height()-2*p),a.find(" > div, img.bg-img, div.video").each(function(){var i=t(this);i.hasClass("video")||(a.hasClass("double")?(i.width(100*r+"%"),i.height(x.find("div.first").height()*r)):(i.width(x.find("div.first").width()*r),i.height(x.find("div.first").height()*r)))}),a.find(".enlarge").each(function(){var i=t(this);i.height()*r;i.css({"font-size":Math.round(parseInt(i.css("font-size"))*r)+"px","line-height":Math.round(parseInt(i.css("line-height"))*r)+"px"})}),a.find("img.bg-img").width(x.find("div.first").width()*r),a.find("img.bg-img").height(x.find("div.first").height()*r),z.find("div.zoomed.double img.bg-img").width(2*x.find("div.first").width()*r),z.find("div.zoomed.double.odd img.bg-img").css("margin-left","0px"),z.find("div.zoomed.double img.bg-img").css({left:"0px",right:"0px"}),k=!0,a.css("left",(z.width()-a.outerWidth())/2),z.find("div.zoomed-shadow").css("left",parseInt(a.css("left"))+p),z.find("div.zoomed-shadow").css("top",parseInt(a.css("top"))+p),z.find("div.zoomed-shadow").css("width",a.css("width")),z.find("div.zoomed-shadow").css("height",a.css("height")),C.animate({opacity:0},300,function(){C.css("visibility","hidden")}),M&&z.find("div.zoomed-shadow").css("display","none");var w=a.outerHeight(),b=parseInt(a.css("left"));v.css({left:b-40}).height(w).children(".center, .center.hover").height(w-24),u.css({right:b-40}).height(w).children(".center, .center.hover").height(w-24),P&&a.addSwipeEvents().bind("doubletap",function(i,t){n()}),a.dblclick(function(){n()}),P&&a.on("touchmove",function(i){var t=i.originalEvent.touches;d-t[0].pageY>-a.children().height()+a.height()?(a.find(" > div").css("margin-top",d-t[0].pageY),a.find("img.bg-img").css("margin-top",d-t[0].pageY)):(a.find("img.bg-img").css("margin-top",-a.children().height()+a.height()),a.find(" > div").css("margin-top",-a.children().height()+a.height()))}),a.find(" > div").css("position","relative"),a.find("img.bg-img").css("left","0px"),a.mousemove(function(i){d-i.pageY>-a.children().height()+a.height()?a.find(" > div").css("margin-top",d-i.pageY):a.find(" > div").css("margin-top",-a.children().height()+a.height())}),h=a.position(),z.find("div.zoomed-shadow-top, div.zoomed-shadow-bottom").width(a.width()).animate({opacity:1},500),z.find("div.zoomed-shadow-top").css({top:h.top-13,left:h.left+p}),z.find("div.zoomed-shadow-bottom").css({top:h.top+a.height()-40+2*p,left:h.left+p})});var Y=u,T=0,S=0;C.find("ul li").each(function(){var i=t(this);i.hasClass("left")?T+=97:i.hasClass("center")?T+=89:i.hasClass("right")?T+=95:i.hasClass("round")&&(0==S?(T+=96,i.css("margin-left","0px")):T+=96),S++}),C.width(T),C.find("ul li").each(function(){var i=t(this);i.hasClass("slideshow")?i.append('<span class="button"></span><span class="button-over"></span><span class="button-icon"></span><span class="button-icon-over"></span>'):i.append('<span class="button"></span><span class="button-over"></span><span class="button-icon"></span>')}),z.append('<div class="next round"><span class="button"></span><span class="button-over"></span><span class="button-icon"></span></div><div class="preview round"><span class="button"></span><span class="button-over"></span><span class="button-icon"></span></div>'),C.hasClass("mobile")&&z.find("div.next, div.preview").addClass("mobile"),t(".fb-nav ul li, .flipbook-container div.next, .flipbook-container div.preview").hover(function(){var i=t(this);i.children("span.button").clearQueue(),i.children("span.button-over").clearQueue(),i.children("span.button").animate({opacity:0},300),i.children("span.button-over").animate({opacity:1},300)},function(){var i=t(this);i.hasClass("slideshow")&&I||i.hasClass("zoom")&&k||(i.children("span.button").animate({opacity:1},300),i.children("span.button-over").animate({opacity:0},300))}),C.find("ul li.toc").on("click",function(i){x.turn("page")!=v&&x.trigger("mouseover"),x.turn("page",v),c(x)}),C.find("ul li.zoom").on("click",function(i){x.find("div.turn-page-wrapper").each(function(){var i=t(this);i.attr("page")!=x.turn("page")||k?i.attr("page")==x.turn("page")&&k&&z.find("div.zoomed").trigger("dblclick"):i.trigger("dblclick")})}),C.find("ul li.slideshow").on("click",function(i){I=!I;var e=t(this);I?(clearTimeout(l),x.turn("next"),z.find("div.next, div.preview").stop(!0).fadeOut(500),e.children("span.button-icon-over").animate({opacity:1},300),e.children("span.button-icon").animate({opacity:0},300)):(clearTimeout(l),z.find("div.next, div.preview").stop(!0).fadeIn(500),e.children("span.button-icon-over").animate({opacity:0},300),e.children("span.button-icon").animate({opacity:1},300)),o("start","right",x,z,"end")}),C.find("ul li.show-all").on("click",function(i){var e,n,s,a,o,d,p,h=x.height(),r=(x.width(),12),l=6,f=1,v=10;x.turn("stop"),z.append('<div class="show-all"><div class="content"></div></div>'),z.append('<div class="showall-shadow-top"></div><div class="showall-shadow-bottom"></div>'),z.find("div.preview, div.next").animate({opacity:0},300);var g=z.find("div.show-all");for(z.append('<span class="big-next show-all-next"><span class="arrow"></span><span class="left"></span><span class="center"></span><span class="right"></span><span class="left hover"></span><span class="center hover"></span><span class="right hover"></span></span>'),z.append('<span class="big-next show-all-previous"><span class="arrow"></span><span class="left"></span><span class="center"></span><span class="right"></span><span class="left hover"></span><span class="center hover"></span><span class="right hover"></span></span>'),f=2,x.find("div.page-content").each(function(){var i=t(this);i.parent().parent().hasClass("fpage")||(o=i.clone().addClass("show-all-thumb"),o.find("img.bg-img.zoom-large").remove(),o.attr("style",""),i.parent().parent().parent().hasClass("last")?o.addClass("even"):i.parent().parent().parent().hasClass("first")&&o.addClass("odd"),i.parent().hasClass("double")&&o.addClass("double"),i.parent().parent().parent().hasClass("last")?g.find("div.content").prepend(o):g.find("div.content").append(o),f++)}),r=parseInt(g.find("div.content").css("top")),e=parseInt(g.find("div.show-all-thumb").css("margin-bottom")),n=parseInt(g.find("div.show-all-thumb.odd").css("margin-right")),s=parseInt(g.find("div.show-all-thumb").css("height")),a=parseInt(g.find("div.show-all-thumb").css("width")),p=parseInt(g.find("div.show-all-thumb.odd").css("border-right-width")),d=s/h;z.height()-100<=2*r+l*(s+2*p+e)-e;)l--;for(;z.width()-100<=2*r+v*(a+p)+v*n*.5-n;)v--;v%2!=0&&v--,v>6&&(v=6),g.css({width:2*r+v*(a+p)+v*n*.5-n+"px",height:2*r+l*(s+2*p+e)-e+"px"}),f=1,g.find("div.show-all-thumb").each(function(){var i=t(this);f%v==0&&i.addClass("last-thumb"),f++,i.find(".enlarge").each(function(){t(this).css({"font-size":Math.round(parseInt(t(this).css("font-size"))*d)+"px","line-height":Math.round(parseInt(t(this).css("line-height"))*d)+"px"})}),i.prepend('<span class="shadow"></span>'),i.find("div.video").remove()}),x.animate({opacity:0},500,function(){x.css("visibility","none")}),z.find("div.preview").animate({opacity:0},300),z.find("div.next").animate({opacity:0},300),x.css("pointer-events","none"),C.animate({opacity:0},500),g.animate({opacity:1},500),g.css({left:(z.width()-g.width())/2+"px"}),z.find("span.show-all-previous").css({width:g.width(),top:parseInt(g.css("top"))-43+"px",left:parseInt(g.css("left"))+1+"px"}),z.find("span.show-all-next").css({width:g.width(),top:parseInt(g.css("top"))+parseInt(g.css("height"))-33+"px",left:parseInt(g.css("left"))+1+"px"}),z.find("span.big-next").each(function(){t(this).find("span.center").width(t(this).width()-26)}),g.height()<g.find("div.content").height()-e&&(z.find("span.show-all-previous").css("visibility","visible"),z.find("span.show-all-next").css("visibility","visible"),z.find("span.show-all-previous").animate({opacity:1},500),z.find("span.show-all-next").animate({opacity:1},500)),g.find("div.show-all-thumb").hover(function(){var i=t(this);i.find("span.shadow").clearQueue(),i.find("span.shadow").animate({opacity:1},300),i.hasClass("even")?(i.next().find("span.shadow").clearQueue(),i.next().find("span.shadow").animate({opacity:1},300)):(i.prev().find("span.shadow").clearQueue(),i.prev().find("span.shadow").animate({opacity:1},300))},function(){var i=t(this);i.find("span.shadow").animate({opacity:0},300),i.hasClass("even")?(i.next().find("span.shadow").clearQueue(),i.next().find("span.shadow").animate({opacity:0},300)):(i.prev().find("span.shadow").clearQueue(),i.prev().find("span.shadow").animate({opacity:0},300))});var u=g.position();z.find("div.showall-shadow-top, div.showall-shadow-bottom").width(g.width()).delay(500).animate({opacity:1},500),z.find("div.showall-shadow-top").css({top:u.top-12,left:u.left+p}),z.find("div.showall-shadow-bottom").css({top:u.top+g.height()-39,left:u.left+p}),g.find("div.show-all-thumb").on("click",function(){var i=t(this),e=Math.ceil(i.index());x.trigger("mouseover"),c(x),x.turn("page",e),g.animate({opacity:0},300,function(){t(this).remove()}),z.find("div.showall-shadow-bottom").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.showall-shadow-top").animate({opacity:0},100,function(){t(this).remove()}),z.find("span.show-all-previous").animate({opacity:0},300,function(){t(this).remove()}),z.find("span.show-all-next").animate({opacity:0},300,function(){t(this).remove()}),x.css("visibility","visible"),x.clearQueue(),x.animate({opacity:1},300),C.animate({opacity:1},500),2>e&&(x.find("div.fb-shadow-bottom-left").css("opacity",0),x.find("div.fb-shadow-top-left").css("opacity",0)),x.css("pointer-events","all")});var m=g.find("div.content"),w=l*(s+e+2*p),b=!1;z.find("span.show-all-previous").on("click",function(){parseInt(m.css("top"))==r||b||(b=!0,m.clearQueue(),m.animate({top:parseInt(m.css("top"))+w},1e3,"easeOutExpo",function(){b=!1}))}),z.find("span.show-all-next").on("click",function(){parseInt(m.css("top"))-w>12-m.height()&&!b&&(b=!0,m.clearQueue(),m.animate({top:parseInt(m.css("top"))-w},1e3,"easeOutExpo",function(){b=!1}))}),z.find("span.show-all-next, span.show-all-previous").hover(function(){var i=t(this);i.clearQueue(),i.find("span.left.hover, span.right.hover, span.center.hover").animate({opacity:1},300)},function(){var i=t(this);i.clearQueue(),i.find("span.left.hover, span.right.hover, span.center.hover").animate({opacity:0},300)})}),z.find("div.next").on("click",function(i){j||(Q="right",x.trigger("mouseover"),x.turn("next"))}),z.find("div.preview").on("click",function(i){j||(Q="left",x.trigger("mouseover"),x.turn("previous"))}),a(x),s(x,z),m=x.width(),w=x.height();var B=new Array,S=0;t(".flipbook div.page-content .enlarge").each(function(){B.push(new Array),B[S].push(parseInt(t(this).css("font-size"))),B[S].push(parseInt(t(this).css("line-height"))),S++}),t(window).on("resize",function(){var i,e=x.turn("page"),n=t(this),s=n.width();i=n.height()-C.offset().top+150<0?n.height()-x.offset().top-(n.height()-C.offset().top+150):n.height()-x.offset().top-20;var a,o,d,h,r=z.find("div.next"),c=z.find("div.preview"),l=parseInt(x.css("margin-top"))+parseInt(x.css("margin-bottom"))+x.height()+parseInt(C.css("margin-top"))+parseInt(C.css("margin-bottom"))+parseInt(C.css("top"))+C.height()+40,f=x.width()+330,v=parseInt(x.css("margin-top"))+x.height()+C.height()-55,g=x.width()+140,u=x.position();if(a=z.height()/w<z.width()/m?z.height()/w:z.width()/m,o=z.width(),d=z.height(),m>o){var a=o/m;o=m*a,d=w*a}(o>m||d>w)&&(o=m,d=w),o<C.width()+20&&(o=C.width()+20,d=w*(o/m)),o==x.width()&&d==x.height()||p(o,d,x,z,k),i>l&&s>f&&(o=m,d=w,p(m,w,x,z,k)),h=x.height()/w,h=parseInt(100*h);var b=0;if(t(".flipbook div.page-content .enlarge").each(function(){100==h?(t(this).css("font-size",B[b][0]+"px"),t(this).css("line-height",B[b][1]+"px")):(t(this).css("font-size",B[b][0]*(h/100)+"px"),t(this).css("line-height",B[b][1]*(h/100)+"px")),b++}),s=n.width(),i=n.height()-C.offset().top+150<0?n.height()-x.offset().top-(n.height()-C.offset().top+150):n.height()-x.offset().top-20,l=parseInt(x.css("margin-top").replace("px",""))+parseInt(x.css("margin-bottom").replace("px",""))+d+parseInt(C.css("margin-top").replace("px",""))+parseInt(C.css("margin-bottom").replace("px",""))+C.height(),f=o+330,v=parseInt(x.css("margin-top").replace("px",""))+d+C.height()-55,g=o+140,1==e||e==x.data().totalPages){var y;y=1==e?Math.floor(.5*(z.width()-x.width()/2))-x.width()/2:Math.floor(.5*(z.width()-x.width()/2)),parseInt(x.css("left"))!=y&&x.css({left:y})}else x.css({left:Math.floor(.5*(z.width()-x.width()))}),k&&(z.children("div.zoomed").css({left:Math.floor(.5*(z.width()-x.width()))-10}),z.children("div.zoomed-shadow, div.zoomed-shadow-bottom, div.zoomed-shadow-top").css({left:Math.floor(.5*(z.width()-x.width()))}));if(f>s?(r.addClass("small").css({left:u.left+x.width()-40}),c.addClass("small").css({left:u.left-45}),c.find("span.button-icon").css({left:6}),r.find("span.button-icon").css({left:41})):s>f&&(r.removeClass("small").css({left:u.left+x.width()+24}),c.removeClass("small").css({left:u.left-110}),c.find("span.button-icon").css({left:22}),r.find("span.button-icon").css({left:26})),"0"==c.css("opacity")&&c.css("left","100px"),"0"==r.css("opacity")&&r.css("right","100px"),k){var I=parseInt(z.find("div.zoomed").css("left"));z.children(".big-side.show-previous").css({left:I-40}).height(d).children(".center, .center.hover").height(d-24),z.children(".big-side.show-next").css({right:I-40}).height(d).children(".center, .center.hover").height(d-24)}l>i?(C.addClass("small").css({top:-40-parseInt(x.css("margin-bottom").replace("px",""))-parseInt(C.css("margin-top").replace("px",""))}),C.find("ul > li.toc > span.button-icon").css({top:40}),C.find("ul > li.zoom > span.button-icon").css({top:38}),C.find("ul > li.slideshow > span.button-icon, ul > li.slideshow > span.button-icon-over").css({top:39}),C.find("ul > li.show-all > span.button-icon").css({top:40})):i>l&&(C.removeClass("small").css({top:0}),C.find("ul > li.toc > span.button-icon").css({top:25}),C.find("ul > li.zoom > span.button-icon").css({top:24}),C.find("ul > li.slideshow > span.button-icon, ul > li.slideshow > span.button-icon-over").css({top:25}),C.find("ul > li.show-all > span.button-icon").css({top:26}))}),x.bind("turned",function(i,t,e){return n(x),!1}),t(window).bind("keydown",function(i){if(37==i.keyCode){if(j)return;if(k){var e=z.children(".big-side.show-previous");e.is(":hidden")||e.click()}else Q="left",x.trigger("mouseover"),x.turn("previous")}else if(39==i.keyCode){if(j)return;if(k){var n=z.children(".big-side.show-next");n.is(":hidden")||n.click()}else Q="right",x.trigger("mouseover"),x.turn("next")}else 27==i.keyCode&&(x.css({visibility:"visible","pointer-events":"all"}),x.stop(!0).animate({opacity:1},300,function(){o("turned","false",x,z,"zoom")}),z.find("div.zoomed").animate({opacity:0},300,function(){t(this).remove(),k=!1,C.find("ul li.zoom").trigger("mouseout")}),C.css("visibility","visible"),C.stop(!0).animate({opacity:1},300),z.find("div.next, div.preview").stop(!0).fadeIn(500),z.find("div.zoomed-shadow-top").clearQueue(),z.find("div.zoomed-shadow-bottom").clearQueue(),z.find("div.zoomed-shadow").animate({opacity:0},300,function(){t(this).remove()}),z.find("div.zoomed-shadow-bottom").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.zoomed-shadow-top").animate({opacity:0},100,function(){t(this).remove()}),z.find("span.big-side.show-previous").fadeOut(200),z.find("span.big-side.show-next").fadeOut(200))}).bind("hashchange",function(){s(x,z)}).bind("touchstart",function(i){var t=i.originalEvent.touches;t[0]&&(touchStart={x:t[0].pageX,y:t[0].pageY}),touchEnd=null}).bind("touchmove",function(i){var t=i.originalEvent.touches,e=x.offset();t[0].pageX>e.left&&t[0].pageY>e.top&&t[0].pageX<e.left+x.width()&&t[0].pageY<e.top+x.height()&&(1==t.length&&i.preventDefault(),t[0]&&(touchEnd={x:t[0].pageX,y:t[0].pageY}))}).bind("touchend",function(i){if(window.touchStart&&window.touchEnd){var t=x.width()/2,e={x:touchEnd.x-touchStart.x,y:touchEnd.y-touchStart.y},n={x:touchStart.x-x.offset().left,y:touchStart.y-x.offset().top};if(Math.abs(e.y)<100){if(j)return;e.x>100&&n.x<t?x.turn("previous"):e.x<100&&n.x>t&&x.turn("next")}}}).bind("start",function(i,t){M?(x.find("div.fpage object").css({display:"none"}),x.find("div.video object").css({display:"none"})):x.find("div.fpage object").css({opacity:0}),o("start",Q,x,z,"start"),O=!0}).bind("end",function(i){M?(x.find("div.fpage object").css({display:"block"}),x.find("div.video object").css({display:"block"})):x.find("div.fpage object").css({opacity:1}),o("turned","false",x,z,"end"),O=!1}),p(m,w,x,z,k),r(x,z)})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnJhcnkvcGx1Z2lucy9mbGlwYm9vay9mbGlwYm9vay5qcyJdLCJuYW1lcyI6WyJjaGVja0hhc2giLCJoYXNoIiwiayIsImdldEhhc2giLCJpbnRSZWdleCIsImpRdWVyeSIsImluQXJyYXkiLCJwYWdlcyIsInRlc3QiLCJnZXRVUkwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzcGxpdCIsInNoaWZ0Iiwic2xpY2UiLCJzZXRIYXNoVGFnIiwiZmxpcGJvb2siLCJwYWdlVVJMIiwiY3VycmVudElEIiwidHVybiIsInVuZGVmaW5lZCIsImRhdGEiLCJ0b3RhbFBhZ2VzIiwiaGFzaENoYW5nZSIsImZiQ29udCIsInBhZ2UiLCJwb3NpdGlvbiIsInBhcnNlSW50IiwiZGlzYWJsZVNoYWRvd3MiLCJhZGRJbnNpZGVCb29rU2hhZG93IiwiZmluZCIsInByZXBlbmQiLCJhcHBlbmQiLCJoaWRlU2hhZG93cyIsImNhbGxlciIsImFycm93IiwicG9zTGVmdCIsImFjdGl2ZSIsIm5leHRZIiwibmV4dFllbmQiLCJwcmV2WSIsInByZXZZZW5kIiwiYW5pbWF0ZSIsImlzTmFOIiwibGVmdCIsImFjdGl2ZVBhZ2VDb3JuZXIiLCJjaGlsZHJlbiIsInN0b3AiLCJjbGVhclF1ZXVlIiwiaGFzQ2xhc3MiLCJ3aWR0aCIsIm9wYWNpdHkiLCJyZXBvc2l0aW9uQXJyb3dzIiwicmVzaXplRkIiLCJmYldpZHRoIiwiZmJIZWlnaHQiLCJ6b29tZWQiLCJzaW5nbGVXaWR0aCIsInNpbmdsZUhlaWdodCIsImhlaWdodCIsImxhcmdlSW1hZ2UiLCJ6b29tQ29udCIsImZiWm9vbWVkQm9yZGVyIiwiY3NzIiwiZmJPZmZzZXQiLCJvZmZzZXQiLCJmYlRvcE1hcmdpbiIsInRvcCIsIm1hcmdpbi10b3AiLCJkaXNwbGF5IiwidGhpcyIsImFkZENsYXNzIiwiem9vbVN0cmVuZ3RoIiwiZWFjaCIsIiR0aGlzIiwiZm9udC1zaXplIiwiTWF0aCIsInJvdW5kIiwibGluZS1oZWlnaHQiLCJyaWdodCIsIm91dGVyV2lkdGgiLCJsZW5ndGgiLCJwYXJlbnQiLCJjZW50ZXJCb29rIiwiYWN0aXZlQXJyb3ciLCJyZW5kZXJlZCIsImRvbmUiLCJwYWdlV2lkdGgiLCJvcHRpb25zIiwiZHVyYXRpb24iLCJlYXNpbmciLCJjb21wbGV0ZSIsImZsb29yIiwiZmJGaXJzdFJ1biIsInRyaWdnZXIiLCJyZXBsYWNlIiwic2xpZGVzaG93VGltZW91dCIsInRvY0luZGV4Iiwic2xpZGVTaG93SW50ZXJ2YWwiLCJkb2N1bWVudCIsInJlYWR5IiwiJCIsImxhc3RJRCIsImZpcnN0V2lkdGgiLCJmaXJzdEhlaWdodCIsIiRzd2FwIiwiZmJOYXYiLCJzbGlkZXNob3ciLCJwYWdlSUQiLCJhY3RpdmVDb3JuZXIiLCJwYWdlVHVybmluZyIsImllIiwidG91Y2giLCJkb2N1bWVudEVsZW1lbnQiLCJuYXZpZ2F0b3IiLCJhcHBOYW1lIiwiYmluZCIsImUiLCJzZXRUaW1lb3V0IiwiZmFkZUluIiwic2xpZGVzaG93RGVsYXkiLCJjbG9uZSIsImluc2VydEFmdGVyIiwiYWNjZWxlcmF0aW9uIiwic2hhZG93cyIsImlzVG91Y2giLCJhdHRyIiwicmlnaHRNYXJnaW4iLCJhZGRTd2lwZUV2ZW50cyIsImRibGNsaWNrIiwiZmxpcFBhZ2UiLCJvZmYiLCJjbG9zZVpvb20iLCJ2aXNpYmlsaXR5IiwicG9pbnRlci1ldmVudHMiLCJyZW1vdmUiLCJmYWRlT3V0IiwicmVpbml0Wm9vbSIsInpvb21GYWN0b3IiLCIkcGFnZSIsImNsZWFyVGltZW91dCIsIiRwcmV2IiwiJG5leHQiLCJpcyIsIm9uIiwicHJldmVudERlZmF1bHQiLCJvbmUiLCJwcmV2IiwibmV4dCIsInBhZ2VZIiwiaCIsIm91dGVySGVpZ2h0IiwibCIsImV2dCIsInQiLCJvcmlnaW5hbEV2ZW50IiwidG91Y2hlcyIsIm1vdXNlbW92ZSIsIm5hdldpZHRoIiwiaSIsImhvdmVyIiwicGFkZGluZ1ZlcnRpY2FsIiwicGFkZGluZ0hvcml6b250YWwiLCJ0aHVtYkhlaWdodCIsInRodW1iV2lkdGgiLCJwZXJjZW50YWdlIiwiYm9yZGVyU2l6ZSIsInBhZGRpbmdBcm91bmQiLCJyb3ciLCJpbmQiLCJjb2wiLCJzaG93QWxsIiwiZGVsYXkiLCJpZCIsImNlaWwiLCJpbmRleCIsInNhQ29udGVudCIsInNjcm9sbEFtb3VudCIsImFuaW1hdGlvbiIsImJ1dCIsInBvc0FycmF5IiwiQXJyYXkiLCJwdXNoIiwicmF0aW8iLCJmYlBlcmNlbnRhZ2UiLCJmYk5leHQiLCJmYlByZXYiLCJhcmVhSGVpZ2h0IiwiYXJlYVdpZHRoIiwiYXJlYU1pbkhlaWdodCIsImFyZWFNaW5XaWR0aCIsInJlbW92ZUNsYXNzIiwicGFnZU9iaiIsImtleUNvZGUiLCJjbGljayIsInRvdWNoU3RhcnQiLCJ4IiwicGFnZVgiLCJ5IiwidG91Y2hFbmQiLCJwb3MiLCJ3IiwiZCIsImFicyJdLCJtYXBwaW5ncyI6IkFBQUEsY0FNQSxXQUFhLFFBdUJBQSxHQUFVQyxHQUNmLEdBQ0lDLEdBREFELEVBQU9FLElBRVBDLEVBQVcsT0FVZixPQVJ5QyxLQUFwQ0YsRUFBSUcsT0FBT0MsUUFBUUwsRUFBTU0sSUFDMUJMLEdBQVEsRUFFUkEsRUFET0UsRUFBU0ksS0FBS1AsR0FDakJBLEVBRUEsRUFHREMsRUFwQ0YsUUF3Q0FPLEtBQ0wsTUFBT0MsUUFBT0MsU0FBU0MsS0FBS0MsTUFBTSxLQUFLQyxRQXpDbEMsUUE2Q0FYLEtBQ0wsTUFBT08sUUFBT0MsU0FBU1YsS0FBS2MsTUFBTSxHQTlDN0IsUUFrREFDLEdBQVdDLEdBQ2hCLEdBQ0lDLEdBREFDLEVBQVlGLEVBQVNHLEtBQUssT0FJMUJGLEdBRG9CLElBQXBCWCxFQUFNWSxJQUF3Q0UsUUFBcEJkLEVBQU1ZLEdBQ3RCVixJQUFXLElBQU1GLEVBQU1ZLEdBRTdCQSxFQUFZLEdBQUssRUFBYVYsSUFBVyxJQUFNVSxFQUMxQ0EsR0FBYUYsRUFBU0ssT0FBT0MsV0FBc0JkLElBQVcsSUFBTVUsRUFDOURWLElBQVcsS0FBT1UsRUFBWSxHQUdqRFQsT0FBT0MsU0FB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bEIsRUFBWSxTQUFVLFFBQVNqQixFQUFVUSxFQUFRLE9BQ2pEcUYsR0FBZSxJQUluQnhELEVBQVNrRCxFQUFZQyxFQUFheEYsRUFBVVEsRUFBUWdDLEdBRXBEcUMsRUFBVzdFLEVBQVVRIiwiZmlsZSI6ImxpYnJhcnkvcGx1Z2lucy9mbGlwYm9vay9mbGlwYm9vay5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlx0RmxpcCBCb29rIEpTIDEuMi41XG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qIEJhc2ljIFNldHRpbmdzICovXG5cbiAgICAvLyBkZWZpbmUgcGFnZXMgKGRlZmF1bHQgYXJlIG51bWJlcnMgMS1OKVxuICAgIHZhciBwYWdlcyA9IFtdLFxuICAgICAgICB0b2NJbmRleCA9IDMsXG5cblxuICAgICAgICAvKiB0YWJsZSBvZiBjb250ZW50IGluZGV4ICovXG4gICAgICAgIHpvb21TdHJlbmd0aCA9IDIsXG5cblxuICAgICAgICAvKiB6b29tIHN0cmVuZ3RoICovXG4gICAgICAgIHNsaWRlU2hvd0ludGVydmFsID0gMjAwMCxcblxuXG4gICAgICAgIC8qIHNsaWRlIHNob3cgZGVsYXkgaW4gbWlsaXNlY29uZHMgKi9cbiAgICAgICAgc2xpZGVzaG93VGltZW91dDtcblxuICAgIC8qIGRvIE5PVCBFRElUIGJlbGxvdyB0aGlzIGxpbmUgKi9cblxuICAgIC8vIGNoZWNrIGhhc2hcbiAgICBmdW5jdGlvbiBjaGVja0hhc2goaGFzaCkge1xuICAgICAgICB2YXIgaGFzaCA9IGdldEhhc2goKSxcbiAgICAgICAgICAgIGssXG4gICAgICAgICAgICBpbnRSZWdleCA9IC9eXFxkKyQvO1xuXG4gICAgICAgIGlmICgoayA9IGpRdWVyeS5pbkFycmF5KGhhc2gsIHBhZ2VzKSkgIT0gLTEpIHtcbiAgICAgICAgICAgIGsgPSBrICsgMTtcbiAgICAgICAgfSBlbHNlIGlmIChpbnRSZWdleC50ZXN0KGhhc2gpKSB7XG4gICAgICAgICAgICBrID0gaGFzaDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGsgPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGs7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHVybFxuICAgIGZ1bmN0aW9uIGdldFVSTCgpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJykuc2hpZnQoKTtcbiAgICB9XG5cbiAgICAvLyBnZXQgaGFzaCB0YWcgZnJvbSB1cmxcbiAgICBmdW5jdGlvbiBnZXRIYXNoKCkge1xuICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSk7XG4gICAgfVxuXG4gICAgLy8gc2V0IGhhc2ggdGFnXG4gICAgZnVuY3Rpb24gc2V0SGFzaFRhZyhmbGlwYm9vaykge1xuICAgICAgICB2YXIgY3VycmVudElEID0gZmxpcGJvb2sudHVybigncGFnZScpLFxuICAgICAgICAgICAgcGFnZVVSTDtcblxuICAgICAgICBpZiAocGFnZXNbY3VycmVudElEXSAhPSBcIlwiICYmIHBhZ2VzW2N1cnJlbnRJRF0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYWdlVVJMID0gZ2V0VVJMKCkgKyAnIycgKyBwYWdlc1tjdXJyZW50SURdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRJRCAlIDIgIT0gMCkgcGFnZVVSTCA9IGdldFVSTCgpICsgJyMnICsgY3VycmVudElEO1xuICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudElEID09IGZsaXBib29rLmRhdGEoKS50b3RhbFBhZ2VzKSBwYWdlVVJMID0gZ2V0VVJMKCkgKyAnIycgKyBjdXJyZW50SUQ7XG4gICAgICAgICAgICBlbHNlIHBhZ2VVUkwgPSBnZXRVUkwoKSArICcjJyArIChjdXJyZW50SUQgKyAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcGFnZVVSTDtcbiAgICB9XG5cbiAgICAvLyBmaXJlZCB3aGVuIGhhc2ggY2hhbmdlcyBpbnNpZGUgVVJMXG4gICAgZnVuY3Rpb24gaGFzaENoYW5nZShmbGlwYm9vaywgZmJDb250KSB7XG4gICAgICAgIHZhciBwYWdlID0gY2hlY2tIYXNoKCksXG4gICAgICAgICAgICBwb3NpdGlvbiA9IGZsaXBib29rLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgcGFnZSA9IHBhcnNlSW50KHBhZ2UpO1xuXG4gICAgICAgIGlmIChwYWdlIC0gMSA9PSBmbGlwYm9vay50dXJuKCdwYWdlJykpIC8vIGNoZWNrIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgb2tcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBpZiAocGFnZSA9PSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcykge1xuICAgICAgICAgICAgZGlzYWJsZVNoYWRvd3MoZmxpcGJvb2spO1xuICAgICAgICAgICAgZmxpcGJvb2sudHVybigncGFnZScsIHBhZ2UpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhZ2UgJSAyICE9IDApIHtcbiAgICAgICAgICAgIGRpc2FibGVTaGFkb3dzKGZsaXBib29rKTtcbiAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ3BhZ2UnLCBwYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpc2FibGVTaGFkb3dzKGZsaXBib29rKTtcbiAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ3BhZ2UnLCBwYWdlICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhZGQgaW5zaWRlIGJvb2sgc2hhZG93XG4gICAgZnVuY3Rpb24gYWRkSW5zaWRlQm9va1NoYWRvdyhmbGlwYm9vaykge1xuXG4gICAgICAgIC8vIGluc2lkZSBib29rIHNoYWRvd1xuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZXZlbiBkaXYuZmItcGFnZScpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJmYi1pbnNpZGUtc2hhZG93LWxlZnRcIj48L2Rpdj4nKTtcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2Lm9kZCBkaXYuZmItcGFnZScpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJmYi1pbnNpZGUtc2hhZG93LXJpZ2h0XCI+PC9kaXY+Jyk7XG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5sYXN0IGRpdi5mYi1wYWdlJykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImZiLWluc2lkZS1zaGFkb3ctbGVmdFwiPjwvZGl2PicpO1xuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QgZGl2LmZiLXBhZ2UnKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiZmItaW5zaWRlLXNoYWRvdy1yaWdodFwiPjwvZGl2PicpO1xuXG4gICAgICAgIC8vIGVkZ2UgcGFnZSBzaGFkb3dcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmV2ZW4gZGl2LmZiLXBhZ2UnKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiZmItcGFnZS1lZGdlLXNoYWRvdy1sZWZ0XCI+PC9kaXY+Jyk7XG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5vZGQgZGl2LmZiLXBhZ2UnKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiZmItcGFnZS1lZGdlLXNoYWRvdy1yaWdodFwiPjwvZGl2PicpO1xuXG4gICAgICAgIC8vYm90dG9tIGJvb2sgcGFnZSAodW5kZXIgcGFnZXMpXG4gICAgICAgIGZsaXBib29rLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZiLXNoYWRvdy1ib3R0b20tbGVmdFwiPjwvZGl2PicpO1xuICAgICAgICBmbGlwYm9vay5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmYi1zaGFkb3ctYm90dG9tLXJpZ2h0XCI+PC9kaXY+Jyk7XG4gICAgICAgIGZsaXBib29rLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZiLXNoYWRvdy10b3AtbGVmdFwiPjwvZGl2PicpO1xuICAgICAgICBmbGlwYm9vay5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmYi1zaGFkb3ctdG9wLXJpZ2h0XCI+PC9kaXY+Jyk7XG4gICAgfVxuXG4gICAgLy8gaGlkZSBzaGFkb3dzXG4gICAgZnVuY3Rpb24gaGlkZVNoYWRvd3MoY2FsbGVyLCBhcnJvdywgZmxpcGJvb2ssIGZiQ29udCwgcG9zTGVmdCkge1xuICAgICAgICB2YXIgdmlldyA9IGZsaXBib29rLnR1cm4oJ3ZpZXcnKSxcbiAgICAgICAgICAgIHBhZ2UgPSBmbGlwYm9vay50dXJuKCdwYWdlJyksXG4gICAgICAgICAgICBhY3RpdmUsXG4gICAgICAgICAgICBuZXh0WSxcbiAgICAgICAgICAgIG5leHRZZW5kLFxuICAgICAgICAgICAgcHJldlksXG4gICAgICAgICAgICBwcmV2WWVuZCxcbiAgICAgICAgICAgIHBvc0xlZnQsXG4gICAgICAgICAgICBhbmltYXRlID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGFuaW1hdGUpIHJldHVybjtcblxuICAgICAgICBpZiAoaXNOYU4ocG9zTGVmdCkpIHtcbiAgICAgICAgICAgIHBvc0xlZnQgPSBwYXJzZUludChmbGlwYm9vay5wb3NpdGlvbigpLmxlZnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYW5pbWF0ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FsbGVyID09ICdzdGFydCcgfHwgYW5pbWF0ZSkgYWN0aXZlID0gZmxpcGJvb2suYWN0aXZlUGFnZUNvcm5lcigpO1xuXG4gICAgICAgIGlmIChjYWxsZXIgPT0gJ3N0YXJ0JyAmJiBhY3RpdmUgIT0gJ3RsJyAmJiBhY3RpdmUgIT0gJ2JsJyAmJiBhY3RpdmUgIT0gJ3RyJyAmJiBhY3RpdmUgIT0gJ2JyJyB8fCBhbmltYXRlICYmIGFjdGl2ZSAhPSAndGwnICYmIGFjdGl2ZSAhPSAnYmwnICYmIGFjdGl2ZSAhPSAndHInICYmIGFjdGl2ZSAhPSAnYnInKSB7XG4gICAgICAgICAgICBhY3RpdmUgPSBhcnJvdztcbiAgICAgICAgfVxuXG4gICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LXRvcC1sZWZ0Jykuc3RvcCgpLmNsZWFyUXVldWUoKTtcbiAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctYm90dG9tLWxlZnQnKS5zdG9wKCkuY2xlYXJRdWV1ZSgpO1xuICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy10b3AtcmlnaHQnKS5zdG9wKCkuY2xlYXJRdWV1ZSgpO1xuICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy1ib3R0b20tcmlnaHQnKS5zdG9wKCkuY2xlYXJRdWV1ZSgpO1xuXG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLnN0b3AodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLnN0b3AodHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLmhhc0NsYXNzKCdzbWFsbCcpKSB7XG4gICAgICAgICAgICBuZXh0WSA9IHBvc0xlZnQgKyBmbGlwYm9vay53aWR0aCgpIC0gNDA7XG4gICAgICAgICAgICBwcmV2WSA9IHBvc0xlZnQgLSA0NTtcbiAgICAgICAgICAgIG5leHRZZW5kID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgLSA1MDtcbiAgICAgICAgICAgIHByZXZZZW5kID0gcG9zTGVmdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHRZID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgKyAyNDtcbiAgICAgICAgICAgIHByZXZZID0gcG9zTGVmdCAtIDExMDtcbiAgICAgICAgICAgIG5leHRZZW5kID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgLSA1MDtcbiAgICAgICAgICAgIHByZXZZZW5kID0gcG9zTGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYWdlID09IDIgJiYgYW5pbWF0ZSAmJiAoYWN0aXZlID09ICd0bCcgfHwgYWN0aXZlID09ICdibCcgfHwgYWN0aXZlID09ICdsZWZ0JykpIHtcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LXRvcC1sZWZ0JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LWJvdHRvbS1sZWZ0JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYWdlID09IGZsaXBib29rLmRhdGEoKS50b3RhbFBhZ2VzIC0gMiAmJiBhbmltYXRlICYmIChhY3RpdmUgPT0gJ3RyJyB8fCBhY3RpdmUgPT0gJ2JyJyB8fCBhY3RpdmUgPT0gJ3JpZ2h0JykpIHtcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LXRvcC1yaWdodCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy1ib3R0b20tcmlnaHQnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFuaW1hdGUpIHJldHVybjtcblxuICAgICAgICBpZiAocGFnZSA9PSAyICYmIChhY3RpdmUgPT0gJ3RsJyB8fCBhY3RpdmUgPT0gJ2JsJyB8fCBhY3RpdmUgPT0gJ2xlZnQnKSkge1xuICAgICAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctdG9wLWxlZnQnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctYm90dG9tLWxlZnQnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCAyMDApO1xuXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IHByZXZZZW5kXG4gICAgICAgICAgICB9LCA1MDAsICdlYXNlT3V0RXhwbycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChwYWdlICE9IDEpIHtcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LXRvcC1sZWZ0JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LWJvdHRvbS1sZWZ0JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgbGVmdDogcHJldllcbiAgICAgICAgICAgIH0sIDUwMCwgJ2Vhc2VPdXRFeHBvJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2UgPT0gZmxpcGJvb2suZGF0YSgpLnRvdGFsUGFnZXMgLSAyICYmIChhY3RpdmUgPT0gJ3RyJyB8fCBhY3RpdmUgPT0gJ2JyJyB8fCBhY3RpdmUgPT0gJ3JpZ2h0JykpIHtcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LXRvcC1yaWdodCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy1ib3R0b20tcmlnaHQnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBuZXh0WWVuZFxuICAgICAgICAgICAgfSwgNTAwLCAnZWFzZU91dEV4cG8nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGFnZSAhPSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcykge1xuICAgICAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctdG9wLXJpZ2h0JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LWJvdHRvbS1yaWdodCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGxlZnQ6IG5leHRZXG4gICAgICAgICAgICB9LCA1MDAsICdlYXNlT3V0RXhwbycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlcG9zaXRpb25BcnJvd3MoZmxpcGJvb2ssIGZiQ29udCkge1xuICAgICAgICB2YXIgcG9zTGVmdCwgbmV4dFksIHByZXZZLCBuZXh0WWVuZCwgcHJldlllbmQsIHBhZ2U7XG5cbiAgICAgICAgcGFnZSA9IGZsaXBib29rLnR1cm4oJ3BhZ2UnKTtcbiAgICAgICAgcG9zTGVmdCA9IHBhcnNlSW50KGZsaXBib29rLnBvc2l0aW9uKCkubGVmdCk7XG5cbiAgICAgICAgaWYgKGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLmhhc0NsYXNzKCdzbWFsbCcpKSB7XG4gICAgICAgICAgICBuZXh0WSA9IHBvc0xlZnQgKyBmbGlwYm9vay53aWR0aCgpIC0gNDA7XG4gICAgICAgICAgICBwcmV2WSA9IHBvc0xlZnQgLSA0NTtcbiAgICAgICAgICAgIG5leHRZZW5kID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgLSA1MDtcbiAgICAgICAgICAgIHByZXZZZW5kID0gcG9zTGVmdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHRZID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgKyAyNDtcbiAgICAgICAgICAgIHByZXZZID0gcG9zTGVmdCAtIDExMDtcbiAgICAgICAgICAgIG5leHRZZW5kID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgLSA1MDtcbiAgICAgICAgICAgIHByZXZZZW5kID0gcG9zTGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYWdlID09IDEpIHtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogcHJldlllbmRcbiAgICAgICAgICAgIH0sIDIwMCwgJ2Vhc2VPdXRFeHBvJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGxlZnQ6IHByZXZZXG4gICAgICAgICAgICB9LCAyMDAsICdlYXNlT3V0RXhwbycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2UgPT0gZmxpcGJvb2suZGF0YSgpLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogbmV4dFllbmRcbiAgICAgICAgICAgIH0sIDIwMCwgJ2Vhc2VPdXRFeHBvJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGxlZnQ6IG5leHRZXG4gICAgICAgICAgICB9LCAyMDAsICdlYXNlT3V0RXhwbycpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcm90YXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKHdpbmRvdy5vcmllbnRhdGlvbikgPT0gOTA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzaXplRkIoZmJXaWR0aCwgZmJIZWlnaHQsIGZsaXBib29rLCBmYkNvbnQsIHpvb21lZCkge1xuICAgICAgICB2YXIgc2luZ2xlV2lkdGgsIHNpbmdsZUhlaWdodDtcblxuICAgICAgICBmbGlwYm9vay50dXJuKCdzaXplJywgZmJXaWR0aCwgZmJIZWlnaHQpO1xuXG4gICAgICAgIHNpbmdsZVdpZHRoID0gZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyLmZpcnN0Jykud2lkdGgoKTtcbiAgICAgICAgc2luZ2xlSGVpZ2h0ID0gZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyLmZpcnN0JykuaGVpZ2h0KCk7XG5cbiAgICAgICAgaWYgKHpvb21lZCkge1xuICAgICAgICAgICAgdmFyIGxhcmdlSW1hZ2UgPSBmYWxzZTtcblxuICAgICAgICAgICAgem9vbUNvbnQgPSBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZCcpO1xuXG4gICAgICAgICAgICBmYlpvb21lZEJvcmRlciA9IHBhcnNlSW50KHpvb21Db250LmNzcygnYm9yZGVyLWxlZnQtd2lkdGgnKSk7XG5cbiAgICAgICAgICAgIHZhciBmYk9mZnNldCA9IGZiQ29udC5vZmZzZXQoKTtcbiAgICAgICAgICAgIGZiVG9wTWFyZ2luID0gZmJPZmZzZXQudG9wO1xuXG4gICAgICAgICAgICBpZiAoem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLmhhc0NsYXNzKCd6b29tLWxhcmdlJykpIGxhcmdlSW1hZ2UgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoIWxhcmdlSW1hZ2UpIHtcbiAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCdpbWcuYmctaW1nJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi10b3AnOiAnMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZy56b29tLWxhcmdlJykuY3NzKCdvcGFjaXR5JywgMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuXG4gICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZy56b29tLWxhcmdlJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi10b3AnOiAnMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAxLFxuICAgICAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgem9vbUNvbnQuY2hpbGRyZW4oKS5jc3MoJ21hcmdpbi10b3AnLCAwKTtcblxuICAgICAgICAgICAgLy8gYWRkIGNsYXNzZXMgZnJvbSB0aGUgcGFnZSBwYXJlbnRcbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuZmluZCgnZGl2LmZiLXBhZ2UnKS5oYXNDbGFzcygnZG91YmxlJykpIHtcbiAgICAgICAgICAgICAgICB6b29tQ29udC5hZGRDbGFzcygnZG91YmxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ29kZCcpKSB7XG4gICAgICAgICAgICAgICAgem9vbUNvbnQuYWRkQ2xhc3MoJ29kZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB6b29tIGNvbnRhaW5lciBzaXplXG4gICAgICAgICAgICB6b29tQ29udC53aWR0aChmbGlwYm9vay53aWR0aCgpICogMC41ICogem9vbVN0cmVuZ3RoKTtcbiAgICAgICAgICAgIHpvb21Db250LmhlaWdodChmbGlwYm9vay5oZWlnaHQoKSAtIGZiWm9vbWVkQm9yZGVyICogMik7XG5cbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJyA+IGRpdiwgaW1nLmJnLWltZywgZGl2LnZpZGVvJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygndmlkZW8nKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyR0aGlzLmNzcygnaGVpZ2h0JywgJHRoaXMuaGVpZ2h0KCkgKiB6b29tU3RyZW5ndGggKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh6b29tQ29udC5oYXNDbGFzcygnZG91YmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLndpZHRoKDEwMCAqIHpvb21TdHJlbmd0aCArICclJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5oZWlnaHQoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0JykuaGVpZ2h0KCkgKiB6b29tU3RyZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMud2lkdGgoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0Jykud2lkdGgoKSAqIHpvb21TdHJlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5oZWlnaHQoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0JykuaGVpZ2h0KCkgKiB6b29tU3RyZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJy5lbmxhcmdlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBlbmxhcmdlSGVpZ2h0ID0gJHRoaXMuaGVpZ2h0KCkgKiB6b29tU3RyZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAkdGhpcy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogTWF0aC5yb3VuZChwYXJzZUludCgkdGhpcy5jc3MoJ2ZvbnQtc2l6ZScpKSAqIHpvb21TdHJlbmd0aCkgKyBcInB4XCIsXG4gICAgICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6IE1hdGgucm91bmQocGFyc2VJbnQoJHRoaXMuY3NzKCdsaW5lLWhlaWdodCcpKSAqIHpvb21TdHJlbmd0aCkgKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBzZXQgaW1nLmJnLWltZ1xuICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLndpZHRoKGZsaXBib29rLmZpbmQoJ2Rpdi5maXJzdCcpLndpZHRoKCkgKiB6b29tU3RyZW5ndGgpO1xuICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLmhlaWdodChmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QnKS5oZWlnaHQoKSAqIHpvb21TdHJlbmd0aCk7XG5cbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLmRvdWJsZSBpbWcuYmctaW1nJykud2lkdGgoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0Jykud2lkdGgoKSAqIDIgKiB6b29tU3RyZW5ndGgpO1xuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQuZG91YmxlLm9kZCBpbWcuYmctaW1nJykuY3NzKCdtYXJnaW4tbGVmdCcsICcwcHgnKTtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLmRvdWJsZSBpbWcuYmctaW1nJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnbGVmdCc6ICcwcHgnLFxuICAgICAgICAgICAgICAgICdyaWdodCc6ICcwcHgnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgem9vbUNvbnQuY3NzKCdsZWZ0JywgKGZiQ29udC53aWR0aCgpIC0gem9vbUNvbnQub3V0ZXJXaWR0aCgpKSAvIDIpO1xuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93JykuY3NzKHtcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHBhcnNlSW50KHpvb21Db250LmNzcygnbGVmdCcpKSArIGZiWm9vbWVkQm9yZGVyLFxuICAgICAgICAgICAgICAgICd0b3AnOiBwYXJzZUludCh6b29tQ29udC5jc3MoJ3RvcCcpKSArIGZiWm9vbWVkQm9yZGVyLFxuICAgICAgICAgICAgICAgICd3aWR0aCc6IHpvb21Db250LmNzcygnd2lkdGgnKSxcbiAgICAgICAgICAgICAgICAnaGVpZ2h0Jzogem9vbUNvbnQuY3NzKCdoZWlnaHQnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctdG9wJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHBhcnNlSW50KHpvb21Db250LmNzcygnbGVmdCcpKSArIGZiWm9vbWVkQm9yZGVyLFxuICAgICAgICAgICAgICAgICd3aWR0aCc6IHpvb21Db250LmNzcygnd2lkdGgnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctYm90dG9tJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHBhcnNlSW50KHpvb21Db250LmNzcygnbGVmdCcpKSArIGZiWm9vbWVkQm9yZGVyLFxuICAgICAgICAgICAgICAgICd0b3AnOiB6b29tQ29udC5oZWlnaHQoKSAtIDQwICsgZmJab29tZWRCb3JkZXIgKiAyLFxuICAgICAgICAgICAgICAgICd3aWR0aCc6IHpvb21Db250LmNzcygnd2lkdGgnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYucGFnZS1jb250ZW50JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAkdGhpcy53aWR0aChzaW5nbGVXaWR0aCAtIHBhcnNlSW50KCR0aGlzLmNzcygnbWFyZ2luLXRvcCcpKSk7XG4gICAgICAgICAgICAkdGhpcy5oZWlnaHQoc2luZ2xlSGVpZ2h0IC0gcGFyc2VJbnQoJHRoaXMuY3NzKCdtYXJnaW4tdG9wJykpICogMik7XG4gICAgICAgICAgICAkdGhpcy5maW5kKCdpbWcuYmctaW1nJykuaGVpZ2h0KCR0aGlzLmhlaWdodCgpKTtcbiAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCdvYmplY3QsIGlmcmFtZScpLmxlbmd0aCkgJHRoaXMuZmluZCgnLnByZXZpZXctY29udGVudCcpLmhlaWdodCgnMTAwJScpO1xuICAgICAgICAgICAgaWYgKCR0aGlzLnBhcmVudCgpLmhhc0NsYXNzKCdkb3VibGUnKSkge1xuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2ltZy5iZy1pbWcnKS53aWR0aCgkdGhpcy53aWR0aCgpICogMik7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuaGFzQ2xhc3MoJ29kZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByaWdodE1hcmdpbiA9IHBhcnNlSW50KCR0aGlzLmNzcygnbWFyZ2luLXJpZ2h0JykpO1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdpbWcuYmctaW1nJykuY3NzKCdtYXJnaW4tbGVmdCcsIC0kdGhpcy53aWR0aCgpICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnZGl2LmNvbnRhaW5lciBpbWcuYmctaW1nJykuY3NzKCdtYXJnaW4tbGVmdCcsIFwiMHB4XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnaW1nLmJnLWltZycpLndpZHRoKCR0aGlzLndpZHRoKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHRoaXMucGFyZW50KCkuZmluZCgnZGl2LmZiLWluc2lkZS1zaGFkb3ctbGVmdCcpLmhlaWdodCgkdGhpcy5oZWlnaHQoKSk7XG4gICAgICAgICAgICAkdGhpcy5wYXJlbnQoKS5maW5kKCdkaXYuZmItaW5zaWRlLXNoYWRvdy1yaWdodCcpLmhlaWdodCgkdGhpcy5oZWlnaHQoKSk7XG4gICAgICAgICAgICAkdGhpcy5wYXJlbnQoKS5maW5kKCdkaXYuZmItcGFnZS1lZGdlLXNoYWRvdy1sZWZ0JykuaGVpZ2h0KCR0aGlzLmhlaWdodCgpKTtcbiAgICAgICAgICAgICR0aGlzLnBhcmVudCgpLmZpbmQoJ2Rpdi5mYi1wYWdlLWVkZ2Utc2hhZG93LXJpZ2h0JykuaGVpZ2h0KCR0aGlzLmhlaWdodCgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZiLXNoYWRvdy1ib3R0b20tbGVmdCcpLndpZHRoKGZiV2lkdGggLyAyKTtcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZiLXNoYWRvdy1ib3R0b20tcmlnaHQnKS53aWR0aChmYldpZHRoIC8gMik7XG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1zaGFkb3ctdG9wLWxlZnQnKS53aWR0aChmYldpZHRoIC8gMik7XG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1zaGFkb3ctdG9wLXJpZ2h0Jykud2lkdGgoZmJXaWR0aCAvIDIpO1xuICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcsIGRpdi5uZXh0JykuY3NzKCd0b3AnLCAoZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyLmZpcnN0JykuaGVpZ2h0KCkgLSA4NikgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjZW50ZXJCb29rKHBhZ2UsIGZsaXBib29rLCBmYkNvbnQsIGFjdGl2ZUFycm93KSB7XG4gICAgICAgIHZhciByZW5kZXJlZCA9IGZsaXBib29rLmRhdGEoKS5kb25lLFxuICAgICAgICAgICAgd2lkdGggPSBmbGlwYm9vay53aWR0aCgpLFxuICAgICAgICAgICAgcGFnZVdpZHRoID0gd2lkdGggLyAyLFxuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogIXJlbmRlcmVkID8gMCA6IDYwMCxcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0RXhwbycsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay50dXJuKCdyZXNpemUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGZsaXBib29rLnN0b3AodHJ1ZSk7XG5cbiAgICAgICAgaWYgKHBhZ2UgPT0gMSB8fCBwYWdlID09IGZsaXBib29rLmRhdGEoKS50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICB2YXIgbGVmdDtcblxuICAgICAgICAgICAgaWYgKHBhZ2UgPT0gMSkgbGVmdCA9IE1hdGguZmxvb3IoKGZiQ29udC53aWR0aCgpIC0gcGFnZVdpZHRoKSAqIDAuNSkgLSBwYWdlV2lkdGg7XG4gICAgICAgICAgICBlbHNlIGxlZnQgPSBNYXRoLmZsb29yKChmYkNvbnQud2lkdGgoKSAtIHBhZ2VXaWR0aCkgKiAwLjUpO1xuXG4gICAgICAgICAgICBpZiAocGFyc2VJbnQoZmxpcGJvb2suY3NzKCdsZWZ0JykpICE9IGxlZnQpIHtcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogbGVmdFxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaGlkZVNoYWRvd3MoJ2NlbnRlcicsIGFjdGl2ZUFycm93LCBmbGlwYm9vaywgZmJDb250LCBNYXRoLmZsb29yKChmYkNvbnQud2lkdGgoKSAtIHBhZ2VXaWR0aCkgKiAwLjUpIC0gcGFnZVdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZsaXBib29rLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIGxlZnQ6IE1hdGguZmxvb3IoKGZiQ29udC53aWR0aCgpIC0gd2lkdGgpICogMC41KVxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGhpZGVTaGFkb3dzKCdjZW50ZXInLCBhY3RpdmVBcnJvdywgZmxpcGJvb2ssIGZiQ29udCwgTWF0aC5mbG9vcigoZmJDb250LndpZHRoKCkgLSB3aWR0aCkgKiAwLjUpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZiRmlyc3RSdW4oZmxpcGJvb2ssIGZiQ29udCkge1xuICAgICAgICAvLyByZXNpemUgdGhlIGJvb2tcbiAgICAgICAgalF1ZXJ5KHdpbmRvdykudHJpZ2dlcigncmVzaXplJyk7XG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLnN0b3AoKS5jbGVhclF1ZXVlKCk7XG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLnN0b3AoKS5jbGVhclF1ZXVlKCk7XG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLmNzcygnbGVmdCcsIDApO1xuICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQnKS5jc3MoJ2xlZnQnLCBqUXVlcnkod2luZG93KS53aWR0aCgpICogMC41KTtcbiAgICAgICAgLy8gYWRqdXN0IHNoYWRvd3NcbiAgICAgICAgaGlkZVNoYWRvd3MoJ3R1cm5lZCcsICdmYWxzZScsIGZsaXBib29rLCBmYkNvbnQsICdmaXJzdCBydW4nKTtcblxuICAgICAgICAvLyBzaG93IGJvdHRvbSB1aVxuICAgICAgICBpZiAoalF1ZXJ5KCdkaXYuZmItbmF2JykuaGFzQ2xhc3MoJ3NtYWxsJykpIHtcbiAgICAgICAgICAgIGpRdWVyeSgnZGl2LmZiLW5hdicpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgdG9wOiAtMjAgLSBwYXJzZUludChmbGlwYm9vay5jc3MoJ21hcmdpbi1ib3R0b20nKS5yZXBsYWNlKFwicHhcIiwgXCJcIikpIC0gcGFyc2VJbnQoalF1ZXJ5KCdkaXYuZmItbmF2JykuY3NzKCdtYXJnaW4tdG9wJykucmVwbGFjZShcInB4XCIsIFwiXCIpKVxuICAgICAgICAgICAgfSwgMTAwMCwgJ2Vhc2VPdXRFeHBvJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBqUXVlcnkoJ2Rpdi5mYi1uYXYnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHRvcDogJzAnXG4gICAgICAgICAgICB9LCAxMDAwLCAnZWFzZU91dEV4cG8nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbW92ZSBwcmVsb2FkZXJcbiAgICAgICAgZmxpcGJvb2sucGFyZW50KCkuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ25vbmUnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmYk91dChmbGlwYm9vaywgYWN0aXZlQ29ybmVyKSB7XG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi50dXJuLXBhZ2Utd3JhcHBlcicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignZGl2OmZpcnN0LWNoaWxkJykud2lkdGgoZmxpcGJvb2sud2lkdGgoKSAqIDAuNSArICdweCcpO1xuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignZGl2OmZpcnN0LWNoaWxkJykuaGVpZ2h0KGZsaXBib29rLmhlaWdodCgpICsgJ3B4Jyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc2FibGVTaGFkb3dzKGZsaXBib29rKSB7XG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1zaGFkb3ctYm90dG9tLWxlZnQnKS5jc3MoJ29wYWNpdHknLCAwKTtcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZiLXNoYWRvdy10b3AtbGVmdCcpLmNzcygnb3BhY2l0eScsIDApO1xuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZmItc2hhZG93LWJvdHRvbS1yaWdodCcpLmNzcygnb3BhY2l0eScsIDApO1xuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZmItc2hhZG93LXRvcC1yaWdodCcpLmNzcygnb3BhY2l0eScsIDApO1xuICAgIH1cblxuICAgIGpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCQpIHtcbiAgICAgICAgdmFyIGZsaXBib29rID0gJCgnLmZsaXBib29rJyksXG4gICAgICAgICAgICBmYkNvbnQgPSAkKCdkaXYuZmxpcGJvb2stY29udGFpbmVyJyksXG4gICAgICAgICAgICBmYk5hdiA9IGZiQ29udC5maW5kKCdkaXYuZmItbmF2JyksXG4gICAgICAgICAgICBzbGlkZXNob3cgPSBmYWxzZSxcbiAgICAgICAgICAgIHpvb21lZCA9IGZhbHNlLFxuICAgICAgICAgICAgYWN0aXZlQXJyb3cgPSAnZmFsc2UnLFxuICAgICAgICAgICAgcGFnZUlEID0gMCxcbiAgICAgICAgICAgIGxhc3RJRCxcbiAgICAgICAgICAgIGZpcnN0V2lkdGgsXG4gICAgICAgICAgICBmaXJzdEhlaWdodCxcbiAgICAgICAgICAgIGFjdGl2ZUNvcm5lciA9IGZhbHNlLFxuICAgICAgICAgICAgZmJPdmVyID0gZmFsc2UsXG4gICAgICAgICAgICBwYWdlVHVybmluZyA9IGZhbHNlLFxuICAgICAgICAgICAgaWUgPSBmYWxzZSxcbiAgICAgICAgICAgIHRvdWNoID0gJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgICAgICAgaGFzaCxcbiAgICAgICAgICAgICRzd2FwO1xuXG4gICAgICAgIGlmIChuYXZpZ2F0b3IuYXBwTmFtZSA9PSBcIk1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlclwiKSBpZSA9IHRydWU7XG5cbiAgICAgICAgZmxpcGJvb2suYmluZCgndHVybmluZycsIGZ1bmN0aW9uIChlLCBwYWdlKSB7XG4gICAgICAgICAgICBwYWdlVHVybmluZyA9IHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZsaXBib29rLmJpbmQoJ3R1cm5lZCcsIGZ1bmN0aW9uIChlLCBwYWdlKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICB2YXIgcmVuZGVyZWQgPSAkdGhpcy5kYXRhKCkuZG9uZTtcblxuICAgICAgICAgICAgY2VudGVyQm9vayhwYWdlLCBmbGlwYm9vaywgZmJDb250LCBhY3RpdmVBcnJvdyk7XG5cbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldywgZGl2Lm5leHQnKS5jc3MoJ3RvcCcsIChmbGlwYm9vay5maW5kKCdkaXYudHVybi1wYWdlLXdyYXBwZXIuZmlyc3QnKS5oZWlnaHQoKSAtIDg2KSAvIDIpO1xuXG4gICAgICAgICAgICBpZiAoc2xpZGVzaG93KSB7XG4gICAgICAgICAgICAgICAgc2xpZGVzaG93VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy50dXJuKCduZXh0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZsaXBib29rLnR1cm4oJ3BhZ2UnKSArIDIgPj0gZmxpcGJvb2suZGF0YSgpLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHR1cm4gb2ZmIHNsaWRlIHNob3cgb24gbGFzdCBzbGlkZVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpLnNsaWRlc2hvdyBzcGFuLmJ1dHRvbi1pY29uLW92ZXInKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgbGkuc2xpZGVzaG93IHNwYW4uYnV0dG9uLWljb24nKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgbGkuc2xpZGVzaG93JykudHJpZ2dlcignbW91c2VvdXQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0LCBkaXYucHJldmlldycpLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVNoYWRvd3MoJ3N0YXJ0JywgJ3JpZ2h0JywgZmxpcGJvb2ssIGZiQ29udCwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgc2xpZGVzaG93RGVsYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoaWRlU2hhZG93cygndHVybmVkJywgJ2ZhbHNlJywgZmxpcGJvb2ssIGZiQ29udCwgJ2VuZCcpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVwb3NpdGlvbkFycm93cyhmbGlwYm9vaywgZmJDb250KTtcbiAgICAgICAgICAgIH0sIDM1MCk7XG4gICAgICAgICAgICBwYWdlVHVybmluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKiBEdXBsaWNhdGUgRG91YmxlIFBhZ2VzICovXG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1wYWdlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2RvdWJsZScpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsb25lID0gJHRoaXMuY2xvbmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY2xvbmUuaW5zZXJ0QWZ0ZXIoJHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKiBJbml0aWFsaXplIEZsaXAgQm9vayAqL1xuICAgICAgICBoYXNoID0gY2hlY2tIYXNoKCk7XG4gICAgICAgIGlmIChoYXNoICE9IDEgJiYgcGFnZXMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgZmxpcGJvb2sudHVybih7XG4gICAgICAgICAgICAgICAgcGFnZTogaGFzaCArIDEsIC8vIGRlZmluZSBzdGFydCBwYWdlLFxuICAgICAgICAgICAgICAgIGFjY2VsZXJhdGlvbjogdHJ1ZSwgLy8gZW5hYmxlIGhhcmR3YXJlIGFjY2VsZXJhdGlvbixcbiAgICAgICAgICAgICAgICBzaGFkb3dzOiAhJC5pc1RvdWNoLCAvLyBlbmFibGUvZGlzYWJsZSBzaGFkb3dzLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgLy8gcGFnZSBmbGlwIGR1cmF0aW9uLlxuICAgICAgICB7XG4gICAgICAgICAgICBmbGlwYm9vay50dXJuKHtcbiAgICAgICAgICAgICAgICBwYWdlOiBoYXNoLCAvLyBkZWZpbmUgc3RhcnQgcGFnZSxcbiAgICAgICAgICAgICAgICBhY2NlbGVyYXRpb246IHRydWUsIC8vIGVuYWJsZSBoYXJkd2FyZSBhY2NlbGVyYXRpb24sXG4gICAgICAgICAgICAgICAgc2hhZG93czogISQuaXNUb3VjaCwgLy8gZW5hYmxlL2Rpc2FibGUgc2hhZG93cyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEFkZCBDbGFzcyBmb3IgRXZlbiBhbmQgT2RkIFBhZ2VzICovXG4gICAgICAgIC8vIHBhZ2UgZmxpcCBkdXJhdGlvbi5cbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgIHBhZ2VJRCA9ICQodGhpcykuYXR0cigncGFnZScpLFxuICAgICAgICAgICAgICAgIGxhc3RJRCA9IGZsaXBib29rLmRhdGEoKS50b3RhbFBhZ2VzLFxuICAgICAgICAgICAgICAgIGNsb25lO1xuXG4gICAgICAgICAgICBpZiAocGFnZUlEID09IDEpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnZmlyc3QnKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdkaXYucGFnZS1jb250ZW50JykuYWRkQ2xhc3MoJ2ZpcnN0Jyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2VJRCA9PSBsYXN0SUQpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnbGFzdCcpO1xuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2Rpdi5wYWdlLWNvbnRlbnQnKS5hZGRDbGFzcygnbGFzdCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYWdlSUQgJSAyID09IDApIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnZXZlbicpO1xuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2Rpdi5wYWdlLWNvbnRlbnQnKS5hZGRDbGFzcygnZXZlbicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnb2RkJyk7XG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnZGl2LnBhZ2UtY29udGVudCcpLmFkZENsYXNzKCdvZGQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhZ2VJRCAlIDIgIT0gMCAmJiBwYWdlSUQgIT0gMSAmJiBwYWdlSUQgIT0gbGFzdElEKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJpZ2h0TWFyZ2luID0gcGFyc2VJbnQoJHRoaXMuZmluZCgnZGl2LmRvdWJsZSBkaXYucGFnZS1jb250ZW50JykuY3NzKCdtYXJnaW4tcmlnaHQnKSk7XG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnZGl2LmRvdWJsZSBkaXYucGFnZS1jb250ZW50IGltZy5iZy1pbWcnKS5jc3MoJ21hcmdpbi1sZWZ0JywgLSR0aGlzLndpZHRoKCkgKyByaWdodE1hcmdpbiArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnZGl2LmNvbnRhaW5lciBpbWcuYmctaW1nJykuY3NzKCdtYXJnaW4tbGVmdCcsIFwiMHB4XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKiBJZiBkb3VibGUgcGFnZSBzZXQgcHJvcGVybHkgdGhlIG9kZCBwYWdlIGNvbnRhaW5lciAqL1xuICAgICAgICBmbGlwYm9vay5maW5kKCcgPiBkaXY6bGFzdC1jaGlsZCA+IGRpdicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgcGFnZUlEKys7XG4gICAgICAgICAgICBsYXN0SUQgPSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcztcblxuICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ3BhZ2UtdHJhbnNpdGlvbicpO1xuICAgICAgICAgICAgJHRoaXMuYXR0cigncGFnZScsIHBhZ2VJRCk7XG5cbiAgICAgICAgICAgIGlmIChwYWdlSUQgPT0gMSkgJHRoaXMuYWRkQ2xhc3MoJ2ZpcnN0Jyk7XG4gICAgICAgICAgICBlbHNlIGlmIChwYWdlSUQgPT0gbGFzdElEKSAkdGhpcy5hZGRDbGFzcygnbGFzdCcpO1xuICAgICAgICAgICAgZWxzZSBpZiAocGFnZUlEICUgMiA9PSAwKSAkdGhpcy5hZGRDbGFzcygnZXZlbicpO1xuICAgICAgICAgICAgZWxzZSAkdGhpcy5hZGRDbGFzcygnb2RkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciB0cHdXaWR0aCA9IGZsaXBib29rLmZpbmQoJ2Rpdi50dXJuLXBhZ2Utd3JhcHBlciA+IGRpdicpLndpZHRoKCksXG4gICAgICAgICAgICB0cHdIZWlnaHQgPSBmbGlwYm9vay5maW5kKCdkaXYudHVybi1wYWdlLXdyYXBwZXIgPiBkaXYnKS5oZWlnaHQoKTtcblxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgLyogWm9vbVxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYudHVybi1wYWdlLXdyYXBwZXInKS5hZGRTd2lwZUV2ZW50cygpLmJpbmQoJ2RvdWJsZXRhcCcsIGZ1bmN0aW9uIChlLCB0b3VjaCkge1xuICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdkYmxjbGljaycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYudHVybi1wYWdlLXdyYXBwZXInKS5kYmxjbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHpvb21GYWN0b3IgPSB6b29tU3RyZW5ndGgsXG4gICAgICAgICAgICAgICAgem9vbUNvbnQsXG4gICAgICAgICAgICAgICAgZmJUb3BNYXJnaW4sXG4gICAgICAgICAgICAgICAgZmJab29tZWRCb3JkZXIsXG4gICAgICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICAgICAgbGFyZ2VJbWFnZSA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICRwYWdlID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgaWYgKHNsaWRlc2hvdykge1xuICAgICAgICAgICAgICAgIHNsaWRlc2hvdyA9ICFzbGlkZXNob3c7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNsaWRlc2hvd1RpbWVvdXQpO1xuXG4gICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgbGkuc2xpZGVzaG93JykuY2hpbGRyZW4oJ3NwYW4uYnV0dG9uLWljb24tb3ZlcicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS5zbGlkZXNob3cnKS5jaGlsZHJlbignc3Bhbi5idXR0b24taWNvbicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS5zbGlkZXNob3cnKS5jaGlsZHJlbignc3Bhbi5idXR0b24tb3ZlcicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS5zbGlkZXNob3cnKS5jaGlsZHJlbignc3Bhbi5idXR0b24nKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZsaXBib29rLnBhcmVudCgpLnByZXBlbmQoJCh0aGlzKS5maW5kKCdkaXYucGFnZS1jb250ZW50JykuY2xvbmUodHJ1ZSkuYWRkQ2xhc3MoJ3pvb21lZCcpKS5jc3MoJ29wYWNpdHknLCAwKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICBmbGlwYm9vay5wYXJlbnQoKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiem9vbWVkLXNoYWRvd1wiPjwvZGl2PicpLmNzcygnb3BhY2l0eScsIDApLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0sIDUwMCk7XG5cbiAgICAgICAgICAgIGZsaXBib29rLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIDUwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGZsaXBib29rLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAncG9pbnRlci1ldmVudHMnOiAnbm9uZSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgJHByZXYgPSBmYkNvbnQuY2hpbGRyZW4oJy5iaWctc2lkZS5zaG93LXByZXZpb3VzJyk7XG4gICAgICAgICAgICB2YXIgJG5leHQgPSBmYkNvbnQuY2hpbGRyZW4oJy5iaWctc2lkZS5zaG93LW5leHQnKTtcblxuICAgICAgICAgICAgaWYgKCEkbmV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkcHJldiA9IGpRdWVyeSgnPHNwYW4gY2xhc3M9XCJiaWctc2lkZSBzaG93LXByZXZpb3VzXCI+PHNwYW4gY2xhc3M9XCJhcnJvd1wiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxlZnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjZW50ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJyaWdodFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxlZnQgaG92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjZW50ZXIgaG92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJyaWdodCBob3ZlclwiPjwvc3Bhbj48L3NwYW4+Jyk7XG5cbiAgICAgICAgICAgICAgICBmYkNvbnQuYXBwZW5kKCRwcmV2KTtcblxuICAgICAgICAgICAgICAgICRuZXh0ID0galF1ZXJ5KCc8c3BhbiBjbGFzcz1cImJpZy1zaWRlIHNob3ctbmV4dFwiPjxzcGFuIGNsYXNzPVwiYXJyb3dcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsZWZ0XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiY2VudGVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwicmlnaHRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsZWZ0IGhvdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiY2VudGVyIGhvdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwicmlnaHQgaG92ZXJcIj48L3NwYW4+PC9zcGFuPicpO1xuXG4gICAgICAgICAgICAgICAgZmJDb250LmFwcGVuZCgkbmV4dCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRwcmV2Lm9mZignY2xpY2snKTtcbiAgICAgICAgICAgICAgICAkbmV4dC5vZmYoJ2NsaWNrJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRwcmV2LmhlaWdodChmbGlwYm9vay5oZWlnaHQoKSk7XG4gICAgICAgICAgICAkbmV4dC5oZWlnaHQoZmxpcGJvb2suaGVpZ2h0KCkpO1xuICAgICAgICAgICAgJHByZXYuc3RvcCh0cnVlKS5mYWRlSW4oMTAwKTtcbiAgICAgICAgICAgICRuZXh0LnN0b3AodHJ1ZSkuZmFkZUluKDEwMCk7XG5cbiAgICAgICAgICAgIGlmICgkcGFnZS5pcygnLmZpcnN0LCAubGFzdCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRwYWdlLmhhc0NsYXNzKCdmaXJzdCcpKSAkcHJldi5zdG9wKHRydWUsIHRydWUpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICBlbHNlICRuZXh0LnN0b3AodHJ1ZSwgdHJ1ZSkuZmFkZU91dCgxMDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkcHJldi5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJG5leHQub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHByZXYub25lKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICRzd2FwID0gJHBhZ2UucHJldigpO1xuXG4gICAgICAgICAgICAgICAgcmVpbml0Wm9vbSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzd2FwLmNzcygnei1pbmRleCcpICE9ICRwYWdlLmNzcygnei1pbmRleCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ3ByZXZpb3VzJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sub2ZmKCd0dXJuZWQnLCBmbGlwUGFnZSk7XG4gICAgICAgICAgICAgICAgICAgIGZsaXBib29rLm9uKCd0dXJuZWQnLCBmbGlwUGFnZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlICRzd2FwLmRibGNsaWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRuZXh0Lm9uZSgnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAkc3dhcCA9ICRwYWdlLm5leHQoKTtcblxuICAgICAgICAgICAgICAgIHJlaW5pdFpvb20oKTtcblxuICAgICAgICAgICAgICAgIGlmICgkc3dhcC5jc3MoJ3otaW5kZXgnKSAhPSAkcGFnZS5jc3MoJ3otaW5kZXgnKSkge1xuICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay50dXJuKCduZXh0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sub2ZmKCd0dXJuZWQnLCBmbGlwUGFnZSk7XG4gICAgICAgICAgICAgICAgICAgIGZsaXBib29rLm9uKCd0dXJuZWQnLCBmbGlwUGFnZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlICRzd2FwLmRibGNsaWNrKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZmxpcFBhZ2UoZSwgcGFnZSkge1xuICAgICAgICAgICAgICAgIGZsaXBib29rLm9mZigndHVybmVkJywgZmxpcFBhZ2UpO1xuXG4gICAgICAgICAgICAgICAgJHN3YXAuZGJsY2xpY2soKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmxpcGJvb2suYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSwgNTAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2suY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0Om5vdCguem9vbSksIGRpdi5wcmV2aWV3Om5vdCguem9vbSknKS5zdG9wKHRydWUpLmZhZGVPdXQoNTAwKTtcblxuICAgICAgICAgICAgem9vbUNvbnQgPSBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZCcpO1xuXG4gICAgICAgICAgICBmbGlwYm9vay5wYXJlbnQoKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiem9vbWVkLXNoYWRvdy10b3BcIj48L2Rpdj48ZGl2IGNsYXNzPVwiem9vbWVkLXNoYWRvdy1ib3R0b21cIj48L2Rpdj4nKTtcblxuICAgICAgICAgICAgZmJab29tZWRCb3JkZXIgPSBwYXJzZUludCh6b29tQ29udC5jc3MoJ2JvcmRlci1sZWZ0LXdpZHRoJykpO1xuXG4gICAgICAgICAgICB2YXIgZmJPZmZzZXQgPSBmYkNvbnQub2Zmc2V0KCk7XG4gICAgICAgICAgICBmYlRvcE1hcmdpbiA9IGZiT2Zmc2V0LnRvcDtcblxuICAgICAgICAgICAgLy8gc2V0IHRoZSBzY3JvbGwgYXQgdGhlIGJlZ2lubmluZyBvZiB6b29tIHNvIHRoZXJlIGlzIG5vIGp1bXAgd2hlbiB5b3UgbW92ZSB5b3VyIG1vdXNlXG5cbiAgICAgICAgICAgIGlmIChlLnBhZ2VZID09IHVuZGVmaW5lZCkgZS5wYWdlWSA9IGZiVG9wTWFyZ2luO1xuXG4gICAgICAgICAgICB6b29tQ29udC5jaGlsZHJlbigpLmNzcygnbWFyZ2luLXRvcCcsIGZiVG9wTWFyZ2luIC0gZS5wYWdlWSk7XG5cbiAgICAgICAgICAgIGlmICh6b29tQ29udC5maW5kKCdpbWcuYmctaW1nJykuaGFzQ2xhc3MoJ3pvb20tbGFyZ2UnKSkgbGFyZ2VJbWFnZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmICghbGFyZ2VJbWFnZSkge1xuICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLXRvcCc6ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICAnb3BhY2l0eSc6IDFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCdpbWcuYmctaW1nLnpvb20tbGFyZ2UnKS5jc3MoJ29wYWNpdHknLCAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG5cbiAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCdpbWcuYmctaW1nLnpvb20tbGFyZ2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLXRvcCc6ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICAnb3BhY2l0eSc6IDEsXG4gICAgICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhZGQgY2xhc3NlcyBmcm9tIHRoZSBwYWdlIHBhcmVudFxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnZGl2LmZiLXBhZ2UnKS5oYXNDbGFzcygnZG91YmxlJykpIHtcbiAgICAgICAgICAgICAgICB6b29tQ29udC5hZGRDbGFzcygnZG91YmxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdvZGQnKSkge1xuICAgICAgICAgICAgICAgIHpvb21Db250LmFkZENsYXNzKCdvZGQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gem9vbSBjb250YWluZXIgc2l6ZVxuICAgICAgICAgICAgem9vbUNvbnQud2lkdGgoZmxpcGJvb2sud2lkdGgoKSAqIDAuNSAqIHpvb21GYWN0b3IpO1xuICAgICAgICAgICAgem9vbUNvbnQuaGVpZ2h0KGZsaXBib29rLmhlaWdodCgpIC0gZmJab29tZWRCb3JkZXIgKiAyKTtcblxuICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnID4gZGl2LCBpbWcuYmctaW1nLCBkaXYudmlkZW8nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygndmlkZW8nKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAkdGhpcy5jc3MoJ2hlaWdodCcsICR0aGlzLmhlaWdodCgpICogem9vbUZhY3RvciArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHpvb21Db250Lmhhc0NsYXNzKCdkb3VibGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMud2lkdGgoMTAwICogem9vbUZhY3RvciArICclJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5oZWlnaHQoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0JykuaGVpZ2h0KCkgKiB6b29tRmFjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLndpZHRoKGZsaXBib29rLmZpbmQoJ2Rpdi5maXJzdCcpLndpZHRoKCkgKiB6b29tRmFjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmhlaWdodChmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QnKS5oZWlnaHQoKSAqIHpvb21GYWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJy5lbmxhcmdlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgZW5sYXJnZUhlaWdodCA9ICR0aGlzLmhlaWdodCgpICogem9vbUZhY3RvcjtcblxuICAgICAgICAgICAgICAgICR0aGlzLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdmb250LXNpemUnOiBNYXRoLnJvdW5kKHBhcnNlSW50KCR0aGlzLmNzcygnZm9udC1zaXplJykpICogem9vbUZhY3RvcikgKyBcInB4XCIsXG4gICAgICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6IE1hdGgucm91bmQocGFyc2VJbnQoJHRoaXMuY3NzKCdsaW5lLWhlaWdodCcpKSAqIHpvb21GYWN0b3IpICsgXCJweFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gc2V0IGltZy5iZy1pbWdcbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS53aWR0aChmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QnKS53aWR0aCgpICogem9vbUZhY3Rvcik7XG4gICAgICAgICAgICB6b29tQ29udC5maW5kKCdpbWcuYmctaW1nJykuaGVpZ2h0KGZsaXBib29rLmZpbmQoJ2Rpdi5maXJzdCcpLmhlaWdodCgpICogem9vbUZhY3Rvcik7XG5cbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLmRvdWJsZSBpbWcuYmctaW1nJykud2lkdGgoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0Jykud2lkdGgoKSAqIDIgKiB6b29tRmFjdG9yKTtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLmRvdWJsZS5vZGQgaW1nLmJnLWltZycpLmNzcygnbWFyZ2luLWxlZnQnLCAnMHB4Jyk7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC5kb3VibGUgaW1nLmJnLWltZycpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2xlZnQnOiAnMHB4JyxcbiAgICAgICAgICAgICAgICAncmlnaHQnOiAnMHB4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHpvb21lZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHpvb21Db250LmNzcygnbGVmdCcsIChmYkNvbnQud2lkdGgoKSAtIHpvb21Db250Lm91dGVyV2lkdGgoKSkgLyAyKTtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdycpLmNzcygnbGVmdCcsIHBhcnNlSW50KHpvb21Db250LmNzcygnbGVmdCcpKSArIGZiWm9vbWVkQm9yZGVyKTtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdycpLmNzcygndG9wJywgcGFyc2VJbnQoem9vbUNvbnQuY3NzKCd0b3AnKSkgKyBmYlpvb21lZEJvcmRlcik7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3cnKS5jc3MoJ3dpZHRoJywgem9vbUNvbnQuY3NzKCd3aWR0aCcpKTtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdycpLmNzcygnaGVpZ2h0Jywgem9vbUNvbnQuY3NzKCdoZWlnaHQnKSk7XG5cbiAgICAgICAgICAgIGZiTmF2LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICdvcGFjaXR5JzogMFxuICAgICAgICAgICAgfSwgMzAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZmJOYXYuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChpZSkge1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBoID0gem9vbUNvbnQub3V0ZXJIZWlnaHQoKSxcbiAgICAgICAgICAgICAgICBsID0gcGFyc2VJbnQoem9vbUNvbnQuY3NzKCdsZWZ0JykpO1xuXG4gICAgICAgICAgICAkcHJldi5jc3Moe1xuICAgICAgICAgICAgICAgICdsZWZ0JzogbCAtIDQwXG4gICAgICAgICAgICB9KS5oZWlnaHQoaCkuY2hpbGRyZW4oJy5jZW50ZXIsIC5jZW50ZXIuaG92ZXInKS5oZWlnaHQoaCAtIDI0KTtcblxuICAgICAgICAgICAgJG5leHQuY3NzKHtcbiAgICAgICAgICAgICAgICAncmlnaHQnOiBsIC0gNDBcbiAgICAgICAgICAgIH0pLmhlaWdodChoKS5jaGlsZHJlbignLmNlbnRlciwgLmNlbnRlci5ob3ZlcicpLmhlaWdodChoIC0gMjQpO1xuXG4gICAgICAgICAgICAvLyBjbG9zZSB6b29tIHRvdWNoXG4gICAgICAgICAgICBpZiAodG91Y2gpIHtcbiAgICAgICAgICAgICAgICB6b29tQ29udC5hZGRTd2lwZUV2ZW50cygpLmJpbmQoJ2RvdWJsZXRhcCcsIGZ1bmN0aW9uIChldnQsIHRvdWNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3NlWm9vbSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjbG9zZSB6b29tXG4gICAgICAgICAgICB6b29tQ29udC5kYmxjbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2xvc2Vab29tKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xvc2Vab29tKCkge1xuICAgICAgICAgICAgICAgIGZsaXBib29rLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxuICAgICAgICAgICAgICAgICAgICAncG9pbnRlci1ldmVudHMnOiAnYWxsJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZsaXBib29rLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LCAzMDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZVNoYWRvd3MoJ3R1cm5lZCcsICdmYWxzZScsIGZsaXBib29rLCBmYkNvbnQsICd6b29tJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB6b29tQ29udC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB6b29tZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgbGkuem9vbScpLnRyaWdnZXIoJ21vdXNlb3V0Jyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmYk5hdi5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIGZiTmF2LnN0b3AodHJ1ZSkuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdvcGFjaXR5JzogMVxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XG5cbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQsIGRpdi5wcmV2aWV3Jykuc3RvcCh0cnVlKS5mYWRlSW4oNTAwKTtcblxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5jbGVhclF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93LWJvdHRvbScpLmNsZWFyUXVldWUoKTtcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3cnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy1ib3R0b20nKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLmJpZy1zaWRlLnNob3ctcHJldmlvdXMnKS5mYWRlT3V0KDIwMCk7XG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uYmlnLXNpZGUuc2hvdy1uZXh0JykuZmFkZU91dCgyMDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZWluaXRab29tKCkge1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5jbGVhclF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93LWJvdHRvbScpLmNsZWFyUXVldWUoKTtcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3cnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy1ib3R0b20nKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYucGFnZS1jb250ZW50Lnpvb21lZCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSwgMTAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uYmlnLXNpZGUuc2hvdy1wcmV2aW91cycpLmZhZGVPdXQoMjAwKTtcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5iaWctc2lkZS5zaG93LW5leHQnKS5mYWRlT3V0KDIwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG1vdXNlIG1vdmUsIHNjcm9sbCB6b29tZWQgaW1hZ2VcbiAgICAgICAgICAgIGlmICh0b3VjaCkge1xuICAgICAgICAgICAgICAgIHpvb21Db250Lm9uKCd0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZXZ0Lm9yaWdpbmFsRXZlbnQudG91Y2hlcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZiVG9wTWFyZ2luIC0gdFswXS5wYWdlWSA+IC16b29tQ29udC5jaGlsZHJlbigpLmhlaWdodCgpICsgem9vbUNvbnQuaGVpZ2h0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJyA+IGRpdicpLmNzcygnbWFyZ2luLXRvcCcsIGZiVG9wTWFyZ2luIC0gdFswXS5wYWdlWSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCdpbWcuYmctaW1nJykuY3NzKCdtYXJnaW4tdG9wJywgZmJUb3BNYXJnaW4gLSB0WzBdLnBhZ2VZKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS5jc3MoJ21hcmdpbi10b3AnLCAtem9vbUNvbnQuY2hpbGRyZW4oKS5oZWlnaHQoKSArIHpvb21Db250LmhlaWdodCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJyA+IGRpdicpLmNzcygnbWFyZ2luLXRvcCcsIC16b29tQ29udC5jaGlsZHJlbigpLmhlaWdodCgpICsgem9vbUNvbnQuaGVpZ2h0KCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJyA+IGRpdicpLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTtcbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS5jc3MoJ2xlZnQnLCAnMHB4Jyk7XG5cbiAgICAgICAgICAgIHpvb21Db250Lm1vdXNlbW92ZShmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGZiVG9wTWFyZ2luIC0gZXZ0LnBhZ2VZID4gLXpvb21Db250LmNoaWxkcmVuKCkuaGVpZ2h0KCkgKyB6b29tQ29udC5oZWlnaHQoKSkge1xuICAgICAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCcgPiBkaXYnKS5jc3MoJ21hcmdpbi10b3AnLCBmYlRvcE1hcmdpbiAtIGV2dC5wYWdlWSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnID4gZGl2JykuY3NzKCdtYXJnaW4tdG9wJywgLXpvb21Db250LmNoaWxkcmVuKCkuaGVpZ2h0KCkgKyB6b29tQ29udC5oZWlnaHQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBvc2l0aW9uID0gem9vbUNvbnQucG9zaXRpb24oKTtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AsIGRpdi56b29tZWQtc2hhZG93LWJvdHRvbScpLndpZHRoKHpvb21Db250LndpZHRoKCkpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctdG9wJykuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCAtIDEzLFxuICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgKyBmYlpvb21lZEJvcmRlclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy1ib3R0b20nKS5jc3Moe1xuICAgICAgICAgICAgICAgIHRvcDogcG9zaXRpb24udG9wICsgem9vbUNvbnQuaGVpZ2h0KCkgLSA0MCArIDIgKiBmYlpvb21lZEJvcmRlcixcbiAgICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgZmJab29tZWRCb3JkZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgLypcdEZsaXAgQm9vayBOYXZpZ2F0aW9uXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAgIHZhciBzbGlkZXNob3dEZWxheSA9IHNsaWRlU2hvd0ludGVydmFsLFxuICAgICAgICAgICAgbmF2V2lkdGggPSAwLFxuICAgICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgZmJOYXYuZmluZCgndWwgbGknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnbGVmdCcpKSB7XG4gICAgICAgICAgICAgICAgbmF2V2lkdGggKz0gOTc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCR0aGlzLmhhc0NsYXNzKCdjZW50ZXInKSkge1xuICAgICAgICAgICAgICAgIG5hdldpZHRoICs9IDg5O1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkdGhpcy5oYXNDbGFzcygncmlnaHQnKSkge1xuICAgICAgICAgICAgICAgIG5hdldpZHRoICs9IDk1O1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkdGhpcy5oYXNDbGFzcygncm91bmQnKSkge1xuICAgICAgICAgICAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmF2V2lkdGggKz0gOTY7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmNzcygnbWFyZ2luLWxlZnQnLCAnMHB4Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmF2V2lkdGggKz0gOTY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9KTtcblxuICAgICAgICBmYk5hdi53aWR0aChuYXZXaWR0aCk7XG5cbiAgICAgICAgZmJOYXYuZmluZCgndWwgbGknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ3NsaWRlc2hvdycpKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImJ1dHRvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImJ1dHRvbi1vdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLWljb25cIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJidXR0b24taWNvbi1vdmVyXCI+PC9zcGFuPicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiYnV0dG9uXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLW92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJidXR0b24taWNvblwiPjwvc3Bhbj4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZmJDb250LmFwcGVuZCgnPGRpdiBjbGFzcz1cIm5leHQgcm91bmRcIj48c3BhbiBjbGFzcz1cImJ1dHRvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImJ1dHRvbi1vdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLWljb25cIj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cInByZXZpZXcgcm91bmRcIj48c3BhbiBjbGFzcz1cImJ1dHRvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImJ1dHRvbi1vdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLWljb25cIj48L3NwYW4+PC9kaXY+Jyk7XG5cbiAgICAgICAgaWYgKGZiTmF2Lmhhc0NsYXNzKCdtb2JpbGUnKSkge1xuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0LCBkaXYucHJldmlldycpLmFkZENsYXNzKCdtb2JpbGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJy5mYi1uYXYgdWwgbGksIC5mbGlwYm9vay1jb250YWluZXIgZGl2Lm5leHQsIC5mbGlwYm9vay1jb250YWluZXIgZGl2LnByZXZpZXcnKS5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24nKS5jbGVhclF1ZXVlKCk7XG4gICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24tb3ZlcicpLmNsZWFyUXVldWUoKTtcbiAgICAgICAgICAgICR0aGlzLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbicpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24tb3ZlcicpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ3NsaWRlc2hvdycpICYmIHNsaWRlc2hvdyB8fCAkdGhpcy5oYXNDbGFzcygnem9vbScpICYmIHpvb21lZCkge1xuICAgICAgICAgICAgICAgIC8vZG8gbm90aGluZ1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24nKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgJHRoaXMuY2hpbGRyZW4oJ3NwYW4uYnV0dG9uLW92ZXInKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRhYmxlIE9mIENvbnRlbnRcbiAgICAgICAgZmJOYXYuZmluZCgndWwgbGkudG9jJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChmbGlwYm9vay50dXJuKCdwYWdlJykgIT0gdG9jSW5kZXgpIGZsaXBib29rLnRyaWdnZXIoJ21vdXNlb3ZlcicpO1xuICAgICAgICAgICAgZmxpcGJvb2sudHVybigncGFnZScsIHRvY0luZGV4KTtcbiAgICAgICAgICAgIGRpc2FibGVTaGFkb3dzKGZsaXBib29rKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gWm9vbVxuICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS56b29tJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi50dXJuLXBhZ2Utd3JhcHBlcicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmF0dHIoJ3BhZ2UnKSA9PSBmbGlwYm9vay50dXJuKCdwYWdlJykgJiYgIXpvb21lZCkgJHRoaXMudHJpZ2dlcignZGJsY2xpY2snKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgkdGhpcy5hdHRyKCdwYWdlJykgPT0gZmxpcGJvb2sudHVybigncGFnZScpICYmIHpvb21lZCkgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQnKS50cmlnZ2VyKCdkYmxjbGljaycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNsaWRlc2hvd1xuICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS5zbGlkZXNob3cnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2xpZGVzaG93ID0gIXNsaWRlc2hvdztcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoc2xpZGVzaG93KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNsaWRlc2hvd1RpbWVvdXQpO1xuICAgICAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ25leHQnKTtcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQsIGRpdi5wcmV2aWV3Jykuc3RvcCh0cnVlKS5mYWRlT3V0KDUwMCk7XG5cbiAgICAgICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24taWNvbi1vdmVyJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICR0aGlzLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbi1pY29uJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2xpZGVzaG93VGltZW91dCk7XG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0LCBkaXYucHJldmlldycpLnN0b3AodHJ1ZSkuZmFkZUluKDUwMCk7XG5cbiAgICAgICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24taWNvbi1vdmVyJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICR0aGlzLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbi1pY29uJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGlkZVNoYWRvd3MoJ3N0YXJ0JywgJ3JpZ2h0JywgZmxpcGJvb2ssIGZiQ29udCwgJ2VuZCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTaG93IEFsbCBQYWdlc1xuICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS5zaG93LWFsbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZmJIZWlnaHQgPSBmbGlwYm9vay5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICBmYldpZHRoID0gZmxpcGJvb2sud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBwYWRkaW5nQXJvdW5kID0gMTIsXG4gICAgICAgICAgICAgICAgcGFkZGluZ1ZlcnRpY2FsLFxuICAgICAgICAgICAgICAgIHBhZGRpbmdIb3Jpem9udGFsLFxuICAgICAgICAgICAgICAgIHRodW1iSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHRodW1iV2lkdGgsXG4gICAgICAgICAgICAgICAgcm93ID0gNixcbiAgICAgICAgICAgICAgICBpbmQgPSAxLFxuICAgICAgICAgICAgICAgIGNvbCA9IDEwLFxuICAgICAgICAgICAgICAgIGNsb25lLFxuICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2UsXG4gICAgICAgICAgICAgICAgYm9yZGVyU2l6ZTtcblxuICAgICAgICAgICAgZmxpcGJvb2sudHVybignc3RvcCcpO1xuXG4gICAgICAgICAgICBmYkNvbnQuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic2hvdy1hbGxcIj48ZGl2IGNsYXNzPVwiY29udGVudFwiPjwvZGl2PjwvZGl2PicpO1xuXG4gICAgICAgICAgICBmYkNvbnQuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic2hvd2FsbC1zaGFkb3ctdG9wXCI+PC9kaXY+PGRpdiBjbGFzcz1cInNob3dhbGwtc2hhZG93LWJvdHRvbVwiPjwvZGl2PicpO1xuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5wcmV2aWV3LCBkaXYubmV4dCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIDMwMCk7XG5cbiAgICAgICAgICAgIHZhciBzaG93QWxsID0gZmJDb250LmZpbmQoJ2Rpdi5zaG93LWFsbCcpO1xuXG4gICAgICAgICAgICAvLyBhZGQgbmV4dFxuICAgICAgICAgICAgZmJDb250LmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJiaWctbmV4dCBzaG93LWFsbC1uZXh0XCI+PHNwYW4gY2xhc3M9XCJhcnJvd1wiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxlZnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjZW50ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJyaWdodFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxlZnQgaG92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjZW50ZXIgaG92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJyaWdodCBob3ZlclwiPjwvc3Bhbj48L3NwYW4+Jyk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBwcmV2aW91c1xuICAgICAgICAgICAgZmJDb250LmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJiaWctbmV4dCBzaG93LWFsbC1wcmV2aW91c1wiPjxzcGFuIGNsYXNzPVwiYXJyb3dcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsZWZ0XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiY2VudGVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwicmlnaHRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsZWZ0IGhvdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiY2VudGVyIGhvdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwicmlnaHQgaG92ZXJcIj48L3NwYW4+PC9zcGFuPicpO1xuXG4gICAgICAgICAgICBpbmQgPSAyO1xuICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LnBhZ2UtY29udGVudCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCEkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygnZnBhZ2UnKSkge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZSA9ICR0aGlzLmNsb25lKCkuYWRkQ2xhc3MoJ3Nob3ctYWxsLXRodW1iJyk7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lLmZpbmQoJ2ltZy5iZy1pbWcuem9vbS1sYXJnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5hdHRyKCdzdHlsZScsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG9kZCBwYWdlcyBjbGFzc1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygnbGFzdCcpKSBjbG9uZS5hZGRDbGFzcygnZXZlbicpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygnZmlyc3QnKSkgY2xvbmUuYWRkQ2xhc3MoJ29kZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHBhZ2UgZG91YmxlIGFkZCBjbGFzcyBkb3VibGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLnBhcmVudCgpLmhhc0NsYXNzKCdkb3VibGUnKSkgY2xvbmUuYWRkQ2xhc3MoJ2RvdWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAvLyBhcHBlbmQgY2xvbmUgdG8gc2hvdy1hbGwgZGl2XG4gICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygnbGFzdCcpKSBzaG93QWxsLmZpbmQoJ2Rpdi5jb250ZW50JykucHJlcGVuZChjbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc2hvd0FsbC5maW5kKCdkaXYuY29udGVudCcpLmFwcGVuZChjbG9uZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaW5kKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBhZGRpbmdBcm91bmQgPSBwYXJzZUludChzaG93QWxsLmZpbmQoJ2Rpdi5jb250ZW50JykuY3NzKCd0b3AnKSk7XG4gICAgICAgICAgICBwYWRkaW5nVmVydGljYWwgPSBwYXJzZUludChzaG93QWxsLmZpbmQoJ2Rpdi5zaG93LWFsbC10aHVtYicpLmNzcygnbWFyZ2luLWJvdHRvbScpKTtcbiAgICAgICAgICAgIHBhZGRpbmdIb3Jpem9udGFsID0gcGFyc2VJbnQoc2hvd0FsbC5maW5kKCdkaXYuc2hvdy1hbGwtdGh1bWIub2RkJykuY3NzKCdtYXJnaW4tcmlnaHQnKSk7XG4gICAgICAgICAgICB0aHVtYkhlaWdodCA9IHBhcnNlSW50KHNob3dBbGwuZmluZCgnZGl2LnNob3ctYWxsLXRodW1iJykuY3NzKCdoZWlnaHQnKSk7XG4gICAgICAgICAgICB0aHVtYldpZHRoID0gcGFyc2VJbnQoc2hvd0FsbC5maW5kKCdkaXYuc2hvdy1hbGwtdGh1bWInKS5jc3MoJ3dpZHRoJykpO1xuICAgICAgICAgICAgYm9yZGVyU2l6ZSA9IHBhcnNlSW50KHNob3dBbGwuZmluZCgnZGl2LnNob3ctYWxsLXRodW1iLm9kZCcpLmNzcygnYm9yZGVyLXJpZ2h0LXdpZHRoJykpO1xuXG4gICAgICAgICAgICBwZXJjZW50YWdlID0gdGh1bWJIZWlnaHQgLyBmYkhlaWdodDtcblxuICAgICAgICAgICAgLy8gY2hlY2sgaG93IG1hbnkgcm93c1xuICAgICAgICAgICAgd2hpbGUgKGZiQ29udC5oZWlnaHQoKSAtIDEwMCA8PSBwYWRkaW5nQXJvdW5kICogMiArIHJvdyAqICh0aHVtYkhlaWdodCArIGJvcmRlclNpemUgKiAyICsgcGFkZGluZ1ZlcnRpY2FsKSAtIHBhZGRpbmdWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgIHJvdy0tO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjaGVjayBob3cgbWFueSBjb2x1bW5zXG4gICAgICAgICAgICB3aGlsZSAoZmJDb250LndpZHRoKCkgLSAxMDAgPD0gcGFkZGluZ0Fyb3VuZCAqIDIgKyBjb2wgKiAodGh1bWJXaWR0aCArIGJvcmRlclNpemUpICsgY29sICogcGFkZGluZ0hvcml6b250YWwgKiAwLjUgLSBwYWRkaW5nSG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgICAgIGNvbC0tO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29sICUgMiAhPSAwKSBjb2wtLTtcblxuICAgICAgICAgICAgaWYgKGNvbCA+IDYpIGNvbCA9IDY7XG5cbiAgICAgICAgICAgIHNob3dBbGwuY3NzKHtcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiBwYWRkaW5nQXJvdW5kICogMiArIGNvbCAqICh0aHVtYldpZHRoICsgYm9yZGVyU2l6ZSkgKyBjb2wgKiBwYWRkaW5nSG9yaXpvbnRhbCAqIDAuNSAtIHBhZGRpbmdIb3Jpem9udGFsICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogcGFkZGluZ0Fyb3VuZCAqIDIgKyByb3cgKiAodGh1bWJIZWlnaHQgKyBib3JkZXJTaXplICogMiArIHBhZGRpbmdWZXJ0aWNhbCkgLSBwYWRkaW5nVmVydGljYWwgKyAncHgnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaW5kID0gMTtcblxuICAgICAgICAgICAgc2hvd0FsbC5maW5kKCdkaXYuc2hvdy1hbGwtdGh1bWInKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIC8vIGlmIGxhc3QgaW4gdGhlIHJvdyBhZGQgY2xhc3MgbGFzdFxuICAgICAgICAgICAgICAgIGlmIChpbmQgJSBjb2wgPT0gMCkgJHRoaXMuYWRkQ2xhc3MoJ2xhc3QtdGh1bWInKTtcblxuICAgICAgICAgICAgICAgIGluZCsrO1xuXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLmVubGFyZ2UnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IE1hdGgucm91bmQocGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2ZvbnQtc2l6ZScpKSAqIHBlcmNlbnRhZ2UpICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6IE1hdGgucm91bmQocGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2xpbmUtaGVpZ2h0JykpICogcGVyY2VudGFnZSkgKyAncHgnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJHRoaXMucHJlcGVuZCgnPHNwYW4gY2xhc3M9XCJzaGFkb3dcIj48L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnZGl2LnZpZGVvJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZmxpcGJvb2suYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSwgNTAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2suY3NzKCd2aXNpYmlsaXR5JywgJ25vbmUnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSwgMzAwKTtcblxuICAgICAgICAgICAgZmxpcGJvb2suY3NzKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG4gICAgICAgICAgICBmYk5hdi5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgc2hvd0FsbC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICBzaG93QWxsLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2xlZnQnOiAoZmJDb250LndpZHRoKCkgLSBzaG93QWxsLndpZHRoKCkpIC8gMiArICdweCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5zaG93LWFsbC1wcmV2aW91cycpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogc2hvd0FsbC53aWR0aCgpLFxuICAgICAgICAgICAgICAgICd0b3AnOiBwYXJzZUludChzaG93QWxsLmNzcygndG9wJykpIC0gNDMgKyAncHgnLFxuICAgICAgICAgICAgICAgICdsZWZ0JzogcGFyc2VJbnQoc2hvd0FsbC5jc3MoJ2xlZnQnKSkgKyAxICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLW5leHQnKS5jc3Moe1xuICAgICAgICAgICAgICAgICd3aWR0aCc6IHNob3dBbGwud2lkdGgoKSxcbiAgICAgICAgICAgICAgICAndG9wJzogcGFyc2VJbnQoc2hvd0FsbC5jc3MoJ3RvcCcpKSArIHBhcnNlSW50KHNob3dBbGwuY3NzKCdoZWlnaHQnKSkgLSAzMyArICdweCcsXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBwYXJzZUludChzaG93QWxsLmNzcygnbGVmdCcpKSArIDEgKyAncHgnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uYmlnLW5leHQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3NwYW4uY2VudGVyJykud2lkdGgoJCh0aGlzKS53aWR0aCgpIC0gMjYpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzaG93QWxsLmhlaWdodCgpIDwgc2hvd0FsbC5maW5kKCdkaXYuY29udGVudCcpLmhlaWdodCgpIC0gcGFkZGluZ1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uc2hvdy1hbGwtcHJldmlvdXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLW5leHQnKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLXByZXZpb3VzJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLW5leHQnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFNob3cgQWxsIEV2ZW50cyAqL1xuICAgICAgICAgICAgc2hvd0FsbC5maW5kKCdkaXYuc2hvdy1hbGwtdGh1bWInKS5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuLnNoYWRvdycpLmNsZWFyUXVldWUoKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuLnNoYWRvdycpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcblxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnZXZlbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm5leHQoKS5maW5kKCdzcGFuLnNoYWRvdycpLmNsZWFyUXVldWUoKTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMubmV4dCgpLmZpbmQoJ3NwYW4uc2hhZG93JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucHJldigpLmZpbmQoJ3NwYW4uc2hhZG93JykuY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5wcmV2KCkuZmluZCgnc3Bhbi5zaGFkb3cnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4uc2hhZG93JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdldmVuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMubmV4dCgpLmZpbmQoJ3NwYW4uc2hhZG93JykuY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5uZXh0KCkuZmluZCgnc3Bhbi5zaGFkb3cnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5wcmV2KCkuZmluZCgnc3Bhbi5zaGFkb3cnKS5jbGVhclF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnByZXYoKS5maW5kKCdzcGFuLnNoYWRvdycpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBTaG93IEFsbCBFdmVudHMgKi9cbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHNob3dBbGwucG9zaXRpb24oKTtcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuc2hvd2FsbC1zaGFkb3ctdG9wLCBkaXYuc2hvd2FsbC1zaGFkb3ctYm90dG9tJykud2lkdGgoc2hvd0FsbC53aWR0aCgpKS5kZWxheSg1MDApLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnNob3dhbGwtc2hhZG93LXRvcCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgLSAxMixcbiAgICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgYm9yZGVyU2l6ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuc2hvd2FsbC1zaGFkb3ctYm90dG9tJykuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCArIHNob3dBbGwuaGVpZ2h0KCkgLSAzOSxcbiAgICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgYm9yZGVyU2l6ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIFRodW1ibmFpbCBDbGljayAqL1xuICAgICAgICAgICAgc2hvd0FsbC5maW5kKCdkaXYuc2hvdy1hbGwtdGh1bWInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBNYXRoLmNlaWwoJHRoaXMuaW5kZXgoKSk7XG5cbiAgICAgICAgICAgICAgICBmbGlwYm9vay50cmlnZ2VyKCdtb3VzZW92ZXInKTtcbiAgICAgICAgICAgICAgICBkaXNhYmxlU2hhZG93cyhmbGlwYm9vayk7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2sudHVybigncGFnZScsIGlkKTtcblxuICAgICAgICAgICAgICAgIC8qIENsb3NlICovXG4gICAgICAgICAgICAgICAgc2hvd0FsbC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5zaG93YWxsLXNoYWRvdy1ib3R0b20nKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5zaG93YWxsLXNoYWRvdy10b3AnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uc2hvdy1hbGwtcHJldmlvdXMnKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uc2hvdy1hbGwtbmV4dCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSwgMzAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmbGlwYm9vay5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIGZsaXBib29rLmNsZWFyUXVldWUoKTtcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgZmJOYXYuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlkIDwgMikge1xuICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZmItc2hhZG93LWJvdHRvbS1sZWZ0JykuY3NzKCdvcGFjaXR5JywgMCk7XG4gICAgICAgICAgICAgICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1zaGFkb3ctdG9wLWxlZnQnKS5jc3MoJ29wYWNpdHknLCAwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmbGlwYm9vay5jc3MoJ3BvaW50ZXItZXZlbnRzJywgJ2FsbCcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBzYUNvbnRlbnQgPSBzaG93QWxsLmZpbmQoJ2Rpdi5jb250ZW50JyksXG4gICAgICAgICAgICAgICAgc2Nyb2xsQW1vdW50ID0gcm93ICogKHRodW1iSGVpZ2h0ICsgcGFkZGluZ1ZlcnRpY2FsICsgYm9yZGVyU2l6ZSAqIDIpLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvKiBTY3JvbGwgU2hvd0FsbCAqL1xuICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uc2hvdy1hbGwtcHJldmlvdXMnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHNhQ29udGVudC5jc3MoJ3RvcCcpKSAhPSBwYWRkaW5nQXJvdW5kICYmICFhbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc2FDb250ZW50LmNsZWFyUXVldWUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2FDb250ZW50LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBwYXJzZUludChzYUNvbnRlbnQuY3NzKCd0b3AnKSkgKyBzY3JvbGxBbW91bnRcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCwgJ2Vhc2VPdXRFeHBvJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5zaG93LWFsbC1uZXh0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChzYUNvbnRlbnQuY3NzKCd0b3AnKSkgLSBzY3JvbGxBbW91bnQgPiAxMiAtIHNhQ29udGVudC5oZWlnaHQoKSAmJiAhYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHNhQ29udGVudC5jbGVhclF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNhQ29udGVudC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogcGFyc2VJbnQoc2FDb250ZW50LmNzcygndG9wJykpIC0gc2Nyb2xsQW1vdW50XG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMDAsICdlYXNlT3V0RXhwbycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uc2hvdy1hbGwtbmV4dCwgc3Bhbi5zaG93LWFsbC1wcmV2aW91cycpLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnV0ID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICBidXQuY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgICAgICAgIGJ1dC5maW5kKCdzcGFuLmxlZnQuaG92ZXIsIHNwYW4ucmlnaHQuaG92ZXIsIHNwYW4uY2VudGVyLmhvdmVyJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBidXQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIGJ1dC5jbGVhclF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgYnV0LmZpbmQoJ3NwYW4ubGVmdC5ob3Zlciwgc3Bhbi5yaWdodC5ob3Zlciwgc3Bhbi5jZW50ZXIuaG92ZXInKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogTmV4dCAmIFByZXZpb3VzICovXG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAocGFnZVR1cm5pbmcpIHJldHVybjtcbiAgICAgICAgICAgIGFjdGl2ZUFycm93ID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIGZsaXBib29rLnRyaWdnZXIoJ21vdXNlb3ZlcicpO1xuICAgICAgICAgICAgZmxpcGJvb2sudHVybignbmV4dCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHBhZ2VUdXJuaW5nKSByZXR1cm47XG5cbiAgICAgICAgICAgIGFjdGl2ZUFycm93ID0gJ2xlZnQnO1xuICAgICAgICAgICAgZmxpcGJvb2sudHJpZ2dlcignbW91c2VvdmVyJyk7XG4gICAgICAgICAgICBmbGlwYm9vay50dXJuKCdwcmV2aW91cycpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgLyogU2hhZG93c1xuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgICBhZGRJbnNpZGVCb29rU2hhZG93KGZsaXBib29rKTtcblxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgLyogRXZlbnRzXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAgIGhhc2hDaGFuZ2UoZmxpcGJvb2ssIGZiQ29udCk7XG5cbiAgICAgICAgZmlyc3RXaWR0aCA9IGZsaXBib29rLndpZHRoKCksIGZpcnN0SGVpZ2h0ID0gZmxpcGJvb2suaGVpZ2h0KCk7XG4gICAgICAgIHZhciBwb3NBcnJheSA9IG5ldyBBcnJheSgpLFxuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICQoJy5mbGlwYm9vayBkaXYucGFnZS1jb250ZW50IC5lbmxhcmdlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwb3NBcnJheS5wdXNoKG5ldyBBcnJheSgpKTtcbiAgICAgICAgICAgIHBvc0FycmF5W2ldLnB1c2gocGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2ZvbnQtc2l6ZScpKSk7XG4gICAgICAgICAgICBwb3NBcnJheVtpXS5wdXNoKHBhcnNlSW50KCQodGhpcykuY3NzKCdsaW5lLWhlaWdodCcpKSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIFdpbmRvdyBSZXNpemUgKi9cbiAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudElEID0gZmxpcGJvb2sudHVybigncGFnZScpO1xuXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgIHdpZHRoID0gJHRoaXMud2lkdGgoKSxcblxuXG4gICAgICAgICAgICAgICAgLy8gd2luZG93IHdpZHRoXG4gICAgICAgICAgICAgICAgaGVpZ2h0OyAvLyB3aW5kb3cgaGVpZ2h0XG5cbiAgICAgICAgICAgIGlmICgkdGhpcy5oZWlnaHQoKSAtIGZiTmF2Lm9mZnNldCgpLnRvcCArIDE1MCA8IDApIGhlaWdodCA9ICR0aGlzLmhlaWdodCgpIC0gZmxpcGJvb2sub2Zmc2V0KCkudG9wIC0gKCR0aGlzLmhlaWdodCgpIC0gZmJOYXYub2Zmc2V0KCkudG9wICsgMTUwKTtcbiAgICAgICAgICAgIGVsc2UgaGVpZ2h0ID0gJHRoaXMuaGVpZ2h0KCkgLSBmbGlwYm9vay5vZmZzZXQoKS50b3AgLSAyMDtcblxuICAgICAgICAgICAgdmFyIGZiTmV4dCA9IGZiQ29udC5maW5kKCdkaXYubmV4dCcpLFxuICAgICAgICAgICAgICAgIGZiUHJldiA9IGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLFxuICAgICAgICAgICAgICAgIHJhdGlvLFxuICAgICAgICAgICAgICAgIGZiV2lkdGgsXG4gICAgICAgICAgICAgICAgZmJIZWlnaHQsXG4gICAgICAgICAgICAgICAgZmJQZXJjZW50YWdlLFxuICAgICAgICAgICAgICAgIGFyZWFIZWlnaHQgPSBwYXJzZUludChmbGlwYm9vay5jc3MoJ21hcmdpbi10b3AnKSkgKyBwYXJzZUludChmbGlwYm9vay5jc3MoJ21hcmdpbi1ib3R0b20nKSkgKyBmbGlwYm9vay5oZWlnaHQoKSArIHBhcnNlSW50KGZiTmF2LmNzcygnbWFyZ2luLXRvcCcpKSArIHBhcnNlSW50KGZiTmF2LmNzcygnbWFyZ2luLWJvdHRvbScpKSArIHBhcnNlSW50KGZiTmF2LmNzcygndG9wJykpICsgZmJOYXYuaGVpZ2h0KCkgKyA0MCxcbiAgICAgICAgICAgICAgICBhcmVhV2lkdGggPSBmbGlwYm9vay53aWR0aCgpICsgMzMwLFxuICAgICAgICAgICAgICAgIGFyZWFNaW5IZWlnaHQgPSBwYXJzZUludChmbGlwYm9vay5jc3MoJ21hcmdpbi10b3AnKSkgKyBmbGlwYm9vay5oZWlnaHQoKSArIGZiTmF2LmhlaWdodCgpIC0gNTUsXG4gICAgICAgICAgICAgICAgYXJlYU1pbldpZHRoID0gZmxpcGJvb2sud2lkdGgoKSArIDE0MCxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGZsaXBib29rLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgICAgIGlmIChmYkNvbnQuaGVpZ2h0KCkgLyBmaXJzdEhlaWdodCA8IGZiQ29udC53aWR0aCgpIC8gZmlyc3RXaWR0aCkgcmF0aW8gPSBmYkNvbnQuaGVpZ2h0KCkgLyBmaXJzdEhlaWdodDtcbiAgICAgICAgICAgIGVsc2UgcmF0aW8gPSBmYkNvbnQud2lkdGgoKSAvIGZpcnN0V2lkdGg7XG5cbiAgICAgICAgICAgIGZiV2lkdGggPSBmYkNvbnQud2lkdGgoKTtcbiAgICAgICAgICAgIGZiSGVpZ2h0ID0gZmJDb250LmhlaWdodCgpO1xuXG4gICAgICAgICAgICBpZiAoZmJXaWR0aCA8IGZpcnN0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmF0aW8gPSBmYldpZHRoIC8gZmlyc3RXaWR0aDtcblxuICAgICAgICAgICAgICAgIGZiV2lkdGggPSBmaXJzdFdpZHRoICogcmF0aW87XG4gICAgICAgICAgICAgICAgZmJIZWlnaHQgPSBmaXJzdEhlaWdodCAqIHJhdGlvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmJXaWR0aCA+IGZpcnN0V2lkdGggfHwgZmJIZWlnaHQgPiBmaXJzdEhlaWdodCkge1xuICAgICAgICAgICAgICAgIGZiV2lkdGggPSBmaXJzdFdpZHRoO1xuICAgICAgICAgICAgICAgIGZiSGVpZ2h0ID0gZmlyc3RIZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmYldpZHRoIDwgZmJOYXYud2lkdGgoKSArIDIwKSB7XG4gICAgICAgICAgICAgICAgZmJXaWR0aCA9IGZiTmF2LndpZHRoKCkgKyAyMDtcbiAgICAgICAgICAgICAgICBmYkhlaWdodCA9IGZpcnN0SGVpZ2h0ICogKGZiV2lkdGggLyBmaXJzdFdpZHRoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZiV2lkdGggIT0gZmxpcGJvb2sud2lkdGgoKSB8fCBmYkhlaWdodCAhPSBmbGlwYm9vay5oZWlnaHQoKSkgcmVzaXplRkIoZmJXaWR0aCwgZmJIZWlnaHQsIGZsaXBib29rLCBmYkNvbnQsIHpvb21lZCk7XG5cbiAgICAgICAgICAgIGlmIChoZWlnaHQgPiBhcmVhSGVpZ2h0ICYmIHdpZHRoID4gYXJlYVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgZmJXaWR0aCA9IGZpcnN0V2lkdGg7XG4gICAgICAgICAgICAgICAgZmJIZWlnaHQgPSBmaXJzdEhlaWdodDtcbiAgICAgICAgICAgICAgICByZXNpemVGQihmaXJzdFdpZHRoLCBmaXJzdEhlaWdodCwgZmxpcGJvb2ssIGZiQ29udCwgem9vbWVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmJQZXJjZW50YWdlID0gZmxpcGJvb2suaGVpZ2h0KCkgLyBmaXJzdEhlaWdodDtcbiAgICAgICAgICAgIGZiUGVyY2VudGFnZSA9IHBhcnNlSW50KGZiUGVyY2VudGFnZSAqIDEwMCk7XG5cbiAgICAgICAgICAgIHZhciBpID0gMDtcblxuICAgICAgICAgICAgJCgnLmZsaXBib29rIGRpdi5wYWdlLWNvbnRlbnQgLmVubGFyZ2UnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmJQZXJjZW50YWdlID09IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnZm9udC1zaXplJywgcG9zQXJyYXlbaV1bMF0gKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnbGluZS1oZWlnaHQnLCBwb3NBcnJheVtpXVsxXSArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2ZvbnQtc2l6ZScsIHBvc0FycmF5W2ldWzBdICogKGZiUGVyY2VudGFnZSAvIDEwMCkgKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnbGluZS1oZWlnaHQnLCBwb3NBcnJheVtpXVsxXSAqIChmYlBlcmNlbnRhZ2UgLyAxMDApICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHdpZHRoID0gJHRoaXMud2lkdGgoKTtcblxuICAgICAgICAgICAgaWYgKCR0aGlzLmhlaWdodCgpIC0gZmJOYXYub2Zmc2V0KCkudG9wICsgMTUwIDwgMCkgaGVpZ2h0ID0gJHRoaXMuaGVpZ2h0KCkgLSBmbGlwYm9vay5vZmZzZXQoKS50b3AgLSAoJHRoaXMuaGVpZ2h0KCkgLSBmYk5hdi5vZmZzZXQoKS50b3AgKyAxNTApO1xuICAgICAgICAgICAgZWxzZSBoZWlnaHQgPSAkdGhpcy5oZWlnaHQoKSAtIGZsaXBib29rLm9mZnNldCgpLnRvcCAtIDIwO1xuXG4gICAgICAgICAgICBhcmVhSGVpZ2h0ID0gcGFyc2VJbnQoZmxpcGJvb2suY3NzKCdtYXJnaW4tdG9wJykucmVwbGFjZShcInB4XCIsIFwiXCIpKSArIHBhcnNlSW50KGZsaXBib29rLmNzcygnbWFyZ2luLWJvdHRvbScpLnJlcGxhY2UoXCJweFwiLCBcIlwiKSkgKyBmYkhlaWdodCArIHBhcnNlSW50KGZiTmF2LmNzcygnbWFyZ2luLXRvcCcpLnJlcGxhY2UoXCJweFwiLCBcIlwiKSkgKyBwYXJzZUludChmYk5hdi5jc3MoJ21hcmdpbi1ib3R0b20nKS5yZXBsYWNlKFwicHhcIiwgXCJcIikpICsgZmJOYXYuaGVpZ2h0KCk7XG4gICAgICAgICAgICBhcmVhV2lkdGggPSBmYldpZHRoICsgMzMwO1xuXG4gICAgICAgICAgICBhcmVhTWluSGVpZ2h0ID0gcGFyc2VJbnQoZmxpcGJvb2suY3NzKCdtYXJnaW4tdG9wJykucmVwbGFjZShcInB4XCIsIFwiXCIpKSArIGZiSGVpZ2h0ICsgZmJOYXYuaGVpZ2h0KCkgLSA1NTtcbiAgICAgICAgICAgIGFyZWFNaW5XaWR0aCA9IGZiV2lkdGggKyAxNDA7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50SUQgPT0gMSB8fCBjdXJyZW50SUQgPT0gZmxpcGJvb2suZGF0YSgpLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdDtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SUQgPT0gMSkgbGVmdCA9IE1hdGguZmxvb3IoKGZiQ29udC53aWR0aCgpIC0gZmxpcGJvb2sud2lkdGgoKSAvIDIpICogMC41KSAtIGZsaXBib29rLndpZHRoKCkgLyAyO1xuICAgICAgICAgICAgICAgIGVsc2UgbGVmdCA9IE1hdGguZmxvb3IoKGZiQ29udC53aWR0aCgpIC0gZmxpcGJvb2sud2lkdGgoKSAvIDIpICogMC41KTtcblxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChmbGlwYm9vay5jc3MoJ2xlZnQnKSkgIT0gbGVmdCkgZmxpcGJvb2suY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBsZWZ0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZsaXBib29rLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogTWF0aC5mbG9vcigoZmJDb250LndpZHRoKCkgLSBmbGlwYm9vay53aWR0aCgpKSAqIDAuNSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICh6b29tZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmJDb250LmNoaWxkcmVuKCdkaXYuem9vbWVkJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogTWF0aC5mbG9vcigoZmJDb250LndpZHRoKCkgLSBmbGlwYm9vay53aWR0aCgpKSAqIDAuNSkgLSAxMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZmJDb250LmNoaWxkcmVuKCdkaXYuem9vbWVkLXNoYWRvdywgZGl2Lnpvb21lZC1zaGFkb3ctYm90dG9tLCBkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBNYXRoLmZsb29yKChmYkNvbnQud2lkdGgoKSAtIGZsaXBib29rLndpZHRoKCkpICogMC41KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFByZXZpZXcgLyBOZXh0IEFycm93cyAqL1xuICAgICAgICAgICAgaWYgKHdpZHRoIDwgYXJlYVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgZmJOZXh0LmFkZENsYXNzKCdzbWFsbCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgKyBmbGlwYm9vay53aWR0aCgpIC0gNDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYlByZXYuYWRkQ2xhc3MoJ3NtYWxsJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCAtIDQ1XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmJQcmV2LmZpbmQoJ3NwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiA2XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmJOZXh0LmZpbmQoJ3NwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiA0MVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3aWR0aCA+IGFyZWFXaWR0aCkge1xuICAgICAgICAgICAgICAgIGZiTmV4dC5yZW1vdmVDbGFzcygnc21hbGwnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgZmxpcGJvb2sud2lkdGgoKSArIDI0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmJQcmV2LnJlbW92ZUNsYXNzKCdzbWFsbCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgLSAxMTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYlByZXYuZmluZCgnc3Bhbi5idXR0b24taWNvbicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDIyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmJOZXh0LmZpbmQoJ3NwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAyNlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmJQcmV2LmNzcygnb3BhY2l0eScpID09IFwiMFwiKSBmYlByZXYuY3NzKCdsZWZ0JywgJzEwMHB4Jyk7XG5cbiAgICAgICAgICAgIGlmIChmYk5leHQuY3NzKCdvcGFjaXR5JykgPT0gXCIwXCIpIGZiTmV4dC5jc3MoJ3JpZ2h0JywgJzEwMHB4Jyk7XG5cbiAgICAgICAgICAgIGlmICh6b29tZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IHBhcnNlSW50KGZiQ29udC5maW5kKCdkaXYuem9vbWVkJykuY3NzKCdsZWZ0JykpO1xuXG4gICAgICAgICAgICAgICAgZmJDb250LmNoaWxkcmVuKCcuYmlnLXNpZGUuc2hvdy1wcmV2aW91cycpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogbCAtIDQwXG4gICAgICAgICAgICAgICAgfSkuaGVpZ2h0KGZiSGVpZ2h0KS5jaGlsZHJlbignLmNlbnRlciwgLmNlbnRlci5ob3ZlcicpLmhlaWdodChmYkhlaWdodCAtIDI0KTtcblxuICAgICAgICAgICAgICAgIGZiQ29udC5jaGlsZHJlbignLmJpZy1zaWRlLnNob3ctbmV4dCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdyaWdodCc6IGwgLSA0MFxuICAgICAgICAgICAgICAgIH0pLmhlaWdodChmYkhlaWdodCkuY2hpbGRyZW4oJy5jZW50ZXIsIC5jZW50ZXIuaG92ZXInKS5oZWlnaHQoZmJIZWlnaHQgLSAyNCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIEJvdHRvbSBVSSAqL1xuICAgICAgICAgICAgaWYgKGhlaWdodCA8IGFyZWFIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBmYk5hdi5hZGRDbGFzcygnc21hbGwnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IC00MCAtIHBhcnNlSW50KGZsaXBib29rLmNzcygnbWFyZ2luLWJvdHRvbScpLnJlcGxhY2UoXCJweFwiLCBcIlwiKSkgLSBwYXJzZUludChmYk5hdi5jc3MoJ21hcmdpbi10b3AnKS5yZXBsYWNlKFwicHhcIiwgXCJcIikpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgPiBsaS50b2MgPiBzcGFuLmJ1dHRvbi1pY29uJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiA0MFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsID4gbGkuem9vbSA+IHNwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDM4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgPiBsaS5zbGlkZXNob3cgPiBzcGFuLmJ1dHRvbi1pY29uLCB1bCA+IGxpLnNsaWRlc2hvdyA+IHNwYW4uYnV0dG9uLWljb24tb3ZlcicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogMzlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCA+IGxpLnNob3ctYWxsID4gc3Bhbi5idXR0b24taWNvbicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogNDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGVpZ2h0ID4gYXJlYUhlaWdodCkge1xuICAgICAgICAgICAgICAgIGZiTmF2LnJlbW92ZUNsYXNzKCdzbWFsbCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsID4gbGkudG9jID4gc3Bhbi5idXR0b24taWNvbicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogMjVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCA+IGxpLnpvb20gPiBzcGFuLmJ1dHRvbi1pY29uJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAyNFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsID4gbGkuc2xpZGVzaG93ID4gc3Bhbi5idXR0b24taWNvbiwgdWwgPiBsaS5zbGlkZXNob3cgPiBzcGFuLmJ1dHRvbi1pY29uLW92ZXInKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDI1XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgPiBsaS5zaG93LWFsbCA+IHNwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDI2XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIEZsaXAgQm9vayBFdmVudHMgKi9cbiAgICAgICAgZmxpcGJvb2suYmluZCgndHVybmVkJywgZnVuY3Rpb24gKGUsIHBhZ2UsIHBhZ2VPYmopIHtcbiAgICAgICAgICAgIHNldEhhc2hUYWcoZmxpcGJvb2spO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKiBHbG9iYWwgRXZlbnRzICovXG4gICAgICAgICQod2luZG93KS5iaW5kKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIGtleWJvYXJkIGV2ZW50c1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAzNykge1xuICAgICAgICAgICAgICAgIGlmIChwYWdlVHVybmluZykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgaWYgKHpvb21lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHByZXYgPSBmYkNvbnQuY2hpbGRyZW4oJy5iaWctc2lkZS5zaG93LXByZXZpb3VzJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHByZXYuaXMoJzpoaWRkZW4nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHByZXYuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUFycm93ID0gJ2xlZnQnO1xuICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay50cmlnZ2VyKCdtb3VzZW92ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sudHVybigncHJldmlvdXMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAzOSkge1xuICAgICAgICAgICAgICAgIGlmIChwYWdlVHVybmluZykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgaWYgKHpvb21lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJG5leHQgPSBmYkNvbnQuY2hpbGRyZW4oJy5iaWctc2lkZS5zaG93LW5leHQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkbmV4dC5pcygnOmhpZGRlbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbmV4dC5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQXJyb3cgPSAncmlnaHQnO1xuICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay50cmlnZ2VyKCdtb3VzZW92ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sudHVybignbmV4dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDI3KSB7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2suY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZScsXG4gICAgICAgICAgICAgICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdhbGwnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2suc3RvcCh0cnVlKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBoaWRlU2hhZG93cygndHVybmVkJywgJ2ZhbHNlJywgZmxpcGJvb2ssIGZiQ29udCwgJ3pvb20nKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LCAzMDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgem9vbWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpLnpvb20nKS50cmlnZ2VyKCdtb3VzZW91dCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmJOYXYuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICBmYk5hdi5zdG9wKHRydWUpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAnb3BhY2l0eSc6IDFcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0LCBkaXYucHJldmlldycpLnN0b3AodHJ1ZSkuZmFkZUluKDUwMCk7XG5cbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctdG9wJykuY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy1ib3R0b20nKS5jbGVhclF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LCAzMDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctYm90dG9tJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LCAxMDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctdG9wJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LCAxMDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5iaWctc2lkZS5zaG93LXByZXZpb3VzJykuZmFkZU91dCgyMDApO1xuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLmJpZy1zaWRlLnNob3ctbmV4dCcpLmZhZGVPdXQoMjAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuYmluZCgnaGFzaGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGhhc2hjaGFuZ2UgZXZlbnQgKHVuaXF1ZSB1cmwgZm9yIGVhY2ggcGFnZSlcbiAgICAgICAgICAgIGhhc2hDaGFuZ2UoZmxpcGJvb2ssIGZiQ29udCk7XG4gICAgICAgIH0pLmJpbmQoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8gdG91Y2ggZXZlbnRzIGZvciBtb2JpbGUgc3R1ZmZcbiAgICAgICAgICAgIHZhciB0ID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XG4gICAgICAgICAgICBpZiAodFswXSkgdG91Y2hTdGFydCA9IHtcbiAgICAgICAgICAgICAgICB4OiB0WzBdLnBhZ2VYLFxuICAgICAgICAgICAgICAgIHk6IHRbMF0ucGFnZVlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRvdWNoRW5kID0gbnVsbDtcbiAgICAgICAgfSkuYmluZCgndG91Y2htb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMsXG4gICAgICAgICAgICAgICAgcG9zID0gZmxpcGJvb2sub2Zmc2V0KCk7XG5cbiAgICAgICAgICAgIGlmICh0WzBdLnBhZ2VYID4gcG9zLmxlZnQgJiYgdFswXS5wYWdlWSA+IHBvcy50b3AgJiYgdFswXS5wYWdlWCA8IHBvcy5sZWZ0ICsgZmxpcGJvb2sud2lkdGgoKSAmJiB0WzBdLnBhZ2VZIDwgcG9zLnRvcCArIGZsaXBib29rLmhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHQubGVuZ3RoID09IDEpIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGlmICh0WzBdKSB0b3VjaEVuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogdFswXS5wYWdlWCxcbiAgICAgICAgICAgICAgICAgICAgeTogdFswXS5wYWdlWVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmJpbmQoJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cudG91Y2hTdGFydCAmJiB3aW5kb3cudG91Y2hFbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdyA9IGZsaXBib29rLndpZHRoKCkgLyAyLFxuICAgICAgICAgICAgICAgICAgICBkID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogdG91Y2hFbmQueCAtIHRvdWNoU3RhcnQueCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRvdWNoRW5kLnkgLSB0b3VjaFN0YXJ0LnlcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcG9zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogdG91Y2hTdGFydC54IC0gZmxpcGJvb2sub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRvdWNoU3RhcnQueSAtIGZsaXBib29rLm9mZnNldCgpLnRvcFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGQueSkgPCAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VUdXJuaW5nKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChkLnggPiAxMDAgJiYgcG9zLnggPCB3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay50dXJuKCdwcmV2aW91cycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQueCA8IDEwMCAmJiBwb3MueCA+IHcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ25leHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuYmluZCgnc3RhcnQnLCBmdW5jdGlvbiAoZSwgdHVybikge1xuICAgICAgICAgICAgaWYgKGllKSB7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZwYWdlIG9iamVjdCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LnZpZGVvIG9iamVjdCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mcGFnZSBvYmplY3QnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoaWRlU2hhZG93cygnc3RhcnQnLCBhY3RpdmVBcnJvdywgZmxpcGJvb2ssIGZiQ29udCwgJ3N0YXJ0Jyk7XG4gICAgICAgICAgICBhY3RpdmVDb3JuZXIgPSB0cnVlO1xuICAgICAgICB9KS5iaW5kKCdlbmQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGllKSB7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZwYWdlIG9iamVjdCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi52aWRlbyBvYmplY3QnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZwYWdlIG9iamVjdCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhpZGVTaGFkb3dzKCd0dXJuZWQnLCAnZmFsc2UnLCBmbGlwYm9vaywgZmJDb250LCAnZW5kJyk7XG4gICAgICAgICAgICBhY3RpdmVDb3JuZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBsaW1pdGVyID0gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzaXplRkIoZmlyc3RXaWR0aCwgZmlyc3RIZWlnaHQsIGZsaXBib29rLCBmYkNvbnQsIHpvb21lZCk7XG5cbiAgICAgICAgZmJGaXJzdFJ1bihmbGlwYm9vaywgZmJDb250KTtcbiAgICB9KTtcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
