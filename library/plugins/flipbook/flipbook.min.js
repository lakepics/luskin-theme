"use strict";!function(){function i(i){var t,i=e(),n=/^\d+$/;return(t=jQuery.inArray(i,f))!=-1?t+=1:t=n.test(i)?i:1,t}function t(){return window.location.href.split("#").shift()}function e(){return window.location.hash.slice(1)}function n(i){var e,n=i.turn("page");e=""!=f[n]&&void 0!=f[n]?t()+"#"+f[n]:n%2!=0?t()+"#"+n:n==i.data().totalPages?t()+"#"+n:t()+"#"+(n+1),window.location.href=e}function s(t,e){var n=i();t.position();n=parseInt(n),n-1!=t.turn("page")&&(n==t.data().totalPages?(c(t),t.turn("page",n)):n%2!=0?(c(t),t.turn("page",n)):(c(t),t.turn("page",n+1)))}function a(i){i.find("div.even div.fb-page").prepend('<div class="fb-inside-shadow-left"></div>'),i.find("div.odd div.fb-page").prepend('<div class="fb-inside-shadow-right"></div>'),i.find("div.last div.fb-page").prepend('<div class="fb-inside-shadow-left"></div>'),i.find("div.first div.fb-page").prepend('<div class="fb-inside-shadow-right"></div>'),i.find("div.even div.fb-page").prepend('<div class="fb-page-edge-shadow-left"></div>'),i.find("div.odd div.fb-page").prepend('<div class="fb-page-edge-shadow-right"></div>'),i.append('<div class="fb-shadow-bottom-left"></div>'),i.append('<div class="fb-shadow-bottom-right"></div>'),i.append('<div class="fb-shadow-top-left"></div>'),i.append('<div class="fb-shadow-top-right"></div>')}function o(i,t,e,n,s){var a,o,d,p,h,s,r=(e.turn("view"),e.turn("page")),c=!1;c||(isNaN(s)?s=parseInt(e.position().left):c=!0,("start"==i||c)&&(a=e.activePageCorner()),("start"==i&&"tl"!=a&&"bl"!=a&&"tr"!=a&&"br"!=a||c&&"tl"!=a&&"bl"!=a&&"tr"!=a&&"br"!=a)&&(a=t),e.children("div.fb-shadow-top-left").stop().clearQueue(),e.children("div.fb-shadow-bottom-left").stop().clearQueue(),e.children("div.fb-shadow-top-right").stop().clearQueue(),e.children("div.fb-shadow-bottom-right").stop().clearQueue(),n.find("div.preview").stop(!0,!0),n.find("div.next").stop(!0,!0),n.find("div.preview").hasClass("small")?(o=s+e.width()-40,p=s-45,d=s+e.width()-50,h=s):(o=s+e.width()+24,p=s-110,d=s+e.width()-50,h=s),2!=r||!c||"tl"!=a&&"bl"!=a&&"left"!=a?r!=e.data().totalPages-2||!c||"tr"!=a&&"br"!=a&&"right"!=a||(e.children("div.fb-shadow-top-right").animate({opacity:0},200),e.children("div.fb-shadow-bottom-right").animate({opacity:0},200)):(e.children("div.fb-shadow-top-left").animate({opacity:0},200),e.children("div.fb-shadow-bottom-left").animate({opacity:0},200)),c||(2!=r||"tl"!=a&&"bl"!=a&&"left"!=a?1!=r&&(e.children("div.fb-shadow-top-left").animate({opacity:1},500),e.children("div.fb-shadow-bottom-left").animate({opacity:1},500),n.find("div.preview").animate({opacity:1,left:p},500,"easeOutExpo",function(){c=!1})):(e.children("div.fb-shadow-top-left").animate({opacity:0},200),e.children("div.fb-shadow-bottom-left").animate({opacity:0},200),n.find("div.preview").animate({opacity:0,left:h},500,"easeOutExpo",function(){c=!1})),r!=e.data().totalPages-2||"tr"!=a&&"br"!=a&&"right"!=a?r!=e.data().totalPages&&(e.children("div.fb-shadow-top-right").animate({opacity:1},500),e.children("div.fb-shadow-bottom-right").animate({opacity:1},500),n.find("div.next").animate({opacity:1,left:o},500,"easeOutExpo",function(){c=!1})):(e.children("div.fb-shadow-top-right").animate({opacity:0},200),e.children("div.fb-shadow-bottom-right").animate({opacity:0},200),n.find("div.next").animate({opacity:0,left:d},500,"easeOutExpo",function(){c=!1}))))}function d(i,t){var e,n,s,a,o,d;d=i.turn("page"),e=parseInt(i.position().left),t.find("div.preview").hasClass("small")?(n=e+i.width()-40,s=e-45,a=e+i.width()-50,o=e):(n=e+i.width()+24,s=e-110,a=e+i.width()-50,o=e),1==d?t.find("div.preview").animate({opacity:0,left:o},200,"easeOutExpo"):t.find("div.preview").animate({opacity:1,left:s},200,"easeOutExpo"),d==i.data().totalPages?t.find("div.next").animate({opacity:0,left:a},200,"easeOutExpo"):t.find("div.next").animate({opacity:1,left:n},200,"easeOutExpo")}function p(i,t,e,n,s){var a,o;if(e.turn("size",i,t),a=e.find("div.turn-page-wrapper.first").width(),o=e.find("div.turn-page-wrapper.first").height(),s){var d=!1;zoomCont=n.find("div.zoomed"),fbZoomedBorder=parseInt(zoomCont.css("border-left-width"));var p=n.offset();fbTopMargin=p.top,zoomCont.find("img.bg-img").hasClass("zoom-large")&&(d=!0),d?(zoomCont.find("img.bg-img").css("display","none"),zoomCont.find("img.bg-img.zoom-large").css({"margin-top":"0px",opacity:1,display:"block"})):(zoomCont.find("img.bg-img").css({"margin-top":"0px",opacity:1}),zoomCont.find("img.bg-img.zoom-large").css("opacity",0)),zoomCont.children().css("margin-top",0),jQuery(this).find("div.fb-page").hasClass("double")&&zoomCont.addClass("double"),jQuery(this).hasClass("odd")&&zoomCont.addClass("odd"),zoomCont.width(.5*e.width()*g),zoomCont.height(e.height()-2*fbZoomedBorder),zoomCont.find(" > div, img.bg-img, div.video").each(function(){var i=jQuery(this);i.hasClass("video")||(zoomCont.hasClass("double")?(i.width(100*g+"%"),i.height(e.find("div.first").height()*g)):(i.width(e.find("div.first").width()*g),i.height(e.find("div.first").height()*g)))}),zoomCont.find(".enlarge").each(function(){var i=jQuery(this);i.height()*g;i.css({"font-size":Math.round(parseInt(i.css("font-size"))*g)+"px","line-height":Math.round(parseInt(i.css("line-height"))*g)+"px"})}),zoomCont.find("img.bg-img").width(e.find("div.first").width()*g),zoomCont.find("img.bg-img").height(e.find("div.first").height()*g),n.find("div.zoomed.double img.bg-img").width(2*e.find("div.first").width()*g),n.find("div.zoomed.double.odd img.bg-img").css("margin-left","0px"),n.find("div.zoomed.double img.bg-img").css({left:"0px",right:"0px"}),zoomCont.css("left",(n.width()-zoomCont.outerWidth())/2),n.find("div.zoomed-shadow").css({left:parseInt(zoomCont.css("left"))+fbZoomedBorder,top:parseInt(zoomCont.css("top"))+fbZoomedBorder,width:zoomCont.css("width"),height:zoomCont.css("height")}),n.find("div.zoomed-shadow-top").css({left:parseInt(zoomCont.css("left"))+fbZoomedBorder,width:zoomCont.css("width")}),n.find("div.zoomed-shadow-bottom").css({left:parseInt(zoomCont.css("left"))+fbZoomedBorder,top:zoomCont.height()-40+2*fbZoomedBorder,width:zoomCont.css("width")})}e.find("div.page-content").each(function(){var i=jQuery(this);if(i.width(a-parseInt(i.css("margin-top"))),i.height(o-2*parseInt(i.css("margin-top"))),i.find("img.bg-img").height(i.height()),i.find("object, iframe").length&&i.find(".preview-content").height("100%"),i.parent().hasClass("double")){if(i.find("img.bg-img").width(2*i.width()),i.parent().parent().parent().hasClass("odd")){parseInt(i.css("margin-right"));i.find("img.bg-img").css("margin-left",-i.width()+"px"),i.find("div.container img.bg-img").css("margin-left","0px")}}else i.find("img.bg-img").width(i.width());i.parent().find("div.fb-inside-shadow-left").height(i.height()),i.parent().find("div.fb-inside-shadow-right").height(i.height()),i.parent().find("div.fb-page-edge-shadow-left").height(i.height()),i.parent().find("div.fb-page-edge-shadow-right").height(i.height())}),e.find("div.fb-shadow-bottom-left").width(i/2),e.find("div.fb-shadow-bottom-right").width(i/2),e.find("div.fb-shadow-top-left").width(i/2),e.find("div.fb-shadow-top-right").width(i/2),n.find("div.preview, div.next").css("top",(e.find("div.turn-page-wrapper.first").height()-86)/2)}function h(i,t,e,n){var s=t.data().done,a=t.width(),d=a/2,p={duration:s?600:0,easing:"easeOutExpo",complete:function(){t.turn("resize")}};if(t.stop(!0),1==i||i==t.data().totalPages){var h;h=1==i?Math.floor(.5*(e.width()-d))-d:Math.floor(.5*(e.width()-d)),parseInt(t.css("left"))!=h&&(t.animate({left:h},p),o("center",n,t,e,Math.floor(.5*(e.width()-d))-d))}else t.animate({left:Math.floor(.5*(e.width()-a))},p),o("center",n,t,e,Math.floor(.5*(e.width()-a)))}function r(i,t){jQuery(window).trigger("resize"),t.find("div.next").stop().clearQueue(),t.find("div.preview").stop().clearQueue(),t.find("div.preview").css("left",0),t.find("div.next").css("left",.5*jQuery(window).width()),o("turned","false",i,t,"first run"),jQuery("div.fb-nav").hasClass("small")?jQuery("div.fb-nav").animate({opacity:1,top:-20-parseInt(i.css("margin-bottom").replace("px",""))-parseInt(jQuery("div.fb-nav").css("margin-top").replace("px",""))},1e3,"easeOutExpo"):jQuery("div.fb-nav").animate({opacity:1,top:"0"},1e3,"easeOutExpo"),i.parent().css("background-image","none")}function c(i){i.find("div.fb-shadow-bottom-left").css("opacity",0),i.find("div.fb-shadow-top-left").css("opacity",0),i.find("div.fb-shadow-bottom-right").css("opacity",0),i.find("div.fb-shadow-top-right").css("opacity",0)}var l,f=[],v=3,g=2,u=2e3;jQuery(document).ready(function(t){var e,m,w,b,y,x=t(".flipbook"),z=t("div.flipbook-container"),C=z.find("div.fb-nav"),I=!1,k=!1,Q="false",E=0,O=!1,j=!1,M=!1,P="ontouchstart"in document.documentElement;"Microsoft Internet Explorer"==navigator.appName&&(M=!0),x.bind("turning",function(i,t){j=!0}),x.bind("turned",function(i,e){var n=t(this);n.data().done;h(e,x,z,Q),z.find("div.preview, div.next").css("top",(x.find("div.turn-page-wrapper.first").height()-86)/2),I&&(l=setTimeout(function(){n.turn("next"),x.turn("page")+2>=x.data().totalPages&&(I=!1,C.find("ul li.slideshow span.button-icon-over").animate({opacity:0},300),C.find("ul li.slideshow span.button-icon").animate({opacity:1},300),C.find("ul li.slideshow").trigger("mouseout"),setTimeout(function(){z.find("div.next, div.preview").fadeIn(500)},600),o("start","right",x,z,"end"))},Y)),o("turned","false",x,z,"end"),setTimeout(function(){d(x,z)},350),j=!1}),x.find("div.fb-page").each(function(){var i=t(this);if(i.hasClass("double")){var e=i.clone(!0);e.insertAfter(i)}}),b=i(),1!=b&&f.length<2?x.turn({page:b+1,acceleration:!0,shadows:!t.isTouch,duration:500}):x.turn({page:b,acceleration:!0,shadows:!t.isTouch,duration:500}),x.find("div.turn-page-wrapper").each(function(){var i=t(this),e=t(this).attr("page"),n=x.data().totalPages;if(1==e?(i.addClass("first"),i.find("div.page-content").addClass("first")):e==n?(i.addClass("last"),i.find("div.page-content").addClass("last")):e%2==0?(i.addClass("even"),i.find("div.page-content").addClass("even")):(i.addClass("odd"),i.find("div.page-content").addClass("odd")),e%2!=0&&1!=e&&e!=n){var s=parseInt(i.find("div.double div.page-content").css("margin-right"));i.find("div.double div.page-content img.bg-img").css("margin-left",-i.width()+s+"px"),i.find("div.container img.bg-img").css("margin-left","0px")}}),x.find(" > div:last-child > div").each(function(){var i=t(this);E++,e=x.data().totalPages,i.addClass("page-transition"),i.attr("page",E),1==E?i.addClass("first"):E==e?i.addClass("last"):E%2==0?i.addClass("even"):i.addClass("odd")});x.find("div.turn-page-wrapper > div").width(),x.find("div.turn-page-wrapper > div").height();x.find("div.turn-page-wrapper").addSwipeEvents().bind("doubletap",function(i,e){t(this).trigger("dblclick")}),x.find("div.turn-page-wrapper").dblclick(function(i){function e(i,t){x.off("turned",e),y.dblclick()}function n(){x.css({visibility:"visible","pointer-events":"all"}),x.stop(!0).animate({opacity:1},300,function(){o("turned","false",x,z,"zoom")}),a.animate({opacity:0},300,function(){t(this).remove(),k=!1,C.find("ul li.zoom").trigger("mouseout")}),C.css("visibility","visible"),C.stop(!0).animate({opacity:1},300),z.find("div.next, div.preview").stop(!0).fadeIn(500),z.find("div.zoomed-shadow-top").clearQueue(),z.find("div.zoomed-shadow-bottom").clearQueue(),z.find("div.zoomed-shadow").animate({opacity:0},300,function(){t(this).remove()}),z.find("div.zoomed-shadow-bottom").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.zoomed-shadow-top").animate({opacity:0},100,function(){t(this).remove()}),z.find("span.big-side.show-previous").fadeOut(200),z.find("span.big-side.show-next").fadeOut(200)}function s(){z.find("div.zoomed-shadow-top").clearQueue(),z.find("div.zoomed-shadow-bottom").clearQueue(),z.find("div.zoomed-shadow").animate({opacity:0},300,function(){t(this).remove()}),z.find("div.zoomed-shadow-bottom").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.zoomed-shadow-top").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.page-content.zoomed").animate({opacity:0},100,function(){t(this).remove()}),z.find("span.big-side.show-previous").fadeOut(200),z.find("span.big-side.show-next").fadeOut(200)}var a,d,p,h,r=g,c=!1,f=t(this);I&&(I=!I,clearTimeout(l),C.find("ul li.slideshow").children("span.button-icon-over").css({opacity:0}),C.find("ul li.slideshow").children("span.button-icon").css({opacity:1}),C.find("ul li.slideshow").children("span.button-over").css({opacity:0}),C.find("ul li.slideshow").children("span.button").css({opacity:1})),x.parent().prepend(t(this).find("div.page-content").clone(!0).addClass("zoomed")).css("opacity",0).animate({opacity:1},500),x.parent().prepend('<div class="zoomed-shadow"></div>').css("opacity",0).animate({opacity:1},500),x.animate({opacity:0},500,function(){x.css({visibility:"none","pointer-events":"none"})});var v=z.children(".big-side.show-previous"),u=z.children(".big-side.show-next");u.length?(v.off("click"),u.off("click")):(v=jQuery('<span class="big-side show-previous"><span class="arrow"></span><span class="left"></span><span class="center"></span><span class="right"></span><span class="left hover"></span><span class="center hover"></span><span class="right hover"></span></span>'),z.append(v),u=jQuery('<span class="big-side show-next"><span class="arrow"></span><span class="left"></span><span class="center"></span><span class="right"></span><span class="left hover"></span><span class="center hover"></span><span class="right hover"></span></span>'),z.append(u)),v.height(x.height()),u.height(x.height()),v.stop(!0).fadeIn(100),u.stop(!0).fadeIn(100),f.is(".first, .last")&&(f.hasClass("first")?v.stop(!0,!0).fadeOut(100):u.stop(!0,!0).fadeOut(100)),v.on("click",function(i){i.preventDefault()}),u.on("click",function(i){i.preventDefault()}),v.one("click",function(i){t(this);y=f.prev(),s(),y.css("z-index")!=f.css("z-index")?(x.turn("previous"),x.off("turned",e),x.on("turned",e)):y.dblclick()}),u.one("click",function(i){t(this);y=f.next(),s(),y.css("z-index")!=f.css("z-index")?(x.turn("next"),x.off("turned",e),x.on("turned",e)):y.dblclick()}),x.animate({opacity:0},500,function(){x.css({visibility:"hidden","pointer-events":"none"})}),z.find("div.next:not(.zoom), div.preview:not(.zoom)").stop(!0).fadeOut(500),a=z.find("div.zoomed"),x.parent().prepend('<div class="zoomed-shadow-top"></div><div class="zoomed-shadow-bottom"></div>'),p=parseInt(a.css("border-left-width"));var m=z.offset();d=m.top,void 0==i.pageY&&(i.pageY=d),a.children().css("margin-top",d-i.pageY),a.find("img.bg-img").hasClass("zoom-large")&&(c=!0),c?(a.find("img.bg-img").css("display","none"),a.find("img.bg-img.zoom-large").css({"margin-top":"0px",opacity:1,display:"block"})):(a.find("img.bg-img").css({"margin-top":"0px",opacity:1}),a.find("img.bg-img.zoom-large").css("opacity",0)),t(this).find("div.fb-page").hasClass("double")&&a.addClass("double"),t(this).hasClass("odd")&&a.addClass("odd"),a.width(.5*x.width()*r),a.height(x.height()-2*p),a.find(" > div, img.bg-img, div.video").each(function(){var i=t(this);i.hasClass("video")||(a.hasClass("double")?(i.width(100*r+"%"),i.height(x.find("div.first").height()*r)):(i.width(x.find("div.first").width()*r),i.height(x.find("div.first").height()*r)))}),a.find(".enlarge").each(function(){var i=t(this);i.height()*r;i.css({"font-size":Math.round(parseInt(i.css("font-size"))*r)+"px","line-height":Math.round(parseInt(i.css("line-height"))*r)+"px"})}),a.find("img.bg-img").width(x.find("div.first").width()*r),a.find("img.bg-img").height(x.find("div.first").height()*r),z.find("div.zoomed.double img.bg-img").width(2*x.find("div.first").width()*r),z.find("div.zoomed.double.odd img.bg-img").css("margin-left","0px"),z.find("div.zoomed.double img.bg-img").css({left:"0px",right:"0px"}),k=!0,a.css("left",(z.width()-a.outerWidth())/2),z.find("div.zoomed-shadow").css("left",parseInt(a.css("left"))+p),z.find("div.zoomed-shadow").css("top",parseInt(a.css("top"))+p),z.find("div.zoomed-shadow").css("width",a.css("width")),z.find("div.zoomed-shadow").css("height",a.css("height")),C.animate({opacity:0},300,function(){C.css("visibility","hidden")}),M&&z.find("div.zoomed-shadow").css("display","none");var w=a.outerHeight(),b=parseInt(a.css("left"));v.css({left:b-40}).height(w).children(".center, .center.hover").height(w-24),u.css({right:b-40}).height(w).children(".center, .center.hover").height(w-24),P&&a.addSwipeEvents().bind("doubletap",function(i,t){n()}),a.dblclick(function(){n()}),P&&a.on("touchmove",function(i){var t=i.originalEvent.touches;d-t[0].pageY>-a.children().height()+a.height()?(a.find(" > div").css("margin-top",d-t[0].pageY),a.find("img.bg-img").css("margin-top",d-t[0].pageY)):(a.find("img.bg-img").css("margin-top",-a.children().height()+a.height()),a.find(" > div").css("margin-top",-a.children().height()+a.height()))}),a.find(" > div").css("position","relative"),a.find("img.bg-img").css("left","0px"),a.mousemove(function(i){d-i.pageY>-a.children().height()+a.height()?a.find(" > div").css("margin-top",d-i.pageY):a.find(" > div").css("margin-top",-a.children().height()+a.height())}),h=a.position(),z.find("div.zoomed-shadow-top, div.zoomed-shadow-bottom").width(a.width()).animate({opacity:1},500),z.find("div.zoomed-shadow-top").css({top:h.top-13,left:h.left+p}),z.find("div.zoomed-shadow-bottom").css({top:h.top+a.height()-40+2*p,left:h.left+p})});var Y=u,T=0,S=0;C.find("ul li").each(function(){var i=t(this);i.hasClass("left")?T+=97:i.hasClass("center")?T+=89:i.hasClass("right")?T+=95:i.hasClass("round")&&(0==S?(T+=96,i.css("margin-left","0px")):T+=96),S++}),C.width(T),C.find("ul li").each(function(){var i=t(this);i.hasClass("slideshow")?i.append('<span class="button"></span><span class="button-over"></span><span class="button-icon"></span><span class="button-icon-over"></span>'):i.append('<span class="button"></span><span class="button-over"></span><span class="button-icon"></span>')}),z.append('<div class="next round"><span class="button"></span><span class="button-over"></span><span class="button-icon"></span></div><div class="preview round"><span class="button"></span><span class="button-over"></span><span class="button-icon"></span></div>'),C.hasClass("mobile")&&z.find("div.next, div.preview").addClass("mobile"),t(".fb-nav ul li, .flipbook-container div.next, .flipbook-container div.preview").hover(function(){var i=t(this);i.children("span.button").clearQueue(),i.children("span.button-over").clearQueue(),i.children("span.button").animate({opacity:0},300),i.children("span.button-over").animate({opacity:1},300)},function(){var i=t(this);i.hasClass("slideshow")&&I||i.hasClass("zoom")&&k||(i.children("span.button").animate({opacity:1},300),i.children("span.button-over").animate({opacity:0},300))}),C.find("ul li.toc").on("click",function(i){x.turn("page")!=v&&x.trigger("mouseover"),x.turn("page",v),c(x)}),C.find("ul li.zoom").on("click",function(i){x.find("div.turn-page-wrapper").each(function(){var i=t(this);i.attr("page")!=x.turn("page")||k?i.attr("page")==x.turn("page")&&k&&z.find("div.zoomed").trigger("dblclick"):i.trigger("dblclick")})}),C.find("ul li.slideshow").on("click",function(i){I=!I;var e=t(this);I?(clearTimeout(l),x.turn("next"),z.find("div.next, div.preview").stop(!0).fadeOut(500),e.children("span.button-icon-over").animate({opacity:1},300),e.children("span.button-icon").animate({opacity:0},300)):(clearTimeout(l),z.find("div.next, div.preview").stop(!0).fadeIn(500),e.children("span.button-icon-over").animate({opacity:0},300),e.children("span.button-icon").animate({opacity:1},300)),o("start","right",x,z,"end")}),C.find("ul li.show-all").on("click",function(i){var e,n,s,a,o,d,p,h=x.height(),r=(x.width(),12),l=6,f=1,v=10;x.turn("stop"),z.append('<div class="show-all"><div class="content"></div></div>'),z.append('<div class="showall-shadow-top"></div><div class="showall-shadow-bottom"></div>'),z.find("div.preview, div.next").animate({opacity:0},300);var g=z.find("div.show-all");for(z.append('<span class="big-next show-all-next"><span class="arrow"></span><span class="left"></span><span class="center"></span><span class="right"></span><span class="left hover"></span><span class="center hover"></span><span class="right hover"></span></span>'),z.append('<span class="big-next show-all-previous"><span class="arrow"></span><span class="left"></span><span class="center"></span><span class="right"></span><span class="left hover"></span><span class="center hover"></span><span class="right hover"></span></span>'),f=2,x.find("div.page-content").each(function(){var i=t(this);i.parent().parent().hasClass("fpage")||(o=i.clone().addClass("show-all-thumb"),o.find("img.bg-img.zoom-large").remove(),o.attr("style",""),i.parent().parent().parent().hasClass("last")?o.addClass("even"):i.parent().parent().parent().hasClass("first")&&o.addClass("odd"),i.parent().hasClass("double")&&o.addClass("double"),i.parent().parent().parent().hasClass("last")?g.find("div.content").prepend(o):g.find("div.content").append(o),f++)}),r=parseInt(g.find("div.content").css("top")),e=parseInt(g.find("div.show-all-thumb").css("margin-bottom")),n=parseInt(g.find("div.show-all-thumb.odd").css("margin-right")),s=parseInt(g.find("div.show-all-thumb").css("height")),a=parseInt(g.find("div.show-all-thumb").css("width")),p=parseInt(g.find("div.show-all-thumb.odd").css("border-right-width")),d=s/h;z.height()-100<=2*r+l*(s+2*p+e)-e;)l--;for(;z.width()-100<=2*r+v*(a+p)+v*n*.5-n;)v--;v%2!=0&&v--,v>6&&(v=6),g.css({width:2*r+v*(a+p)+v*n*.5-n+"px",height:2*r+l*(s+2*p+e)-e+"px"}),f=1,g.find("div.show-all-thumb").each(function(){var i=t(this);f%v==0&&i.addClass("last-thumb"),f++,i.find(".enlarge").each(function(){t(this).css({"font-size":Math.round(parseInt(t(this).css("font-size"))*d)+"px","line-height":Math.round(parseInt(t(this).css("line-height"))*d)+"px"})}),i.prepend('<span class="shadow"></span>'),i.find("div.video").remove()}),x.animate({opacity:0},500,function(){x.css("visibility","none")}),z.find("div.preview").animate({opacity:0},300),z.find("div.next").animate({opacity:0},300),x.css("pointer-events","none"),C.animate({opacity:0},500),g.animate({opacity:1},500),g.css({left:(z.width()-g.width())/2+"px"}),z.find("span.show-all-previous").css({width:g.width(),top:parseInt(g.css("top"))-43+"px",left:parseInt(g.css("left"))+1+"px"}),z.find("span.show-all-next").css({width:g.width(),top:parseInt(g.css("top"))+parseInt(g.css("height"))-33+"px",left:parseInt(g.css("left"))+1+"px"}),z.find("span.big-next").each(function(){t(this).find("span.center").width(t(this).width()-26)}),g.height()<g.find("div.content").height()-e&&(z.find("span.show-all-previous").css("visibility","visible"),z.find("span.show-all-next").css("visibility","visible"),z.find("span.show-all-previous").animate({opacity:1},500),z.find("span.show-all-next").animate({opacity:1},500)),g.find("div.show-all-thumb").hover(function(){var i=t(this);i.find("span.shadow").clearQueue(),i.find("span.shadow").animate({opacity:1},300),i.hasClass("even")?(i.next().find("span.shadow").clearQueue(),i.next().find("span.shadow").animate({opacity:1},300)):(i.prev().find("span.shadow").clearQueue(),i.prev().find("span.shadow").animate({opacity:1},300))},function(){var i=t(this);i.find("span.shadow").animate({opacity:0},300),i.hasClass("even")?(i.next().find("span.shadow").clearQueue(),i.next().find("span.shadow").animate({opacity:0},300)):(i.prev().find("span.shadow").clearQueue(),i.prev().find("span.shadow").animate({opacity:0},300))});var u=g.position();z.find("div.showall-shadow-top, div.showall-shadow-bottom").width(g.width()).delay(500).animate({opacity:1},500),z.find("div.showall-shadow-top").css({top:u.top-12,left:u.left+p}),z.find("div.showall-shadow-bottom").css({top:u.top+g.height()-39,left:u.left+p}),g.find("div.show-all-thumb").on("click",function(){var i=t(this),e=Math.ceil(i.index());x.trigger("mouseover"),c(x),x.turn("page",e),g.animate({opacity:0},300,function(){t(this).remove()}),z.find("div.showall-shadow-bottom").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.showall-shadow-top").animate({opacity:0},100,function(){t(this).remove()}),z.find("span.show-all-previous").animate({opacity:0},300,function(){t(this).remove()}),z.find("span.show-all-next").animate({opacity:0},300,function(){t(this).remove()}),x.css("visibility","visible"),x.clearQueue(),x.animate({opacity:1},300),C.animate({opacity:1},500),e<2&&(x.find("div.fb-shadow-bottom-left").css("opacity",0),x.find("div.fb-shadow-top-left").css("opacity",0)),x.css("pointer-events","all")});var m=g.find("div.content"),w=l*(s+e+2*p),b=!1;z.find("span.show-all-previous").on("click",function(){parseInt(m.css("top"))==r||b||(b=!0,m.clearQueue(),m.animate({top:parseInt(m.css("top"))+w},1e3,"easeOutExpo",function(){b=!1}))}),z.find("span.show-all-next").on("click",function(){parseInt(m.css("top"))-w>12-m.height()&&!b&&(b=!0,m.clearQueue(),m.animate({top:parseInt(m.css("top"))-w},1e3,"easeOutExpo",function(){b=!1}))}),z.find("span.show-all-next, span.show-all-previous").hover(function(){var i=t(this);i.clearQueue(),i.find("span.left.hover, span.right.hover, span.center.hover").animate({opacity:1},300)},function(){var i=t(this);i.clearQueue(),i.find("span.left.hover, span.right.hover, span.center.hover").animate({opacity:0},300)})}),z.find("div.next").on("click",function(i){j||(Q="right",x.trigger("mouseover"),x.turn("next"))}),z.find("div.preview").on("click",function(i){j||(Q="left",x.trigger("mouseover"),x.turn("previous"))}),a(x),s(x,z),m=x.width(),w=x.height();var B=new Array,S=0;t(".flipbook div.page-content .enlarge").each(function(){B.push(new Array),B[S].push(parseInt(t(this).css("font-size"))),B[S].push(parseInt(t(this).css("line-height"))),S++}),t(window).on("resize",function(){var i,e=x.turn("page"),n=t(this),s=n.width();i=n.height()-C.offset().top+150<0?n.height()-x.offset().top-(n.height()-C.offset().top+150):n.height()-x.offset().top-20;var a,o,d,h,r=z.find("div.next"),c=z.find("div.preview"),l=parseInt(x.css("margin-top"))+parseInt(x.css("margin-bottom"))+x.height()+parseInt(C.css("margin-top"))+parseInt(C.css("margin-bottom"))+parseInt(C.css("top"))+C.height()+40,f=x.width()+330,v=parseInt(x.css("margin-top"))+x.height()+C.height()-55,g=x.width()+140,u=x.position();if(a=z.height()/w<z.width()/m?z.height()/w:z.width()/m,o=z.width(),d=z.height(),o<m){var a=o/m;o=m*a,d=w*a}(o>m||d>w)&&(o=m,d=w),o<C.width()+20&&(o=C.width()+20,d=w*(o/m)),o==x.width()&&d==x.height()||p(o,d,x,z,k),i>l&&s>f&&(o=m,d=w,p(m,w,x,z,k)),h=x.height()/w,h=parseInt(100*h);var b=0;if(t(".flipbook div.page-content .enlarge").each(function(){100==h?(t(this).css("font-size",B[b][0]+"px"),t(this).css("line-height",B[b][1]+"px")):(t(this).css("font-size",B[b][0]*(h/100)+"px"),t(this).css("line-height",B[b][1]*(h/100)+"px")),b++}),s=n.width(),i=n.height()-C.offset().top+150<0?n.height()-x.offset().top-(n.height()-C.offset().top+150):n.height()-x.offset().top-20,l=parseInt(x.css("margin-top").replace("px",""))+parseInt(x.css("margin-bottom").replace("px",""))+d+parseInt(C.css("margin-top").replace("px",""))+parseInt(C.css("margin-bottom").replace("px",""))+C.height(),f=o+330,v=parseInt(x.css("margin-top").replace("px",""))+d+C.height()-55,g=o+140,1==e||e==x.data().totalPages){var y;y=1==e?Math.floor(.5*(z.width()-x.width()/2))-x.width()/2:Math.floor(.5*(z.width()-x.width()/2)),parseInt(x.css("left"))!=y&&x.css({left:y})}else x.css({left:Math.floor(.5*(z.width()-x.width()))}),k&&(z.children("div.zoomed").css({left:Math.floor(.5*(z.width()-x.width()))-10}),z.children("div.zoomed-shadow, div.zoomed-shadow-bottom, div.zoomed-shadow-top").css({left:Math.floor(.5*(z.width()-x.width()))}));if(s<f?(r.addClass("small").css({left:u.left+x.width()-40}),c.addClass("small").css({left:u.left-45}),c.find("span.button-icon").css({left:6}),r.find("span.button-icon").css({left:41})):s>f&&(r.removeClass("small").css({left:u.left+x.width()+24}),c.removeClass("small").css({left:u.left-110}),c.find("span.button-icon").css({left:22}),r.find("span.button-icon").css({left:26})),"0"==c.css("opacity")&&c.css("left","100px"),"0"==r.css("opacity")&&r.css("right","100px"),k){var I=parseInt(z.find("div.zoomed").css("left"));z.children(".big-side.show-previous").css({left:I-40}).height(d).children(".center, .center.hover").height(d-24),z.children(".big-side.show-next").css({right:I-40}).height(d).children(".center, .center.hover").height(d-24)}i<l?(C.addClass("small").css({top:-40-parseInt(x.css("margin-bottom").replace("px",""))-parseInt(C.css("margin-top").replace("px",""))}),C.find("ul > li.toc > span.button-icon").css({top:40}),C.find("ul > li.zoom > span.button-icon").css({top:38}),C.find("ul > li.slideshow > span.button-icon, ul > li.slideshow > span.button-icon-over").css({top:39}),C.find("ul > li.show-all > span.button-icon").css({top:40})):i>l&&(C.removeClass("small").css({top:0}),C.find("ul > li.toc > span.button-icon").css({top:25}),C.find("ul > li.zoom > span.button-icon").css({top:24}),C.find("ul > li.slideshow > span.button-icon, ul > li.slideshow > span.button-icon-over").css({top:25}),C.find("ul > li.show-all > span.button-icon").css({top:26}))}),x.bind("turned",function(i,t,e){return n(x),!1}),t(window).bind("keydown",function(i){if(37==i.keyCode){if(j)return;if(k){var e=z.children(".big-side.show-previous");e.is(":hidden")||e.click()}else Q="left",x.trigger("mouseover"),x.turn("previous")}else if(39==i.keyCode){if(j)return;if(k){var n=z.children(".big-side.show-next");n.is(":hidden")||n.click()}else Q="right",x.trigger("mouseover"),x.turn("next")}else 27==i.keyCode&&(x.css({visibility:"visible","pointer-events":"all"}),x.stop(!0).animate({opacity:1},300,function(){o("turned","false",x,z,"zoom")}),z.find("div.zoomed").animate({opacity:0},300,function(){t(this).remove(),k=!1,C.find("ul li.zoom").trigger("mouseout")}),C.css("visibility","visible"),C.stop(!0).animate({opacity:1},300),z.find("div.next, div.preview").stop(!0).fadeIn(500),z.find("div.zoomed-shadow-top").clearQueue(),z.find("div.zoomed-shadow-bottom").clearQueue(),z.find("div.zoomed-shadow").animate({opacity:0},300,function(){t(this).remove()}),z.find("div.zoomed-shadow-bottom").animate({opacity:0},100,function(){t(this).remove()}),z.find("div.zoomed-shadow-top").animate({opacity:0},100,function(){t(this).remove()}),z.find("span.big-side.show-previous").fadeOut(200),z.find("span.big-side.show-next").fadeOut(200))}).bind("hashchange",function(){s(x,z)}).bind("touchstart",function(i){var t=i.originalEvent.touches;t[0]&&(touchStart={x:t[0].pageX,y:t[0].pageY}),touchEnd=null}).bind("touchmove",function(i){var t=i.originalEvent.touches,e=x.offset();t[0].pageX>e.left&&t[0].pageY>e.top&&t[0].pageX<e.left+x.width()&&t[0].pageY<e.top+x.height()&&(1==t.length&&i.preventDefault(),t[0]&&(touchEnd={x:t[0].pageX,y:t[0].pageY}))}).bind("touchend",function(i){if(window.touchStart&&window.touchEnd){var t=x.width()/2,e={x:touchEnd.x-touchStart.x,y:touchEnd.y-touchStart.y},n={x:touchStart.x-x.offset().left,y:touchStart.y-x.offset().top};if(Math.abs(e.y)<100){if(j)return;e.x>100&&n.x<t?x.turn("previous"):e.x<100&&n.x>t&&x.turn("next")}}}).bind("start",function(i,t){M?(x.find("div.fpage object").css({display:"none"}),x.find("div.video object").css({display:"none"})):x.find("div.fpage object").css({opacity:0}),o("start",Q,x,z,"start"),O=!0}).bind("end",function(i){M?(x.find("div.fpage object").css({display:"block"}),x.find("div.video object").css({display:"block"})):x.find("div.fpage object").css({opacity:1}),o("turned","false",x,z,"end"),O=!1}),p(m,w,x,z,k),r(x,z)})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnJhcnkvcGx1Z2lucy9mbGlwYm9vay9mbGlwYm9vay5qcyJdLCJuYW1lcyI6WyJjaGVja0hhc2giLCJoYXNoIiwiayIsImdldEhhc2giLCJpbnRSZWdleCIsImpRdWVyeSIsImluQXJyYXkiLCJwYWdlcyIsInRlc3QiLCJnZXRVUkwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzcGxpdCIsInNoaWZ0Iiwic2xpY2UiLCJzZXRIYXNoVGFnIiwiZmxpcGJvb2siLCJwYWdlVVJMIiwiY3VycmVudElEIiwidHVybiIsInVuZGVmaW5lZCIsImRhdGEiLCJ0b3RhbFBhZ2VzIiwiaGFzaENoYW5nZSIsImZiQ29udCIsInBhZ2UiLCJwb3NpdGlvbiIsInBhcnNlSW50IiwiZGlzYWJsZVNoYWRvd3MiLCJhZGRJbnNpZGVCb29rU2hhZG93IiwiZmluZCIsInByZXBlbmQiLCJhcHBlbmQiLCJoaWRlU2hhZG93cyIsImNhbGxlciIsImFycm93IiwicG9zTGVmdCIsImFjdGl2ZSIsIm5leHRZIiwibmV4dFllbmQiLCJwcmV2WSIsInByZXZZZW5kIiwiYW5pbWF0ZSIsImlzTmFOIiwibGVmdCIsImFjdGl2ZVBhZ2VDb3JuZXIiLCJjaGlsZHJlbiIsInN0b3AiLCJjbGVhclF1ZXVlIiwiaGFzQ2xhc3MiLCJ3aWR0aCIsIm9wYWNpdHkiLCJyZXBvc2l0aW9uQXJyb3dzIiwicmVzaXplRkIiLCJmYldpZHRoIiwiZmJIZWlnaHQiLCJ6b29tZWQiLCJzaW5nbGVXaWR0aCIsInNpbmdsZUhlaWdodCIsImhlaWdodCIsImxhcmdlSW1hZ2UiLCJ6b29tQ29udCIsImZiWm9vbWVkQm9yZGVyIiwiY3NzIiwiZmJPZmZzZXQiLCJvZmZzZXQiLCJmYlRvcE1hcmdpbiIsInRvcCIsIm1hcmdpbi10b3AiLCJkaXNwbGF5IiwidGhpcyIsImFkZENsYXNzIiwiem9vbVN0cmVuZ3RoIiwiZWFjaCIsIiR0aGlzIiwiZm9udC1zaXplIiwiTWF0aCIsInJvdW5kIiwibGluZS1oZWlnaHQiLCJyaWdodCIsIm91dGVyV2lkdGgiLCJsZW5ndGgiLCJwYXJlbnQiLCJjZW50ZXJCb29rIiwiYWN0aXZlQXJyb3ciLCJyZW5kZXJlZCIsImRvbmUiLCJwYWdlV2lkdGgiLCJvcHRpb25zIiwiZHVyYXRpb24iLCJlYXNpbmciLCJjb21wbGV0ZSIsImZsb29yIiwiZmJGaXJzdFJ1biIsInRyaWdnZXIiLCJyZXBsYWNlIiwic2xpZGVzaG93VGltZW91dCIsInRvY0luZGV4Iiwic2xpZGVTaG93SW50ZXJ2YWwiLCJkb2N1bWVudCIsInJlYWR5IiwiJCIsImxhc3RJRCIsImZpcnN0V2lkdGgiLCJmaXJzdEhlaWdodCIsIiRzd2FwIiwiZmJOYXYiLCJzbGlkZXNob3ciLCJwYWdlSUQiLCJhY3RpdmVDb3JuZXIiLCJwYWdlVHVybmluZyIsImllIiwidG91Y2giLCJkb2N1bWVudEVsZW1lbnQiLCJuYXZpZ2F0b3IiLCJhcHBOYW1lIiwiYmluZCIsImUiLCJzZXRUaW1lb3V0IiwiZmFkZUluIiwic2xpZGVzaG93RGVsYXkiLCJjbG9uZSIsImluc2VydEFmdGVyIiwiYWNjZWxlcmF0aW9uIiwic2hhZG93cyIsImlzVG91Y2giLCJhdHRyIiwicmlnaHRNYXJnaW4iLCJhZGRTd2lwZUV2ZW50cyIsImRibGNsaWNrIiwiZmxpcFBhZ2UiLCJvZmYiLCJjbG9zZVpvb20iLCJ2aXNpYmlsaXR5IiwicG9pbnRlci1ldmVudHMiLCJyZW1vdmUiLCJmYWRlT3V0IiwicmVpbml0Wm9vbSIsInpvb21GYWN0b3IiLCIkcGFnZSIsImNsZWFyVGltZW91dCIsIiRwcmV2IiwiJG5leHQiLCJpcyIsIm9uIiwicHJldmVudERlZmF1bHQiLCJvbmUiLCJwcmV2IiwibmV4dCIsInBhZ2VZIiwiaCIsIm91dGVySGVpZ2h0IiwibCIsImV2dCIsInQiLCJvcmlnaW5hbEV2ZW50IiwidG91Y2hlcyIsIm1vdXNlbW92ZSIsIm5hdldpZHRoIiwiaSIsImhvdmVyIiwicGFkZGluZ1ZlcnRpY2FsIiwicGFkZGluZ0hvcml6b250YWwiLCJ0aHVtYkhlaWdodCIsInRodW1iV2lkdGgiLCJwZXJjZW50YWdlIiwiYm9yZGVyU2l6ZSIsInBhZGRpbmdBcm91bmQiLCJyb3ciLCJpbmQiLCJjb2wiLCJzaG93QWxsIiwiZGVsYXkiLCJpZCIsImNlaWwiLCJpbmRleCIsInNhQ29udGVudCIsInNjcm9sbEFtb3VudCIsImFuaW1hdGlvbiIsImJ1dCIsInBvc0FycmF5IiwiQXJyYXkiLCJwdXNoIiwicmF0aW8iLCJmYlBlcmNlbnRhZ2UiLCJmYk5leHQiLCJmYlByZXYiLCJhcmVhSGVpZ2h0IiwiYXJlYVdpZHRoIiwiYXJlYU1pbkhlaWdodCIsImFyZWFNaW5XaWR0aCIsInJlbW92ZUNsYXNzIiwicGFnZU9iaiIsImtleUNvZGUiLCJjbGljayIsInRvdWNoU3RhcnQiLCJ4IiwicGFnZVgiLCJ5IiwidG91Y2hFbmQiLCJwb3MiLCJ3IiwiZCIsImFicyJdLCJtYXBwaW5ncyI6IkFBQUEsY0FJQSxXQXVCSSxRQUFTQSxHQUFVQyxHQUNmLEdBQ0lDLEdBREFELEVBQU9FLElBRVBDLEVBQVcsT0FVZixRQVJLRixFQUFJRyxPQUFPQyxRQUFRTCxFQUFNTSxRQUMxQkwsR0FBUSxFQUVSQSxFQURPRSxFQUFTSSxLQUFLUCxHQUNqQkEsRUFFQSxFQUdEQyxFQUlYLFFBQVNPLEtBQ0wsTUFBT0MsUUFBT0MsU0FBU0MsS0FBS0MsTUFBTSxLQUFLQyxRQUkzQyxRQUFTWCxLQUNMLE1BQU9PLFFBQU9DLFNBQVNWLEtBQUtjLE1BQU0sR0FJdEMsUUFBU0MsR0FBV0MsR0FDaEIsR0FDSUMsR0FEQUMsRUFBWUYsRUFBU0csS0FBSyxPQUkxQkYsR0FEb0IsSUFBcEJYLEVBQU1ZLElBQXdDRSxRQUFwQmQsRUFBTVksR0FDdEJWLElBQVcsSUFBTUYsRUFBTVksR0FFN0JBLEVBQVksR0FBSyxFQUFhVixJQUFXLElBQU1VLEVBQzFDQSxHQUFhRixFQUFTSyxPQUFPQyxXQUFzQmQsSUFBVyxJQUFNVSxFQUM5RFYsSUFBVyxLQUFPVSxFQUFZLEdBR2pEVCxPQUFPQyxTQUFTQyxLQUFPTSxFQUkz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ay9mbGlwYm9vay5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vKlx0RmxpcCBCb29rIEpTIDEuMi41XHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAvKiBCYXNpYyBTZXR0aW5ncyAqL1xyXG5cclxuICAgIC8vIGRlZmluZSBwYWdlcyAoZGVmYXVsdCBhcmUgbnVtYmVycyAxLU4pXHJcbiAgICB2YXIgcGFnZXMgPSBbXSxcclxuICAgICAgICB0b2NJbmRleCA9IDMsXHJcblxyXG5cclxuICAgICAgICAvKiB0YWJsZSBvZiBjb250ZW50IGluZGV4ICovXHJcbiAgICAgICAgem9vbVN0cmVuZ3RoID0gMixcclxuXHJcblxyXG4gICAgICAgIC8qIHpvb20gc3RyZW5ndGggKi9cclxuICAgICAgICBzbGlkZVNob3dJbnRlcnZhbCA9IDIwMDAsXHJcblxyXG5cclxuICAgICAgICAvKiBzbGlkZSBzaG93IGRlbGF5IGluIG1pbGlzZWNvbmRzICovXHJcbiAgICAgICAgc2xpZGVzaG93VGltZW91dDtcclxuXHJcbiAgICAvKiBkbyBOT1QgRURJVCBiZWxsb3cgdGhpcyBsaW5lICovXHJcblxyXG4gICAgLy8gY2hlY2sgaGFzaFxyXG4gICAgZnVuY3Rpb24gY2hlY2tIYXNoKGhhc2gpIHtcclxuICAgICAgICB2YXIgaGFzaCA9IGdldEhhc2goKSxcclxuICAgICAgICAgICAgayxcclxuICAgICAgICAgICAgaW50UmVnZXggPSAvXlxcZCskLztcclxuXHJcbiAgICAgICAgaWYgKChrID0galF1ZXJ5LmluQXJyYXkoaGFzaCwgcGFnZXMpKSAhPSAtMSkge1xyXG4gICAgICAgICAgICBrID0gayArIDE7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbnRSZWdleC50ZXN0KGhhc2gpKSB7XHJcbiAgICAgICAgICAgIGsgPSBoYXNoO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGsgPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGs7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IHVybFxyXG4gICAgZnVuY3Rpb24gZ2V0VVJMKCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpLnNoaWZ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IGhhc2ggdGFnIGZyb20gdXJsXHJcbiAgICBmdW5jdGlvbiBnZXRIYXNoKCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaC5zbGljZSgxKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXQgaGFzaCB0YWdcclxuICAgIGZ1bmN0aW9uIHNldEhhc2hUYWcoZmxpcGJvb2spIHtcclxuICAgICAgICB2YXIgY3VycmVudElEID0gZmxpcGJvb2sudHVybigncGFnZScpLFxyXG4gICAgICAgICAgICBwYWdlVVJMO1xyXG5cclxuICAgICAgICBpZiAocGFnZXNbY3VycmVudElEXSAhPSBcIlwiICYmIHBhZ2VzW2N1cnJlbnRJRF0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHBhZ2VVUkwgPSBnZXRVUkwoKSArICcjJyArIHBhZ2VzW2N1cnJlbnRJRF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJRCAlIDIgIT0gMCkgcGFnZVVSTCA9IGdldFVSTCgpICsgJyMnICsgY3VycmVudElEO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50SUQgPT0gZmxpcGJvb2suZGF0YSgpLnRvdGFsUGFnZXMpIHBhZ2VVUkwgPSBnZXRVUkwoKSArICcjJyArIGN1cnJlbnRJRDtcclxuICAgICAgICAgICAgZWxzZSBwYWdlVVJMID0gZ2V0VVJMKCkgKyAnIycgKyAoY3VycmVudElEICsgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHBhZ2VVUkw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZmlyZWQgd2hlbiBoYXNoIGNoYW5nZXMgaW5zaWRlIFVSTFxyXG4gICAgZnVuY3Rpb24gaGFzaENoYW5nZShmbGlwYm9vaywgZmJDb250KSB7XHJcbiAgICAgICAgdmFyIHBhZ2UgPSBjaGVja0hhc2goKSxcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBmbGlwYm9vay5wb3NpdGlvbigpO1xyXG5cclxuICAgICAgICBwYWdlID0gcGFyc2VJbnQocGFnZSk7XHJcblxyXG4gICAgICAgIGlmIChwYWdlIC0gMSA9PSBmbGlwYm9vay50dXJuKCdwYWdlJykpIC8vIGNoZWNrIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgb2tcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAocGFnZSA9PSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcykge1xyXG4gICAgICAgICAgICBkaXNhYmxlU2hhZG93cyhmbGlwYm9vayk7XHJcbiAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ3BhZ2UnLCBwYWdlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHBhZ2UgJSAyICE9IDApIHtcclxuICAgICAgICAgICAgZGlzYWJsZVNoYWRvd3MoZmxpcGJvb2spO1xyXG4gICAgICAgICAgICBmbGlwYm9vay50dXJuKCdwYWdlJywgcGFnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGlzYWJsZVNoYWRvd3MoZmxpcGJvb2spO1xyXG4gICAgICAgICAgICBmbGlwYm9vay50dXJuKCdwYWdlJywgcGFnZSArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBhZGQgaW5zaWRlIGJvb2sgc2hhZG93XHJcbiAgICBmdW5jdGlvbiBhZGRJbnNpZGVCb29rU2hhZG93KGZsaXBib29rKSB7XHJcblxyXG4gICAgICAgIC8vIGluc2lkZSBib29rIHNoYWRvd1xyXG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5ldmVuIGRpdi5mYi1wYWdlJykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImZiLWluc2lkZS1zaGFkb3ctbGVmdFwiPjwvZGl2PicpO1xyXG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5vZGQgZGl2LmZiLXBhZ2UnKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiZmItaW5zaWRlLXNoYWRvdy1yaWdodFwiPjwvZGl2PicpO1xyXG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5sYXN0IGRpdi5mYi1wYWdlJykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImZiLWluc2lkZS1zaGFkb3ctbGVmdFwiPjwvZGl2PicpO1xyXG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5maXJzdCBkaXYuZmItcGFnZScpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJmYi1pbnNpZGUtc2hhZG93LXJpZ2h0XCI+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIC8vIGVkZ2UgcGFnZSBzaGFkb3dcclxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZXZlbiBkaXYuZmItcGFnZScpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJmYi1wYWdlLWVkZ2Utc2hhZG93LWxlZnRcIj48L2Rpdj4nKTtcclxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYub2RkIGRpdi5mYi1wYWdlJykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImZiLXBhZ2UtZWRnZS1zaGFkb3ctcmlnaHRcIj48L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgLy9ib3R0b20gYm9vayBwYWdlICh1bmRlciBwYWdlcylcclxuICAgICAgICBmbGlwYm9vay5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmYi1zaGFkb3ctYm90dG9tLWxlZnRcIj48L2Rpdj4nKTtcclxuICAgICAgICBmbGlwYm9vay5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmYi1zaGFkb3ctYm90dG9tLXJpZ2h0XCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgZmxpcGJvb2suYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZmItc2hhZG93LXRvcC1sZWZ0XCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgZmxpcGJvb2suYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZmItc2hhZG93LXRvcC1yaWdodFwiPjwvZGl2PicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGhpZGUgc2hhZG93c1xyXG4gICAgZnVuY3Rpb24gaGlkZVNoYWRvd3MoY2FsbGVyLCBhcnJvdywgZmxpcGJvb2ssIGZiQ29udCwgcG9zTGVmdCkge1xyXG4gICAgICAgIHZhciB2aWV3ID0gZmxpcGJvb2sudHVybigndmlldycpLFxyXG4gICAgICAgICAgICBwYWdlID0gZmxpcGJvb2sudHVybigncGFnZScpLFxyXG4gICAgICAgICAgICBhY3RpdmUsXHJcbiAgICAgICAgICAgIG5leHRZLFxyXG4gICAgICAgICAgICBuZXh0WWVuZCxcclxuICAgICAgICAgICAgcHJldlksXHJcbiAgICAgICAgICAgIHByZXZZZW5kLFxyXG4gICAgICAgICAgICBwb3NMZWZ0LFxyXG4gICAgICAgICAgICBhbmltYXRlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChhbmltYXRlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChpc05hTihwb3NMZWZ0KSkge1xyXG4gICAgICAgICAgICBwb3NMZWZ0ID0gcGFyc2VJbnQoZmxpcGJvb2sucG9zaXRpb24oKS5sZWZ0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbmltYXRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjYWxsZXIgPT0gJ3N0YXJ0JyB8fCBhbmltYXRlKSBhY3RpdmUgPSBmbGlwYm9vay5hY3RpdmVQYWdlQ29ybmVyKCk7XHJcblxyXG4gICAgICAgIGlmIChjYWxsZXIgPT0gJ3N0YXJ0JyAmJiBhY3RpdmUgIT0gJ3RsJyAmJiBhY3RpdmUgIT0gJ2JsJyAmJiBhY3RpdmUgIT0gJ3RyJyAmJiBhY3RpdmUgIT0gJ2JyJyB8fCBhbmltYXRlICYmIGFjdGl2ZSAhPSAndGwnICYmIGFjdGl2ZSAhPSAnYmwnICYmIGFjdGl2ZSAhPSAndHInICYmIGFjdGl2ZSAhPSAnYnInKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZSA9IGFycm93O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctdG9wLWxlZnQnKS5zdG9wKCkuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LWJvdHRvbS1sZWZ0Jykuc3RvcCgpLmNsZWFyUXVldWUoKTtcclxuICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy10b3AtcmlnaHQnKS5zdG9wKCkuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LWJvdHRvbS1yaWdodCcpLnN0b3AoKS5jbGVhclF1ZXVlKCk7XHJcblxyXG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLnN0b3AodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0Jykuc3RvcCh0cnVlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgaWYgKGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLmhhc0NsYXNzKCdzbWFsbCcpKSB7XHJcbiAgICAgICAgICAgIG5leHRZID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgLSA0MDtcclxuICAgICAgICAgICAgcHJldlkgPSBwb3NMZWZ0IC0gNDU7XHJcbiAgICAgICAgICAgIG5leHRZZW5kID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgLSA1MDtcclxuICAgICAgICAgICAgcHJldlllbmQgPSBwb3NMZWZ0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5leHRZID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgKyAyNDtcclxuICAgICAgICAgICAgcHJldlkgPSBwb3NMZWZ0IC0gMTEwO1xyXG4gICAgICAgICAgICBuZXh0WWVuZCA9IHBvc0xlZnQgKyBmbGlwYm9vay53aWR0aCgpIC0gNTA7XHJcbiAgICAgICAgICAgIHByZXZZZW5kID0gcG9zTGVmdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYWdlID09IDIgJiYgYW5pbWF0ZSAmJiAoYWN0aXZlID09ICd0bCcgfHwgYWN0aXZlID09ICdibCcgfHwgYWN0aXZlID09ICdsZWZ0JykpIHtcclxuICAgICAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctdG9wLWxlZnQnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctYm90dG9tLWxlZnQnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gZmxpcGJvb2suZGF0YSgpLnRvdGFsUGFnZXMgLSAyICYmIGFuaW1hdGUgJiYgKGFjdGl2ZSA9PSAndHInIHx8IGFjdGl2ZSA9PSAnYnInIHx8IGFjdGl2ZSA9PSAncmlnaHQnKSkge1xyXG4gICAgICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy10b3AtcmlnaHQnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctYm90dG9tLXJpZ2h0JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYW5pbWF0ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAocGFnZSA9PSAyICYmIChhY3RpdmUgPT0gJ3RsJyB8fCBhY3RpdmUgPT0gJ2JsJyB8fCBhY3RpdmUgPT0gJ2xlZnQnKSkge1xyXG4gICAgICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy10b3AtbGVmdCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy1ib3R0b20tbGVmdCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LCAyMDApO1xyXG5cclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5wcmV2aWV3JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogcHJldlllbmRcclxuICAgICAgICAgICAgfSwgNTAwLCAnZWFzZU91dEV4cG8nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGFnZSAhPSAxKSB7XHJcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LXRvcC1sZWZ0JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LWJvdHRvbS1sZWZ0JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHByZXZZXHJcbiAgICAgICAgICAgIH0sIDUwMCwgJ2Vhc2VPdXRFeHBvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYWdlID09IGZsaXBib29rLmRhdGEoKS50b3RhbFBhZ2VzIC0gMiAmJiAoYWN0aXZlID09ICd0cicgfHwgYWN0aXZlID09ICdicicgfHwgYWN0aXZlID09ICdyaWdodCcpKSB7XHJcbiAgICAgICAgICAgIGZsaXBib29rLmNoaWxkcmVuKCdkaXYuZmItc2hhZG93LXRvcC1yaWdodCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy1ib3R0b20tcmlnaHQnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogbmV4dFllbmRcclxuICAgICAgICAgICAgfSwgNTAwLCAnZWFzZU91dEV4cG8nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGFnZSAhPSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcykge1xyXG4gICAgICAgICAgICBmbGlwYm9vay5jaGlsZHJlbignZGl2LmZiLXNoYWRvdy10b3AtcmlnaHQnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgZmxpcGJvb2suY2hpbGRyZW4oJ2Rpdi5mYi1zaGFkb3ctYm90dG9tLXJpZ2h0JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IG5leHRZXHJcbiAgICAgICAgICAgIH0sIDUwMCwgJ2Vhc2VPdXRFeHBvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVwb3NpdGlvbkFycm93cyhmbGlwYm9vaywgZmJDb250KSB7XHJcbiAgICAgICAgdmFyIHBvc0xlZnQsIG5leHRZLCBwcmV2WSwgbmV4dFllbmQsIHByZXZZZW5kLCBwYWdlO1xyXG5cclxuICAgICAgICBwYWdlID0gZmxpcGJvb2sudHVybigncGFnZScpO1xyXG4gICAgICAgIHBvc0xlZnQgPSBwYXJzZUludChmbGlwYm9vay5wb3NpdGlvbigpLmxlZnQpO1xyXG5cclxuICAgICAgICBpZiAoZmJDb250LmZpbmQoJ2Rpdi5wcmV2aWV3JykuaGFzQ2xhc3MoJ3NtYWxsJykpIHtcclxuICAgICAgICAgICAgbmV4dFkgPSBwb3NMZWZ0ICsgZmxpcGJvb2sud2lkdGgoKSAtIDQwO1xyXG4gICAgICAgICAgICBwcmV2WSA9IHBvc0xlZnQgLSA0NTtcclxuICAgICAgICAgICAgbmV4dFllbmQgPSBwb3NMZWZ0ICsgZmxpcGJvb2sud2lkdGgoKSAtIDUwO1xyXG4gICAgICAgICAgICBwcmV2WWVuZCA9IHBvc0xlZnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV4dFkgPSBwb3NMZWZ0ICsgZmxpcGJvb2sud2lkdGgoKSArIDI0O1xyXG4gICAgICAgICAgICBwcmV2WSA9IHBvc0xlZnQgLSAxMTA7XHJcbiAgICAgICAgICAgIG5leHRZZW5kID0gcG9zTGVmdCArIGZsaXBib29rLndpZHRoKCkgLSA1MDtcclxuICAgICAgICAgICAgcHJldlllbmQgPSBwb3NMZWZ0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhZ2UgPT0gMSkge1xyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBwcmV2WWVuZFxyXG4gICAgICAgICAgICB9LCAyMDAsICdlYXNlT3V0RXhwbycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHByZXZZXHJcbiAgICAgICAgICAgIH0sIDIwMCwgJ2Vhc2VPdXRFeHBvJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGFnZSA9PSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcykge1xyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBuZXh0WWVuZFxyXG4gICAgICAgICAgICB9LCAyMDAsICdlYXNlT3V0RXhwbycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IG5leHRZXHJcbiAgICAgICAgICAgIH0sIDIwMCwgJ2Vhc2VPdXRFeHBvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJvdGF0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKHdpbmRvdy5vcmllbnRhdGlvbikgPT0gOTA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzaXplRkIoZmJXaWR0aCwgZmJIZWlnaHQsIGZsaXBib29rLCBmYkNvbnQsIHpvb21lZCkge1xyXG4gICAgICAgIHZhciBzaW5nbGVXaWR0aCwgc2luZ2xlSGVpZ2h0O1xyXG5cclxuICAgICAgICBmbGlwYm9vay50dXJuKCdzaXplJywgZmJXaWR0aCwgZmJIZWlnaHQpO1xyXG5cclxuICAgICAgICBzaW5nbGVXaWR0aCA9IGZsaXBib29rLmZpbmQoJ2Rpdi50dXJuLXBhZ2Utd3JhcHBlci5maXJzdCcpLndpZHRoKCk7XHJcbiAgICAgICAgc2luZ2xlSGVpZ2h0ID0gZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyLmZpcnN0JykuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIGlmICh6b29tZWQpIHtcclxuICAgICAgICAgICAgdmFyIGxhcmdlSW1hZ2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHpvb21Db250ID0gZmJDb250LmZpbmQoJ2Rpdi56b29tZWQnKTtcclxuXHJcbiAgICAgICAgICAgIGZiWm9vbWVkQm9yZGVyID0gcGFyc2VJbnQoem9vbUNvbnQuY3NzKCdib3JkZXItbGVmdC13aWR0aCcpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmYk9mZnNldCA9IGZiQ29udC5vZmZzZXQoKTtcclxuICAgICAgICAgICAgZmJUb3BNYXJnaW4gPSBmYk9mZnNldC50b3A7XHJcblxyXG4gICAgICAgICAgICBpZiAoem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLmhhc0NsYXNzKCd6b29tLWxhcmdlJykpIGxhcmdlSW1hZ2UgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFsYXJnZUltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCdpbWcuYmctaW1nJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLXRvcCc6ICcwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICdvcGFjaXR5JzogMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCdpbWcuYmctaW1nLnpvb20tbGFyZ2UnKS5jc3MoJ29wYWNpdHknLCAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcuem9vbS1sYXJnZScpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi10b3AnOiAnMHB4JyxcclxuICAgICAgICAgICAgICAgICAgICAnb3BhY2l0eSc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnYmxvY2snXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgem9vbUNvbnQuY2hpbGRyZW4oKS5jc3MoJ21hcmdpbi10b3AnLCAwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFkZCBjbGFzc2VzIGZyb20gdGhlIHBhZ2UgcGFyZW50XHJcbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuZmluZCgnZGl2LmZiLXBhZ2UnKS5oYXNDbGFzcygnZG91YmxlJykpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Db250LmFkZENsYXNzKCdkb3VibGUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5oYXNDbGFzcygnb2RkJykpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Db250LmFkZENsYXNzKCdvZGQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gem9vbSBjb250YWluZXIgc2l6ZVxyXG4gICAgICAgICAgICB6b29tQ29udC53aWR0aChmbGlwYm9vay53aWR0aCgpICogMC41ICogem9vbVN0cmVuZ3RoKTtcclxuICAgICAgICAgICAgem9vbUNvbnQuaGVpZ2h0KGZsaXBib29rLmhlaWdodCgpIC0gZmJab29tZWRCb3JkZXIgKiAyKTtcclxuXHJcbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJyA+IGRpdiwgaW1nLmJnLWltZywgZGl2LnZpZGVvJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ3ZpZGVvJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyR0aGlzLmNzcygnaGVpZ2h0JywgJHRoaXMuaGVpZ2h0KCkgKiB6b29tU3RyZW5ndGggKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoem9vbUNvbnQuaGFzQ2xhc3MoJ2RvdWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLndpZHRoKDEwMCAqIHpvb21TdHJlbmd0aCArICclJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmhlaWdodChmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QnKS5oZWlnaHQoKSAqIHpvb21TdHJlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMud2lkdGgoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0Jykud2lkdGgoKSAqIHpvb21TdHJlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmhlaWdodChmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QnKS5oZWlnaHQoKSAqIHpvb21TdHJlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJy5lbmxhcmdlJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgZW5sYXJnZUhlaWdodCA9ICR0aGlzLmhlaWdodCgpICogem9vbVN0cmVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICR0aGlzLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IE1hdGgucm91bmQocGFyc2VJbnQoJHRoaXMuY3NzKCdmb250LXNpemUnKSkgKiB6b29tU3RyZW5ndGgpICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6IE1hdGgucm91bmQocGFyc2VJbnQoJHRoaXMuY3NzKCdsaW5lLWhlaWdodCcpKSAqIHpvb21TdHJlbmd0aCkgKyBcInB4XCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCBpbWcuYmctaW1nXHJcbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS53aWR0aChmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QnKS53aWR0aCgpICogem9vbVN0cmVuZ3RoKTtcclxuICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLmhlaWdodChmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QnKS5oZWlnaHQoKSAqIHpvb21TdHJlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC5kb3VibGUgaW1nLmJnLWltZycpLndpZHRoKGZsaXBib29rLmZpbmQoJ2Rpdi5maXJzdCcpLndpZHRoKCkgKiAyICogem9vbVN0cmVuZ3RoKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQuZG91YmxlLm9kZCBpbWcuYmctaW1nJykuY3NzKCdtYXJnaW4tbGVmdCcsICcwcHgnKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQuZG91YmxlIGltZy5iZy1pbWcnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiAnMHB4JyxcclxuICAgICAgICAgICAgICAgICdyaWdodCc6ICcwcHgnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgem9vbUNvbnQuY3NzKCdsZWZ0JywgKGZiQ29udC53aWR0aCgpIC0gem9vbUNvbnQub3V0ZXJXaWR0aCgpKSAvIDIpO1xyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3cnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBwYXJzZUludCh6b29tQ29udC5jc3MoJ2xlZnQnKSkgKyBmYlpvb21lZEJvcmRlcixcclxuICAgICAgICAgICAgICAgICd0b3AnOiBwYXJzZUludCh6b29tQ29udC5jc3MoJ3RvcCcpKSArIGZiWm9vbWVkQm9yZGVyLFxyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogem9vbUNvbnQuY3NzKCd3aWR0aCcpLFxyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IHpvb21Db250LmNzcygnaGVpZ2h0JylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBwYXJzZUludCh6b29tQ29udC5jc3MoJ2xlZnQnKSkgKyBmYlpvb21lZEJvcmRlcixcclxuICAgICAgICAgICAgICAgICd3aWR0aCc6IHpvb21Db250LmNzcygnd2lkdGgnKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93LWJvdHRvbScpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHBhcnNlSW50KHpvb21Db250LmNzcygnbGVmdCcpKSArIGZiWm9vbWVkQm9yZGVyLFxyXG4gICAgICAgICAgICAgICAgJ3RvcCc6IHpvb21Db250LmhlaWdodCgpIC0gNDAgKyBmYlpvb21lZEJvcmRlciAqIDIsXHJcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiB6b29tQ29udC5jc3MoJ3dpZHRoJylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYucGFnZS1jb250ZW50JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgJHRoaXMud2lkdGgoc2luZ2xlV2lkdGggLSBwYXJzZUludCgkdGhpcy5jc3MoJ21hcmdpbi10b3AnKSkpO1xyXG4gICAgICAgICAgICAkdGhpcy5oZWlnaHQoc2luZ2xlSGVpZ2h0IC0gcGFyc2VJbnQoJHRoaXMuY3NzKCdtYXJnaW4tdG9wJykpICogMik7XHJcbiAgICAgICAgICAgICR0aGlzLmZpbmQoJ2ltZy5iZy1pbWcnKS5oZWlnaHQoJHRoaXMuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnb2JqZWN0LCBpZnJhbWUnKS5sZW5ndGgpICR0aGlzLmZpbmQoJy5wcmV2aWV3LWNvbnRlbnQnKS5oZWlnaHQoJzEwMCUnKTtcclxuICAgICAgICAgICAgaWYgKCR0aGlzLnBhcmVudCgpLmhhc0NsYXNzKCdkb3VibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnaW1nLmJnLWltZycpLndpZHRoKCR0aGlzLndpZHRoKCkgKiAyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuaGFzQ2xhc3MoJ29kZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0TWFyZ2luID0gcGFyc2VJbnQoJHRoaXMuY3NzKCdtYXJnaW4tcmlnaHQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnaW1nLmJnLWltZycpLmNzcygnbWFyZ2luLWxlZnQnLCAtJHRoaXMud2lkdGgoKSArIFwicHhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnZGl2LmNvbnRhaW5lciBpbWcuYmctaW1nJykuY3NzKCdtYXJnaW4tbGVmdCcsIFwiMHB4XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnaW1nLmJnLWltZycpLndpZHRoKCR0aGlzLndpZHRoKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICR0aGlzLnBhcmVudCgpLmZpbmQoJ2Rpdi5mYi1pbnNpZGUtc2hhZG93LWxlZnQnKS5oZWlnaHQoJHRoaXMuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICAkdGhpcy5wYXJlbnQoKS5maW5kKCdkaXYuZmItaW5zaWRlLXNoYWRvdy1yaWdodCcpLmhlaWdodCgkdGhpcy5oZWlnaHQoKSk7XHJcbiAgICAgICAgICAgICR0aGlzLnBhcmVudCgpLmZpbmQoJ2Rpdi5mYi1wYWdlLWVkZ2Utc2hhZG93LWxlZnQnKS5oZWlnaHQoJHRoaXMuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICAkdGhpcy5wYXJlbnQoKS5maW5kKCdkaXYuZmItcGFnZS1lZGdlLXNoYWRvdy1yaWdodCcpLmhlaWdodCgkdGhpcy5oZWlnaHQoKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1zaGFkb3ctYm90dG9tLWxlZnQnKS53aWR0aChmYldpZHRoIC8gMik7XHJcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZiLXNoYWRvdy1ib3R0b20tcmlnaHQnKS53aWR0aChmYldpZHRoIC8gMik7XHJcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZiLXNoYWRvdy10b3AtbGVmdCcpLndpZHRoKGZiV2lkdGggLyAyKTtcclxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZmItc2hhZG93LXRvcC1yaWdodCcpLndpZHRoKGZiV2lkdGggLyAyKTtcclxuICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcsIGRpdi5uZXh0JykuY3NzKCd0b3AnLCAoZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyLmZpcnN0JykuaGVpZ2h0KCkgLSA4NikgLyAyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjZW50ZXJCb29rKHBhZ2UsIGZsaXBib29rLCBmYkNvbnQsIGFjdGl2ZUFycm93KSB7XHJcbiAgICAgICAgdmFyIHJlbmRlcmVkID0gZmxpcGJvb2suZGF0YSgpLmRvbmUsXHJcbiAgICAgICAgICAgIHdpZHRoID0gZmxpcGJvb2sud2lkdGgoKSxcclxuICAgICAgICAgICAgcGFnZVdpZHRoID0gd2lkdGggLyAyLFxyXG4gICAgICAgICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246ICFyZW5kZXJlZCA/IDAgOiA2MDAsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0RXhwbycsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sudHVybigncmVzaXplJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGZsaXBib29rLnN0b3AodHJ1ZSk7XHJcblxyXG4gICAgICAgIGlmIChwYWdlID09IDEgfHwgcGFnZSA9PSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcykge1xyXG4gICAgICAgICAgICB2YXIgbGVmdDtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlID09IDEpIGxlZnQgPSBNYXRoLmZsb29yKChmYkNvbnQud2lkdGgoKSAtIHBhZ2VXaWR0aCkgKiAwLjUpIC0gcGFnZVdpZHRoO1xyXG4gICAgICAgICAgICBlbHNlIGxlZnQgPSBNYXRoLmZsb29yKChmYkNvbnQud2lkdGgoKSAtIHBhZ2VXaWR0aCkgKiAwLjUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcnNlSW50KGZsaXBib29rLmNzcygnbGVmdCcpKSAhPSBsZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0XHJcbiAgICAgICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICBoaWRlU2hhZG93cygnY2VudGVyJywgYWN0aXZlQXJyb3csIGZsaXBib29rLCBmYkNvbnQsIE1hdGguZmxvb3IoKGZiQ29udC53aWR0aCgpIC0gcGFnZVdpZHRoKSAqIDAuNSkgLSBwYWdlV2lkdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZmxpcGJvb2suYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBNYXRoLmZsb29yKChmYkNvbnQud2lkdGgoKSAtIHdpZHRoKSAqIDAuNSlcclxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICBoaWRlU2hhZG93cygnY2VudGVyJywgYWN0aXZlQXJyb3csIGZsaXBib29rLCBmYkNvbnQsIE1hdGguZmxvb3IoKGZiQ29udC53aWR0aCgpIC0gd2lkdGgpICogMC41KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZiRmlyc3RSdW4oZmxpcGJvb2ssIGZiQ29udCkge1xyXG4gICAgICAgIC8vIHJlc2l6ZSB0aGUgYm9va1xyXG4gICAgICAgIGpRdWVyeSh3aW5kb3cpLnRyaWdnZXIoJ3Jlc2l6ZScpO1xyXG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLnN0b3AoKS5jbGVhclF1ZXVlKCk7XHJcbiAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5wcmV2aWV3Jykuc3RvcCgpLmNsZWFyUXVldWUoKTtcclxuICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcnKS5jc3MoJ2xlZnQnLCAwKTtcclxuICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQnKS5jc3MoJ2xlZnQnLCBqUXVlcnkod2luZG93KS53aWR0aCgpICogMC41KTtcclxuICAgICAgICAvLyBhZGp1c3Qgc2hhZG93c1xyXG4gICAgICAgIGhpZGVTaGFkb3dzKCd0dXJuZWQnLCAnZmFsc2UnLCBmbGlwYm9vaywgZmJDb250LCAnZmlyc3QgcnVuJyk7XHJcblxyXG4gICAgICAgIC8vIHNob3cgYm90dG9tIHVpXHJcbiAgICAgICAgaWYgKGpRdWVyeSgnZGl2LmZiLW5hdicpLmhhc0NsYXNzKCdzbWFsbCcpKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnZGl2LmZiLW5hdicpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgICAgIHRvcDogLTIwIC0gcGFyc2VJbnQoZmxpcGJvb2suY3NzKCdtYXJnaW4tYm90dG9tJykucmVwbGFjZShcInB4XCIsIFwiXCIpKSAtIHBhcnNlSW50KGpRdWVyeSgnZGl2LmZiLW5hdicpLmNzcygnbWFyZ2luLXRvcCcpLnJlcGxhY2UoXCJweFwiLCBcIlwiKSlcclxuICAgICAgICAgICAgfSwgMTAwMCwgJ2Vhc2VPdXRFeHBvJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgalF1ZXJ5KCdkaXYuZmItbmF2JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgdG9wOiAnMCdcclxuICAgICAgICAgICAgfSwgMTAwMCwgJ2Vhc2VPdXRFeHBvJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZW1vdmUgcHJlbG9hZGVyXHJcbiAgICAgICAgZmxpcGJvb2sucGFyZW50KCkuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ25vbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmYk91dChmbGlwYm9vaywgYWN0aXZlQ29ybmVyKSB7XHJcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJ2RpdjpmaXJzdC1jaGlsZCcpLndpZHRoKGZsaXBib29rLndpZHRoKCkgKiAwLjUgKyAncHgnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignZGl2OmZpcnN0LWNoaWxkJykuaGVpZ2h0KGZsaXBib29rLmhlaWdodCgpICsgJ3B4Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzYWJsZVNoYWRvd3MoZmxpcGJvb2spIHtcclxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZmItc2hhZG93LWJvdHRvbS1sZWZ0JykuY3NzKCdvcGFjaXR5JywgMCk7XHJcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZiLXNoYWRvdy10b3AtbGVmdCcpLmNzcygnb3BhY2l0eScsIDApO1xyXG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1zaGFkb3ctYm90dG9tLXJpZ2h0JykuY3NzKCdvcGFjaXR5JywgMCk7XHJcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZiLXNoYWRvdy10b3AtcmlnaHQnKS5jc3MoJ29wYWNpdHknLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgkKSB7XHJcbiAgICAgICAgdmFyIGZsaXBib29rID0gJCgnLmZsaXBib29rJyksXHJcbiAgICAgICAgICAgIGZiQ29udCA9ICQoJ2Rpdi5mbGlwYm9vay1jb250YWluZXInKSxcclxuICAgICAgICAgICAgZmJOYXYgPSBmYkNvbnQuZmluZCgnZGl2LmZiLW5hdicpLFxyXG4gICAgICAgICAgICBzbGlkZXNob3cgPSBmYWxzZSxcclxuICAgICAgICAgICAgem9vbWVkID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGFjdGl2ZUFycm93ID0gJ2ZhbHNlJyxcclxuICAgICAgICAgICAgcGFnZUlEID0gMCxcclxuICAgICAgICAgICAgbGFzdElELFxyXG4gICAgICAgICAgICBmaXJzdFdpZHRoLFxyXG4gICAgICAgICAgICBmaXJzdEhlaWdodCxcclxuICAgICAgICAgICAgYWN0aXZlQ29ybmVyID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGZiT3ZlciA9IGZhbHNlLFxyXG4gICAgICAgICAgICBwYWdlVHVybmluZyA9IGZhbHNlLFxyXG4gICAgICAgICAgICBpZSA9IGZhbHNlLFxyXG4gICAgICAgICAgICB0b3VjaCA9ICdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcclxuICAgICAgICAgICAgaGFzaCxcclxuICAgICAgICAgICAgJHN3YXA7XHJcblxyXG4gICAgICAgIGlmIChuYXZpZ2F0b3IuYXBwTmFtZSA9PSBcIk1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlclwiKSBpZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGZsaXBib29rLmJpbmQoJ3R1cm5pbmcnLCBmdW5jdGlvbiAoZSwgcGFnZSkge1xyXG4gICAgICAgICAgICBwYWdlVHVybmluZyA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZsaXBib29rLmJpbmQoJ3R1cm5lZCcsIGZ1bmN0aW9uIChlLCBwYWdlKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVuZGVyZWQgPSAkdGhpcy5kYXRhKCkuZG9uZTtcclxuXHJcbiAgICAgICAgICAgIGNlbnRlckJvb2socGFnZSwgZmxpcGJvb2ssIGZiQ29udCwgYWN0aXZlQXJyb3cpO1xyXG5cclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5wcmV2aWV3LCBkaXYubmV4dCcpLmNzcygndG9wJywgKGZsaXBib29rLmZpbmQoJ2Rpdi50dXJuLXBhZ2Utd3JhcHBlci5maXJzdCcpLmhlaWdodCgpIC0gODYpIC8gMik7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2xpZGVzaG93KSB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNob3dUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHVybignbmV4dCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmxpcGJvb2sudHVybigncGFnZScpICsgMiA+PSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0dXJuIG9mZiBzbGlkZSBzaG93IG9uIGxhc3Qgc2xpZGVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS5zbGlkZXNob3cgc3Bhbi5idXR0b24taWNvbi1vdmVyJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpLnNsaWRlc2hvdyBzcGFuLmJ1dHRvbi1pY29uJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpLnNsaWRlc2hvdycpLnRyaWdnZXIoJ21vdXNlb3V0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCwgZGl2LnByZXZpZXcnKS5mYWRlSW4oNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVTaGFkb3dzKCdzdGFydCcsICdyaWdodCcsIGZsaXBib29rLCBmYkNvbnQsICdlbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBzbGlkZXNob3dEZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGhpZGVTaGFkb3dzKCd0dXJuZWQnLCAnZmFsc2UnLCBmbGlwYm9vaywgZmJDb250LCAnZW5kJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVwb3NpdGlvbkFycm93cyhmbGlwYm9vaywgZmJDb250KTtcclxuICAgICAgICAgICAgfSwgMzUwKTtcclxuICAgICAgICAgICAgcGFnZVR1cm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogRHVwbGljYXRlIERvdWJsZSBQYWdlcyAqL1xyXG4gICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1wYWdlJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2RvdWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSAkdGhpcy5jbG9uZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGNsb25lLmluc2VydEFmdGVyKCR0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBJbml0aWFsaXplIEZsaXAgQm9vayAqL1xyXG4gICAgICAgIGhhc2ggPSBjaGVja0hhc2goKTtcclxuICAgICAgICBpZiAoaGFzaCAhPSAxICYmIHBhZ2VzLmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgICAgZmxpcGJvb2sudHVybih7XHJcbiAgICAgICAgICAgICAgICBwYWdlOiBoYXNoICsgMSwgLy8gZGVmaW5lIHN0YXJ0IHBhZ2UsXHJcbiAgICAgICAgICAgICAgICBhY2NlbGVyYXRpb246IHRydWUsIC8vIGVuYWJsZSBoYXJkd2FyZSBhY2NlbGVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICBzaGFkb3dzOiAhJC5pc1RvdWNoLCAvLyBlbmFibGUvZGlzYWJsZSBzaGFkb3dzLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgLy8gcGFnZSBmbGlwIGR1cmF0aW9uLlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmxpcGJvb2sudHVybih7XHJcbiAgICAgICAgICAgICAgICBwYWdlOiBoYXNoLCAvLyBkZWZpbmUgc3RhcnQgcGFnZSxcclxuICAgICAgICAgICAgICAgIGFjY2VsZXJhdGlvbjogdHJ1ZSwgLy8gZW5hYmxlIGhhcmR3YXJlIGFjY2VsZXJhdGlvbixcclxuICAgICAgICAgICAgICAgIHNoYWRvd3M6ICEkLmlzVG91Y2gsIC8vIGVuYWJsZS9kaXNhYmxlIHNoYWRvd3MsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogQWRkIENsYXNzIGZvciBFdmVuIGFuZCBPZGQgUGFnZXMgKi9cclxuICAgICAgICAvLyBwYWdlIGZsaXAgZHVyYXRpb24uXHJcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBwYWdlSUQgPSAkKHRoaXMpLmF0dHIoJ3BhZ2UnKSxcclxuICAgICAgICAgICAgICAgIGxhc3RJRCA9IGZsaXBib29rLmRhdGEoKS50b3RhbFBhZ2VzLFxyXG4gICAgICAgICAgICAgICAgY2xvbmU7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFnZUlEID09IDEpIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdmaXJzdCcpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnZGl2LnBhZ2UtY29udGVudCcpLmFkZENsYXNzKCdmaXJzdCcpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2VJRCA9PSBsYXN0SUQpIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdsYXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdkaXYucGFnZS1jb250ZW50JykuYWRkQ2xhc3MoJ2xhc3QnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYWdlSUQgJSAyID09IDApIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdldmVuJyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdkaXYucGFnZS1jb250ZW50JykuYWRkQ2xhc3MoJ2V2ZW4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdvZGQnKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2Rpdi5wYWdlLWNvbnRlbnQnKS5hZGRDbGFzcygnb2RkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlSUQgJSAyICE9IDAgJiYgcGFnZUlEICE9IDEgJiYgcGFnZUlEICE9IGxhc3RJRCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJpZ2h0TWFyZ2luID0gcGFyc2VJbnQoJHRoaXMuZmluZCgnZGl2LmRvdWJsZSBkaXYucGFnZS1jb250ZW50JykuY3NzKCdtYXJnaW4tcmlnaHQnKSk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdkaXYuZG91YmxlIGRpdi5wYWdlLWNvbnRlbnQgaW1nLmJnLWltZycpLmNzcygnbWFyZ2luLWxlZnQnLCAtJHRoaXMud2lkdGgoKSArIHJpZ2h0TWFyZ2luICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2Rpdi5jb250YWluZXIgaW1nLmJnLWltZycpLmNzcygnbWFyZ2luLWxlZnQnLCBcIjBweFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBJZiBkb3VibGUgcGFnZSBzZXQgcHJvcGVybHkgdGhlIG9kZCBwYWdlIGNvbnRhaW5lciAqL1xyXG4gICAgICAgIGZsaXBib29rLmZpbmQoJyA+IGRpdjpsYXN0LWNoaWxkID4gZGl2JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBwYWdlSUQrKztcclxuICAgICAgICAgICAgbGFzdElEID0gZmxpcGJvb2suZGF0YSgpLnRvdGFsUGFnZXM7XHJcblxyXG4gICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygncGFnZS10cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgICAgICR0aGlzLmF0dHIoJ3BhZ2UnLCBwYWdlSUQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VJRCA9PSAxKSAkdGhpcy5hZGRDbGFzcygnZmlyc3QnKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAocGFnZUlEID09IGxhc3RJRCkgJHRoaXMuYWRkQ2xhc3MoJ2xhc3QnKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAocGFnZUlEICUgMiA9PSAwKSAkdGhpcy5hZGRDbGFzcygnZXZlbicpO1xyXG4gICAgICAgICAgICBlbHNlICR0aGlzLmFkZENsYXNzKCdvZGQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHRwd1dpZHRoID0gZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyID4gZGl2Jykud2lkdGgoKSxcclxuICAgICAgICAgICAgdHB3SGVpZ2h0ID0gZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyID4gZGl2JykuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgICAgIC8qIFpvb21cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyJykuYWRkU3dpcGVFdmVudHMoKS5iaW5kKCdkb3VibGV0YXAnLCBmdW5jdGlvbiAoZSwgdG91Y2gpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdkYmxjbGljaycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYudHVybi1wYWdlLXdyYXBwZXInKS5kYmxjbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgem9vbUZhY3RvciA9IHpvb21TdHJlbmd0aCxcclxuICAgICAgICAgICAgICAgIHpvb21Db250LFxyXG4gICAgICAgICAgICAgICAgZmJUb3BNYXJnaW4sXHJcbiAgICAgICAgICAgICAgICBmYlpvb21lZEJvcmRlcixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgbGFyZ2VJbWFnZSA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgJHBhZ2UgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNsaWRlc2hvdykge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzaG93ID0gIXNsaWRlc2hvdztcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzbGlkZXNob3dUaW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS5zbGlkZXNob3cnKS5jaGlsZHJlbignc3Bhbi5idXR0b24taWNvbi1vdmVyJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpLnNsaWRlc2hvdycpLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbi1pY29uJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpLnNsaWRlc2hvdycpLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbi1vdmVyJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpLnNsaWRlc2hvdycpLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZsaXBib29rLnBhcmVudCgpLnByZXBlbmQoJCh0aGlzKS5maW5kKCdkaXYucGFnZS1jb250ZW50JykuY2xvbmUodHJ1ZSkuYWRkQ2xhc3MoJ3pvb21lZCcpKS5jc3MoJ29wYWNpdHknLCAwKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgICAgIGZsaXBib29rLnBhcmVudCgpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJ6b29tZWQtc2hhZG93XCI+PC9kaXY+JykuY3NzKCdvcGFjaXR5JywgMCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcblxyXG4gICAgICAgICAgICBmbGlwYm9vay5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSwgNTAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyICRwcmV2ID0gZmJDb250LmNoaWxkcmVuKCcuYmlnLXNpZGUuc2hvdy1wcmV2aW91cycpO1xyXG4gICAgICAgICAgICB2YXIgJG5leHQgPSBmYkNvbnQuY2hpbGRyZW4oJy5iaWctc2lkZS5zaG93LW5leHQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghJG5leHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAkcHJldiA9IGpRdWVyeSgnPHNwYW4gY2xhc3M9XCJiaWctc2lkZSBzaG93LXByZXZpb3VzXCI+PHNwYW4gY2xhc3M9XCJhcnJvd1wiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxlZnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjZW50ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJyaWdodFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxlZnQgaG92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjZW50ZXIgaG92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJyaWdodCBob3ZlclwiPjwvc3Bhbj48L3NwYW4+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmJDb250LmFwcGVuZCgkcHJldik7XHJcblxyXG4gICAgICAgICAgICAgICAgJG5leHQgPSBqUXVlcnkoJzxzcGFuIGNsYXNzPVwiYmlnLXNpZGUgc2hvdy1uZXh0XCI+PHNwYW4gY2xhc3M9XCJhcnJvd1wiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxlZnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjZW50ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJyaWdodFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxlZnQgaG92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjZW50ZXIgaG92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJyaWdodCBob3ZlclwiPjwvc3Bhbj48L3NwYW4+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmJDb250LmFwcGVuZCgkbmV4dCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkcHJldi5vZmYoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAkbmV4dC5vZmYoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRwcmV2LmhlaWdodChmbGlwYm9vay5oZWlnaHQoKSk7XHJcbiAgICAgICAgICAgICRuZXh0LmhlaWdodChmbGlwYm9vay5oZWlnaHQoKSk7XHJcbiAgICAgICAgICAgICRwcmV2LnN0b3AodHJ1ZSkuZmFkZUluKDEwMCk7XHJcbiAgICAgICAgICAgICRuZXh0LnN0b3AodHJ1ZSkuZmFkZUluKDEwMCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJHBhZ2UuaXMoJy5maXJzdCwgLmxhc3QnKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRwYWdlLmhhc0NsYXNzKCdmaXJzdCcpKSAkcHJldi5zdG9wKHRydWUsIHRydWUpLmZhZGVPdXQoMTAwKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgJG5leHQuc3RvcCh0cnVlLCB0cnVlKS5mYWRlT3V0KDEwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRwcmV2Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkbmV4dC5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRwcmV2Lm9uZSgnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc3dhcCA9ICRwYWdlLnByZXYoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZWluaXRab29tKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCRzd2FwLmNzcygnei1pbmRleCcpICE9ICRwYWdlLmNzcygnei1pbmRleCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sudHVybigncHJldmlvdXMnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sub2ZmKCd0dXJuZWQnLCBmbGlwUGFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sub24oJ3R1cm5lZCcsIGZsaXBQYWdlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSAkc3dhcC5kYmxjbGljaygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJG5leHQub25lKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzd2FwID0gJHBhZ2UubmV4dCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJlaW5pdFpvb20oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHN3YXAuY3NzKCd6LWluZGV4JykgIT0gJHBhZ2UuY3NzKCd6LWluZGV4JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay50dXJuKCduZXh0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZsaXBib29rLm9mZigndHVybmVkJywgZmxpcFBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsaXBib29rLm9uKCd0dXJuZWQnLCBmbGlwUGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgJHN3YXAuZGJsY2xpY2soKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBmbGlwUGFnZShlLCBwYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5vZmYoJ3R1cm5lZCcsIGZsaXBQYWdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc3dhcC5kYmxjbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmbGlwYm9vay5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSwgNTAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQ6bm90KC56b29tKSwgZGl2LnByZXZpZXc6bm90KC56b29tKScpLnN0b3AodHJ1ZSkuZmFkZU91dCg1MDApO1xyXG5cclxuICAgICAgICAgICAgem9vbUNvbnQgPSBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZCcpO1xyXG5cclxuICAgICAgICAgICAgZmxpcGJvb2sucGFyZW50KCkucHJlcGVuZCgnPGRpdiBjbGFzcz1cInpvb21lZC1zaGFkb3ctdG9wXCI+PC9kaXY+PGRpdiBjbGFzcz1cInpvb21lZC1zaGFkb3ctYm90dG9tXCI+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgICAgICBmYlpvb21lZEJvcmRlciA9IHBhcnNlSW50KHpvb21Db250LmNzcygnYm9yZGVyLWxlZnQtd2lkdGgnKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmJPZmZzZXQgPSBmYkNvbnQub2Zmc2V0KCk7XHJcbiAgICAgICAgICAgIGZiVG9wTWFyZ2luID0gZmJPZmZzZXQudG9wO1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0IHRoZSBzY3JvbGwgYXQgdGhlIGJlZ2lubmluZyBvZiB6b29tIHNvIHRoZXJlIGlzIG5vIGp1bXAgd2hlbiB5b3UgbW92ZSB5b3VyIG1vdXNlXHJcblxyXG4gICAgICAgICAgICBpZiAoZS5wYWdlWSA9PSB1bmRlZmluZWQpIGUucGFnZVkgPSBmYlRvcE1hcmdpbjtcclxuXHJcbiAgICAgICAgICAgIHpvb21Db250LmNoaWxkcmVuKCkuY3NzKCdtYXJnaW4tdG9wJywgZmJUb3BNYXJnaW4gLSBlLnBhZ2VZKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh6b29tQ29udC5maW5kKCdpbWcuYmctaW1nJykuaGFzQ2xhc3MoJ3pvb20tbGFyZ2UnKSkgbGFyZ2VJbWFnZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWxhcmdlSW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdtYXJnaW4tdG9wJzogJzBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAxXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcuem9vbS1sYXJnZScpLmNzcygnb3BhY2l0eScsIDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZy56b29tLWxhcmdlJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLXRvcCc6ICcwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICdvcGFjaXR5JzogMSxcclxuICAgICAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgY2xhc3NlcyBmcm9tIHRoZSBwYWdlIHBhcmVudFxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdkaXYuZmItcGFnZScpLmhhc0NsYXNzKCdkb3VibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgem9vbUNvbnQuYWRkQ2xhc3MoJ2RvdWJsZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnb2RkJykpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Db250LmFkZENsYXNzKCdvZGQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gem9vbSBjb250YWluZXIgc2l6ZVxyXG4gICAgICAgICAgICB6b29tQ29udC53aWR0aChmbGlwYm9vay53aWR0aCgpICogMC41ICogem9vbUZhY3Rvcik7XHJcbiAgICAgICAgICAgIHpvb21Db250LmhlaWdodChmbGlwYm9vay5oZWlnaHQoKSAtIGZiWm9vbWVkQm9yZGVyICogMik7XHJcblxyXG4gICAgICAgICAgICB6b29tQ29udC5maW5kKCcgPiBkaXYsIGltZy5iZy1pbWcsIGRpdi52aWRlbycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygndmlkZW8nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICR0aGlzLmNzcygnaGVpZ2h0JywgJHRoaXMuaGVpZ2h0KCkgKiB6b29tRmFjdG9yICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHpvb21Db250Lmhhc0NsYXNzKCdkb3VibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy53aWR0aCgxMDAgKiB6b29tRmFjdG9yICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuaGVpZ2h0KGZsaXBib29rLmZpbmQoJ2Rpdi5maXJzdCcpLmhlaWdodCgpICogem9vbUZhY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMud2lkdGgoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0Jykud2lkdGgoKSAqIHpvb21GYWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5oZWlnaHQoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0JykuaGVpZ2h0KCkgKiB6b29tRmFjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnLmVubGFyZ2UnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgZW5sYXJnZUhlaWdodCA9ICR0aGlzLmhlaWdodCgpICogem9vbUZhY3RvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdmb250LXNpemUnOiBNYXRoLnJvdW5kKHBhcnNlSW50KCR0aGlzLmNzcygnZm9udC1zaXplJykpICogem9vbUZhY3RvcikgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xpbmUtaGVpZ2h0JzogTWF0aC5yb3VuZChwYXJzZUludCgkdGhpcy5jc3MoJ2xpbmUtaGVpZ2h0JykpICogem9vbUZhY3RvcikgKyBcInB4XCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCBpbWcuYmctaW1nXHJcbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS53aWR0aChmbGlwYm9vay5maW5kKCdkaXYuZmlyc3QnKS53aWR0aCgpICogem9vbUZhY3Rvcik7XHJcbiAgICAgICAgICAgIHpvb21Db250LmZpbmQoJ2ltZy5iZy1pbWcnKS5oZWlnaHQoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0JykuaGVpZ2h0KCkgKiB6b29tRmFjdG9yKTtcclxuXHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLmRvdWJsZSBpbWcuYmctaW1nJykud2lkdGgoZmxpcGJvb2suZmluZCgnZGl2LmZpcnN0Jykud2lkdGgoKSAqIDIgKiB6b29tRmFjdG9yKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQuZG91YmxlLm9kZCBpbWcuYmctaW1nJykuY3NzKCdtYXJnaW4tbGVmdCcsICcwcHgnKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQuZG91YmxlIGltZy5iZy1pbWcnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiAnMHB4JyxcclxuICAgICAgICAgICAgICAgICdyaWdodCc6ICcwcHgnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgem9vbWVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHpvb21Db250LmNzcygnbGVmdCcsIChmYkNvbnQud2lkdGgoKSAtIHpvb21Db250Lm91dGVyV2lkdGgoKSkgLyAyKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93JykuY3NzKCdsZWZ0JywgcGFyc2VJbnQoem9vbUNvbnQuY3NzKCdsZWZ0JykpICsgZmJab29tZWRCb3JkZXIpO1xyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3cnKS5jc3MoJ3RvcCcsIHBhcnNlSW50KHpvb21Db250LmNzcygndG9wJykpICsgZmJab29tZWRCb3JkZXIpO1xyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3cnKS5jc3MoJ3dpZHRoJywgem9vbUNvbnQuY3NzKCd3aWR0aCcpKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93JykuY3NzKCdoZWlnaHQnLCB6b29tQ29udC5jc3MoJ2hlaWdodCcpKTtcclxuXHJcbiAgICAgICAgICAgIGZiTmF2LmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgJ29wYWNpdHknOiAwXHJcbiAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZmJOYXYuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpZSkge1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGggPSB6b29tQ29udC5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgbCA9IHBhcnNlSW50KHpvb21Db250LmNzcygnbGVmdCcpKTtcclxuXHJcbiAgICAgICAgICAgICRwcmV2LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IGwgLSA0MFxyXG4gICAgICAgICAgICB9KS5oZWlnaHQoaCkuY2hpbGRyZW4oJy5jZW50ZXIsIC5jZW50ZXIuaG92ZXInKS5oZWlnaHQoaCAtIDI0KTtcclxuXHJcbiAgICAgICAgICAgICRuZXh0LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAncmlnaHQnOiBsIC0gNDBcclxuICAgICAgICAgICAgfSkuaGVpZ2h0KGgpLmNoaWxkcmVuKCcuY2VudGVyLCAuY2VudGVyLmhvdmVyJykuaGVpZ2h0KGggLSAyNCk7XHJcblxyXG4gICAgICAgICAgICAvLyBjbG9zZSB6b29tIHRvdWNoXHJcbiAgICAgICAgICAgIGlmICh0b3VjaCkge1xyXG4gICAgICAgICAgICAgICAgem9vbUNvbnQuYWRkU3dpcGVFdmVudHMoKS5iaW5kKCdkb3VibGV0YXAnLCBmdW5jdGlvbiAoZXZ0LCB0b3VjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlWm9vbSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGNsb3NlIHpvb21cclxuICAgICAgICAgICAgem9vbUNvbnQuZGJsY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2xvc2Vab29tKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2xvc2Vab29tKCkge1xyXG4gICAgICAgICAgICAgICAgZmxpcGJvb2suY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcclxuICAgICAgICAgICAgICAgICAgICAncG9pbnRlci1ldmVudHMnOiAnYWxsJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5zdG9wKHRydWUpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVTaGFkb3dzKCd0dXJuZWQnLCAnZmFsc2UnLCBmbGlwYm9vaywgZmJDb250LCAnem9vbScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgem9vbUNvbnQuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSwgMzAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB6b29tZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS56b29tJykudHJpZ2dlcignbW91c2VvdXQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZiTmF2LmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBmYk5hdi5zdG9wKHRydWUpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICdvcGFjaXR5JzogMVxyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQsIGRpdi5wcmV2aWV3Jykuc3RvcCh0cnVlKS5mYWRlSW4oNTAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctdG9wJykuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93LWJvdHRvbScpLmNsZWFyUXVldWUoKTtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdycpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy1ib3R0b20nKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9LCAxMDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctdG9wJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSwgMTAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uYmlnLXNpZGUuc2hvdy1wcmV2aW91cycpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLmJpZy1zaWRlLnNob3ctbmV4dCcpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVpbml0Wm9vbSgpIHtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5jbGVhclF1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctYm90dG9tJykuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSwgMzAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93LWJvdHRvbScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9LCAxMDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnBhZ2UtY29udGVudC56b29tZWQnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9LCAxMDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5iaWctc2lkZS5zaG93LXByZXZpb3VzJykuZmFkZU91dCgyMDApO1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uYmlnLXNpZGUuc2hvdy1uZXh0JykuZmFkZU91dCgyMDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBtb3VzZSBtb3ZlLCBzY3JvbGwgem9vbWVkIGltYWdlXHJcbiAgICAgICAgICAgIGlmICh0b3VjaCkge1xyXG4gICAgICAgICAgICAgICAgem9vbUNvbnQub24oJ3RvdWNobW92ZScsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGV2dC5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZiVG9wTWFyZ2luIC0gdFswXS5wYWdlWSA+IC16b29tQ29udC5jaGlsZHJlbigpLmhlaWdodCgpICsgem9vbUNvbnQuaGVpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnID4gZGl2JykuY3NzKCdtYXJnaW4tdG9wJywgZmJUb3BNYXJnaW4gLSB0WzBdLnBhZ2VZKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLmNzcygnbWFyZ2luLXRvcCcsIGZiVG9wTWFyZ2luIC0gdFswXS5wYWdlWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnaW1nLmJnLWltZycpLmNzcygnbWFyZ2luLXRvcCcsIC16b29tQ29udC5jaGlsZHJlbigpLmhlaWdodCgpICsgem9vbUNvbnQuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCcgPiBkaXYnKS5jc3MoJ21hcmdpbi10b3AnLCAtem9vbUNvbnQuY2hpbGRyZW4oKS5oZWlnaHQoKSArIHpvb21Db250LmhlaWdodCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgem9vbUNvbnQuZmluZCgnID4gZGl2JykuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xyXG4gICAgICAgICAgICB6b29tQ29udC5maW5kKCdpbWcuYmctaW1nJykuY3NzKCdsZWZ0JywgJzBweCcpO1xyXG5cclxuICAgICAgICAgICAgem9vbUNvbnQubW91c2Vtb3ZlKGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmYlRvcE1hcmdpbiAtIGV2dC5wYWdlWSA+IC16b29tQ29udC5jaGlsZHJlbigpLmhlaWdodCgpICsgem9vbUNvbnQuaGVpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB6b29tQ29udC5maW5kKCcgPiBkaXYnKS5jc3MoJ21hcmdpbi10b3AnLCBmYlRvcE1hcmdpbiAtIGV2dC5wYWdlWSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHpvb21Db250LmZpbmQoJyA+IGRpdicpLmNzcygnbWFyZ2luLXRvcCcsIC16b29tQ29udC5jaGlsZHJlbigpLmhlaWdodCgpICsgem9vbUNvbnQuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gem9vbUNvbnQucG9zaXRpb24oKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93LXRvcCwgZGl2Lnpvb21lZC1zaGFkb3ctYm90dG9tJykud2lkdGgoem9vbUNvbnQud2lkdGgoKSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy10b3AnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgLSAxMyxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgKyBmYlpvb21lZEJvcmRlclxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy1ib3R0b20nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgKyB6b29tQ29udC5oZWlnaHQoKSAtIDQwICsgMiAqIGZiWm9vbWVkQm9yZGVyLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCArIGZiWm9vbWVkQm9yZGVyXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgICAgICAvKlx0RmxpcCBCb29rIE5hdmlnYXRpb25cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgdmFyIHNsaWRlc2hvd0RlbGF5ID0gc2xpZGVTaG93SW50ZXJ2YWwsXHJcbiAgICAgICAgICAgIG5hdldpZHRoID0gMCxcclxuICAgICAgICAgICAgaSA9IDA7XHJcblxyXG4gICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2xlZnQnKSkge1xyXG4gICAgICAgICAgICAgICAgbmF2V2lkdGggKz0gOTc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2NlbnRlcicpKSB7XHJcbiAgICAgICAgICAgICAgICBuYXZXaWR0aCArPSA4OTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkdGhpcy5oYXNDbGFzcygncmlnaHQnKSkge1xyXG4gICAgICAgICAgICAgICAgbmF2V2lkdGggKz0gOTU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHRoaXMuaGFzQ2xhc3MoJ3JvdW5kJykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBuYXZXaWR0aCArPSA5NjtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5jc3MoJ21hcmdpbi1sZWZ0JywgJzBweCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuYXZXaWR0aCArPSA5NjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZiTmF2LndpZHRoKG5hdldpZHRoKTtcclxuXHJcbiAgICAgICAgZmJOYXYuZmluZCgndWwgbGknKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdzbGlkZXNob3cnKSkge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImJ1dHRvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImJ1dHRvbi1vdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLWljb25cIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJidXR0b24taWNvbi1vdmVyXCI+PC9zcGFuPicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImJ1dHRvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImJ1dHRvbi1vdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLWljb25cIj48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZmJDb250LmFwcGVuZCgnPGRpdiBjbGFzcz1cIm5leHQgcm91bmRcIj48c3BhbiBjbGFzcz1cImJ1dHRvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImJ1dHRvbi1vdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLWljb25cIj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cInByZXZpZXcgcm91bmRcIj48c3BhbiBjbGFzcz1cImJ1dHRvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImJ1dHRvbi1vdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLWljb25cIj48L3NwYW4+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIGlmIChmYk5hdi5oYXNDbGFzcygnbW9iaWxlJykpIHtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0LCBkaXYucHJldmlldycpLmFkZENsYXNzKCdtb2JpbGUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJy5mYi1uYXYgdWwgbGksIC5mbGlwYm9vay1jb250YWluZXIgZGl2Lm5leHQsIC5mbGlwYm9vay1jb250YWluZXIgZGl2LnByZXZpZXcnKS5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24nKS5jbGVhclF1ZXVlKCk7XHJcbiAgICAgICAgICAgICR0aGlzLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbi1vdmVyJykuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24nKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgJHRoaXMuY2hpbGRyZW4oJ3NwYW4uYnV0dG9uLW92ZXInKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnc2xpZGVzaG93JykgJiYgc2xpZGVzaG93IHx8ICR0aGlzLmhhc0NsYXNzKCd6b29tJykgJiYgem9vbWVkKSB7XHJcbiAgICAgICAgICAgICAgICAvL2RvIG5vdGhpbmdcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbicpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24tb3ZlcicpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVGFibGUgT2YgQ29udGVudFxyXG4gICAgICAgIGZiTmF2LmZpbmQoJ3VsIGxpLnRvYycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChmbGlwYm9vay50dXJuKCdwYWdlJykgIT0gdG9jSW5kZXgpIGZsaXBib29rLnRyaWdnZXIoJ21vdXNlb3ZlcicpO1xyXG4gICAgICAgICAgICBmbGlwYm9vay50dXJuKCdwYWdlJywgdG9jSW5kZXgpO1xyXG4gICAgICAgICAgICBkaXNhYmxlU2hhZG93cyhmbGlwYm9vayk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFpvb21cclxuICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS56b29tJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LnR1cm4tcGFnZS13cmFwcGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmF0dHIoJ3BhZ2UnKSA9PSBmbGlwYm9vay50dXJuKCdwYWdlJykgJiYgIXpvb21lZCkgJHRoaXMudHJpZ2dlcignZGJsY2xpY2snKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCR0aGlzLmF0dHIoJ3BhZ2UnKSA9PSBmbGlwYm9vay50dXJuKCdwYWdlJykgJiYgem9vbWVkKSBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZCcpLnRyaWdnZXIoJ2RibGNsaWNrJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTbGlkZXNob3dcclxuICAgICAgICBmYk5hdi5maW5kKCd1bCBsaS5zbGlkZXNob3cnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBzbGlkZXNob3cgPSAhc2xpZGVzaG93O1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGVzaG93KSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2xpZGVzaG93VGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay50dXJuKCduZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQsIGRpdi5wcmV2aWV3Jykuc3RvcCh0cnVlKS5mYWRlT3V0KDUwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRoaXMuY2hpbGRyZW4oJ3NwYW4uYnV0dG9uLWljb24tb3ZlcicpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24taWNvbicpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2xpZGVzaG93VGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lm5leHQsIGRpdi5wcmV2aWV3Jykuc3RvcCh0cnVlKS5mYWRlSW4oNTAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignc3Bhbi5idXR0b24taWNvbi1vdmVyJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmNoaWxkcmVuKCdzcGFuLmJ1dHRvbi1pY29uJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBoaWRlU2hhZG93cygnc3RhcnQnLCAncmlnaHQnLCBmbGlwYm9vaywgZmJDb250LCAnZW5kJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFNob3cgQWxsIFBhZ2VzXHJcbiAgICAgICAgZmJOYXYuZmluZCgndWwgbGkuc2hvdy1hbGwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgZmJIZWlnaHQgPSBmbGlwYm9vay5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIGZiV2lkdGggPSBmbGlwYm9vay53aWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZ0Fyb3VuZCA9IDEyLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZ1ZlcnRpY2FsLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZ0hvcml6b250YWwsXHJcbiAgICAgICAgICAgICAgICB0aHVtYkhlaWdodCxcclxuICAgICAgICAgICAgICAgIHRodW1iV2lkdGgsXHJcbiAgICAgICAgICAgICAgICByb3cgPSA2LFxyXG4gICAgICAgICAgICAgICAgaW5kID0gMSxcclxuICAgICAgICAgICAgICAgIGNvbCA9IDEwLFxyXG4gICAgICAgICAgICAgICAgY2xvbmUsXHJcbiAgICAgICAgICAgICAgICBwZXJjZW50YWdlLFxyXG4gICAgICAgICAgICAgICAgYm9yZGVyU2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ3N0b3AnKTtcclxuXHJcbiAgICAgICAgICAgIGZiQ29udC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzaG93LWFsbFwiPjxkaXYgY2xhc3M9XCJjb250ZW50XCI+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgICAgICBmYkNvbnQuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic2hvd2FsbC1zaGFkb3ctdG9wXCI+PC9kaXY+PGRpdiBjbGFzcz1cInNob3dhbGwtc2hhZG93LWJvdHRvbVwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnByZXZpZXcsIGRpdi5uZXh0JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2hvd0FsbCA9IGZiQ29udC5maW5kKCdkaXYuc2hvdy1hbGwnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFkZCBuZXh0XHJcbiAgICAgICAgICAgIGZiQ29udC5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiYmlnLW5leHQgc2hvdy1hbGwtbmV4dFwiPjxzcGFuIGNsYXNzPVwiYXJyb3dcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsZWZ0XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiY2VudGVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwicmlnaHRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsZWZ0IGhvdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiY2VudGVyIGhvdmVyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwicmlnaHQgaG92ZXJcIj48L3NwYW4+PC9zcGFuPicpO1xyXG5cclxuICAgICAgICAgICAgLy8gYWRkIHByZXZpb3VzXHJcbiAgICAgICAgICAgIGZiQ29udC5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiYmlnLW5leHQgc2hvdy1hbGwtcHJldmlvdXNcIj48c3BhbiBjbGFzcz1cImFycm93XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwibGVmdFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImNlbnRlclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cInJpZ2h0XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwibGVmdCBob3ZlclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImNlbnRlciBob3ZlclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cInJpZ2h0IGhvdmVyXCI+PC9zcGFuPjwvc3Bhbj4nKTtcclxuXHJcbiAgICAgICAgICAgIGluZCA9IDI7XHJcbiAgICAgICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5wYWdlLWNvbnRlbnQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLnBhcmVudCgpLnBhcmVudCgpLmhhc0NsYXNzKCdmcGFnZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSAkdGhpcy5jbG9uZSgpLmFkZENsYXNzKCdzaG93LWFsbC10aHVtYicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lLmZpbmQoJ2ltZy5iZy1pbWcuem9vbS1sYXJnZScpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lLmF0dHIoJ3N0eWxlJywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBvZGQgcGFnZXMgY2xhc3NcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLmhhc0NsYXNzKCdsYXN0JykpIGNsb25lLmFkZENsYXNzKCdldmVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJHRoaXMucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuaGFzQ2xhc3MoJ2ZpcnN0JykpIGNsb25lLmFkZENsYXNzKCdvZGQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgcGFnZSBkb3VibGUgYWRkIGNsYXNzIGRvdWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5wYXJlbnQoKS5oYXNDbGFzcygnZG91YmxlJykpIGNsb25lLmFkZENsYXNzKCdkb3VibGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhcHBlbmQgY2xvbmUgdG8gc2hvdy1hbGwgZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLmhhc0NsYXNzKCdsYXN0JykpIHNob3dBbGwuZmluZCgnZGl2LmNvbnRlbnQnKS5wcmVwZW5kKGNsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHNob3dBbGwuZmluZCgnZGl2LmNvbnRlbnQnKS5hcHBlbmQoY2xvbmUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbmQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBwYWRkaW5nQXJvdW5kID0gcGFyc2VJbnQoc2hvd0FsbC5maW5kKCdkaXYuY29udGVudCcpLmNzcygndG9wJykpO1xyXG4gICAgICAgICAgICBwYWRkaW5nVmVydGljYWwgPSBwYXJzZUludChzaG93QWxsLmZpbmQoJ2Rpdi5zaG93LWFsbC10aHVtYicpLmNzcygnbWFyZ2luLWJvdHRvbScpKTtcclxuICAgICAgICAgICAgcGFkZGluZ0hvcml6b250YWwgPSBwYXJzZUludChzaG93QWxsLmZpbmQoJ2Rpdi5zaG93LWFsbC10aHVtYi5vZGQnKS5jc3MoJ21hcmdpbi1yaWdodCcpKTtcclxuICAgICAgICAgICAgdGh1bWJIZWlnaHQgPSBwYXJzZUludChzaG93QWxsLmZpbmQoJ2Rpdi5zaG93LWFsbC10aHVtYicpLmNzcygnaGVpZ2h0JykpO1xyXG4gICAgICAgICAgICB0aHVtYldpZHRoID0gcGFyc2VJbnQoc2hvd0FsbC5maW5kKCdkaXYuc2hvdy1hbGwtdGh1bWInKS5jc3MoJ3dpZHRoJykpO1xyXG4gICAgICAgICAgICBib3JkZXJTaXplID0gcGFyc2VJbnQoc2hvd0FsbC5maW5kKCdkaXYuc2hvdy1hbGwtdGh1bWIub2RkJykuY3NzKCdib3JkZXItcmlnaHQtd2lkdGgnKSk7XHJcblxyXG4gICAgICAgICAgICBwZXJjZW50YWdlID0gdGh1bWJIZWlnaHQgLyBmYkhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGhvdyBtYW55IHJvd3NcclxuICAgICAgICAgICAgd2hpbGUgKGZiQ29udC5oZWlnaHQoKSAtIDEwMCA8PSBwYWRkaW5nQXJvdW5kICogMiArIHJvdyAqICh0aHVtYkhlaWdodCArIGJvcmRlclNpemUgKiAyICsgcGFkZGluZ1ZlcnRpY2FsKSAtIHBhZGRpbmdWZXJ0aWNhbCkge1xyXG4gICAgICAgICAgICAgICAgcm93LS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGhvdyBtYW55IGNvbHVtbnNcclxuICAgICAgICAgICAgd2hpbGUgKGZiQ29udC53aWR0aCgpIC0gMTAwIDw9IHBhZGRpbmdBcm91bmQgKiAyICsgY29sICogKHRodW1iV2lkdGggKyBib3JkZXJTaXplKSArIGNvbCAqIHBhZGRpbmdIb3Jpem9udGFsICogMC41IC0gcGFkZGluZ0hvcml6b250YWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbC0tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY29sICUgMiAhPSAwKSBjb2wtLTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb2wgPiA2KSBjb2wgPSA2O1xyXG5cclxuICAgICAgICAgICAgc2hvd0FsbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogcGFkZGluZ0Fyb3VuZCAqIDIgKyBjb2wgKiAodGh1bWJXaWR0aCArIGJvcmRlclNpemUpICsgY29sICogcGFkZGluZ0hvcml6b250YWwgKiAwLjUgLSBwYWRkaW5nSG9yaXpvbnRhbCArICdweCcsXHJcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogcGFkZGluZ0Fyb3VuZCAqIDIgKyByb3cgKiAodGh1bWJIZWlnaHQgKyBib3JkZXJTaXplICogMiArIHBhZGRpbmdWZXJ0aWNhbCkgLSBwYWRkaW5nVmVydGljYWwgKyAncHgnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaW5kID0gMTtcclxuXHJcbiAgICAgICAgICAgIHNob3dBbGwuZmluZCgnZGl2LnNob3ctYWxsLXRodW1iJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgbGFzdCBpbiB0aGUgcm93IGFkZCBjbGFzcyBsYXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kICUgY29sID09IDApICR0aGlzLmFkZENsYXNzKCdsYXN0LXRodW1iJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaW5kKys7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLmVubGFyZ2UnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdmb250LXNpemUnOiBNYXRoLnJvdW5kKHBhcnNlSW50KCQodGhpcykuY3NzKCdmb250LXNpemUnKSkgKiBwZXJjZW50YWdlKSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6IE1hdGgucm91bmQocGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2xpbmUtaGVpZ2h0JykpICogcGVyY2VudGFnZSkgKyAncHgnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cInNoYWRvd1wiPjwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2Rpdi52aWRlbycpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZsaXBib29rLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LCA1MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZsaXBib29rLmNzcygndmlzaWJpbGl0eScsICdub25lJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5wcmV2aWV3JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG5cclxuICAgICAgICAgICAgZmxpcGJvb2suY3NzKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgICAgICAgIGZiTmF2LmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICBzaG93QWxsLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG5cclxuICAgICAgICAgICAgc2hvd0FsbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiAoZmJDb250LndpZHRoKCkgLSBzaG93QWxsLndpZHRoKCkpIC8gMiArICdweCdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5zaG93LWFsbC1wcmV2aW91cycpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiBzaG93QWxsLndpZHRoKCksXHJcbiAgICAgICAgICAgICAgICAndG9wJzogcGFyc2VJbnQoc2hvd0FsbC5jc3MoJ3RvcCcpKSAtIDQzICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogcGFyc2VJbnQoc2hvd0FsbC5jc3MoJ2xlZnQnKSkgKyAxICsgJ3B4J1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLW5leHQnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogc2hvd0FsbC53aWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgJ3RvcCc6IHBhcnNlSW50KHNob3dBbGwuY3NzKCd0b3AnKSkgKyBwYXJzZUludChzaG93QWxsLmNzcygnaGVpZ2h0JykpIC0gMzMgKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBwYXJzZUludChzaG93QWxsLmNzcygnbGVmdCcpKSArIDEgKyAncHgnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uYmlnLW5leHQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnc3Bhbi5jZW50ZXInKS53aWR0aCgkKHRoaXMpLndpZHRoKCkgLSAyNik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNob3dBbGwuaGVpZ2h0KCkgPCBzaG93QWxsLmZpbmQoJ2Rpdi5jb250ZW50JykuaGVpZ2h0KCkgLSBwYWRkaW5nVmVydGljYWwpIHtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLXByZXZpb3VzJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLW5leHQnKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uc2hvdy1hbGwtcHJldmlvdXMnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uc2hvdy1hbGwtbmV4dCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIFNob3cgQWxsIEV2ZW50cyAqL1xyXG4gICAgICAgICAgICBzaG93QWxsLmZpbmQoJ2Rpdi5zaG93LWFsbC10aHVtYicpLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuLnNoYWRvdycpLmNsZWFyUXVldWUoKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4uc2hhZG93JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2V2ZW4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm5leHQoKS5maW5kKCdzcGFuLnNoYWRvdycpLmNsZWFyUXVldWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5uZXh0KCkuZmluZCgnc3Bhbi5zaGFkb3cnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnByZXYoKS5maW5kKCdzcGFuLnNoYWRvdycpLmNsZWFyUXVldWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5wcmV2KCkuZmluZCgnc3Bhbi5zaGFkb3cnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3Bhbi5zaGFkb3cnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnZXZlbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMubmV4dCgpLmZpbmQoJ3NwYW4uc2hhZG93JykuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm5leHQoKS5maW5kKCdzcGFuLnNoYWRvdycpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucHJldigpLmZpbmQoJ3NwYW4uc2hhZG93JykuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnByZXYoKS5maW5kKCdzcGFuLnNoYWRvdycpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvKiBTaG93IEFsbCBFdmVudHMgKi9cclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gc2hvd0FsbC5wb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnNob3dhbGwtc2hhZG93LXRvcCwgZGl2LnNob3dhbGwtc2hhZG93LWJvdHRvbScpLndpZHRoKHNob3dBbGwud2lkdGgoKSkuZGVsYXkoNTAwKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5zaG93YWxsLXNoYWRvdy10b3AnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgLSAxMixcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgKyBib3JkZXJTaXplXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5zaG93YWxsLXNoYWRvdy1ib3R0b20nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgKyBzaG93QWxsLmhlaWdodCgpIC0gMzksXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgYm9yZGVyU2l6ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8qIFRodW1ibmFpbCBDbGljayAqL1xyXG4gICAgICAgICAgICBzaG93QWxsLmZpbmQoJ2Rpdi5zaG93LWFsbC10aHVtYicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBNYXRoLmNlaWwoJHRoaXMuaW5kZXgoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmxpcGJvb2sudHJpZ2dlcignbW91c2VvdmVyJyk7XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlU2hhZG93cyhmbGlwYm9vayk7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay50dXJuKCdwYWdlJywgaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIENsb3NlICovXHJcbiAgICAgICAgICAgICAgICBzaG93QWxsLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnNob3dhbGwtc2hhZG93LWJvdHRvbScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2LnNob3dhbGwtc2hhZG93LXRvcCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5zaG93LWFsbC1wcmV2aW91cycpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5zaG93LWFsbC1uZXh0JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSwgMzAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZsaXBib29rLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5jbGVhclF1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgZmJOYXYuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWQgPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZiLXNoYWRvdy1ib3R0b20tbGVmdCcpLmNzcygnb3BhY2l0eScsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi5mYi1zaGFkb3ctdG9wLWxlZnQnKS5jc3MoJ29wYWNpdHknLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5jc3MoJ3BvaW50ZXItZXZlbnRzJywgJ2FsbCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzYUNvbnRlbnQgPSBzaG93QWxsLmZpbmQoJ2Rpdi5jb250ZW50JyksXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxBbW91bnQgPSByb3cgKiAodGh1bWJIZWlnaHQgKyBwYWRkaW5nVmVydGljYWwgKyBib3JkZXJTaXplICogMiksXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8qIFNjcm9sbCBTaG93QWxsICovXHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLXByZXZpb3VzJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHNhQ29udGVudC5jc3MoJ3RvcCcpKSAhPSBwYWRkaW5nQXJvdW5kICYmICFhbmltYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNhQ29udGVudC5jbGVhclF1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2FDb250ZW50LmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHBhcnNlSW50KHNhQ29udGVudC5jc3MoJ3RvcCcpKSArIHNjcm9sbEFtb3VudFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMDAsICdlYXNlT3V0RXhwbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZmJDb250LmZpbmQoJ3NwYW4uc2hvdy1hbGwtbmV4dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChzYUNvbnRlbnQuY3NzKCd0b3AnKSkgLSBzY3JvbGxBbW91bnQgPiAxMiAtIHNhQ29udGVudC5oZWlnaHQoKSAmJiAhYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzYUNvbnRlbnQuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNhQ29udGVudC5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBwYXJzZUludChzYUNvbnRlbnQuY3NzKCd0b3AnKSkgLSBzY3JvbGxBbW91bnRcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwLCAnZWFzZU91dEV4cG8nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLnNob3ctYWxsLW5leHQsIHNwYW4uc2hvdy1hbGwtcHJldmlvdXMnKS5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnV0ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIGJ1dC5jbGVhclF1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICBidXQuZmluZCgnc3Bhbi5sZWZ0LmhvdmVyLCBzcGFuLnJpZ2h0LmhvdmVyLCBzcGFuLmNlbnRlci5ob3ZlcicpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBidXQgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgYnV0LmNsZWFyUXVldWUoKTtcclxuICAgICAgICAgICAgICAgIGJ1dC5maW5kKCdzcGFuLmxlZnQuaG92ZXIsIHNwYW4ucmlnaHQuaG92ZXIsIHNwYW4uY2VudGVyLmhvdmVyJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIE5leHQgJiBQcmV2aW91cyAqL1xyXG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYubmV4dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChwYWdlVHVybmluZykgcmV0dXJuO1xyXG4gICAgICAgICAgICBhY3RpdmVBcnJvdyA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgIGZsaXBib29rLnRyaWdnZXIoJ21vdXNlb3ZlcicpO1xyXG4gICAgICAgICAgICBmbGlwYm9vay50dXJuKCduZXh0Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZiQ29udC5maW5kKCdkaXYucHJldmlldycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChwYWdlVHVybmluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgYWN0aXZlQXJyb3cgPSAnbGVmdCc7XHJcbiAgICAgICAgICAgIGZsaXBib29rLnRyaWdnZXIoJ21vdXNlb3ZlcicpO1xyXG4gICAgICAgICAgICBmbGlwYm9vay50dXJuKCdwcmV2aW91cycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgICAgICAvKiBTaGFkb3dzXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIGFkZEluc2lkZUJvb2tTaGFkb3coZmxpcGJvb2spO1xyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgICAgICAvKiBFdmVudHNcclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgaGFzaENoYW5nZShmbGlwYm9vaywgZmJDb250KTtcclxuXHJcbiAgICAgICAgZmlyc3RXaWR0aCA9IGZsaXBib29rLndpZHRoKCksIGZpcnN0SGVpZ2h0ID0gZmxpcGJvb2suaGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyIHBvc0FycmF5ID0gbmV3IEFycmF5KCksXHJcbiAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgICAgICQoJy5mbGlwYm9vayBkaXYucGFnZS1jb250ZW50IC5lbmxhcmdlJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHBvc0FycmF5LnB1c2gobmV3IEFycmF5KCkpO1xyXG4gICAgICAgICAgICBwb3NBcnJheVtpXS5wdXNoKHBhcnNlSW50KCQodGhpcykuY3NzKCdmb250LXNpemUnKSkpO1xyXG4gICAgICAgICAgICBwb3NBcnJheVtpXS5wdXNoKHBhcnNlSW50KCQodGhpcykuY3NzKCdsaW5lLWhlaWdodCcpKSk7XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogV2luZG93IFJlc2l6ZSAqL1xyXG4gICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudElEID0gZmxpcGJvb2sudHVybigncGFnZScpO1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gJHRoaXMud2lkdGgoKSxcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gd2luZG93IHdpZHRoXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ7IC8vIHdpbmRvdyBoZWlnaHRcclxuXHJcbiAgICAgICAgICAgIGlmICgkdGhpcy5oZWlnaHQoKSAtIGZiTmF2Lm9mZnNldCgpLnRvcCArIDE1MCA8IDApIGhlaWdodCA9ICR0aGlzLmhlaWdodCgpIC0gZmxpcGJvb2sub2Zmc2V0KCkudG9wIC0gKCR0aGlzLmhlaWdodCgpIC0gZmJOYXYub2Zmc2V0KCkudG9wICsgMTUwKTtcclxuICAgICAgICAgICAgZWxzZSBoZWlnaHQgPSAkdGhpcy5oZWlnaHQoKSAtIGZsaXBib29rLm9mZnNldCgpLnRvcCAtIDIwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZiTmV4dCA9IGZiQ29udC5maW5kKCdkaXYubmV4dCcpLFxyXG4gICAgICAgICAgICAgICAgZmJQcmV2ID0gZmJDb250LmZpbmQoJ2Rpdi5wcmV2aWV3JyksXHJcbiAgICAgICAgICAgICAgICByYXRpbyxcclxuICAgICAgICAgICAgICAgIGZiV2lkdGgsXHJcbiAgICAgICAgICAgICAgICBmYkhlaWdodCxcclxuICAgICAgICAgICAgICAgIGZiUGVyY2VudGFnZSxcclxuICAgICAgICAgICAgICAgIGFyZWFIZWlnaHQgPSBwYXJzZUludChmbGlwYm9vay5jc3MoJ21hcmdpbi10b3AnKSkgKyBwYXJzZUludChmbGlwYm9vay5jc3MoJ21hcmdpbi1ib3R0b20nKSkgKyBmbGlwYm9vay5oZWlnaHQoKSArIHBhcnNlSW50KGZiTmF2LmNzcygnbWFyZ2luLXRvcCcpKSArIHBhcnNlSW50KGZiTmF2LmNzcygnbWFyZ2luLWJvdHRvbScpKSArIHBhcnNlSW50KGZiTmF2LmNzcygndG9wJykpICsgZmJOYXYuaGVpZ2h0KCkgKyA0MCxcclxuICAgICAgICAgICAgICAgIGFyZWFXaWR0aCA9IGZsaXBib29rLndpZHRoKCkgKyAzMzAsXHJcbiAgICAgICAgICAgICAgICBhcmVhTWluSGVpZ2h0ID0gcGFyc2VJbnQoZmxpcGJvb2suY3NzKCdtYXJnaW4tdG9wJykpICsgZmxpcGJvb2suaGVpZ2h0KCkgKyBmYk5hdi5oZWlnaHQoKSAtIDU1LFxyXG4gICAgICAgICAgICAgICAgYXJlYU1pbldpZHRoID0gZmxpcGJvb2sud2lkdGgoKSArIDE0MCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gZmxpcGJvb2sucG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmYkNvbnQuaGVpZ2h0KCkgLyBmaXJzdEhlaWdodCA8IGZiQ29udC53aWR0aCgpIC8gZmlyc3RXaWR0aCkgcmF0aW8gPSBmYkNvbnQuaGVpZ2h0KCkgLyBmaXJzdEhlaWdodDtcclxuICAgICAgICAgICAgZWxzZSByYXRpbyA9IGZiQ29udC53aWR0aCgpIC8gZmlyc3RXaWR0aDtcclxuXHJcbiAgICAgICAgICAgIGZiV2lkdGggPSBmYkNvbnQud2lkdGgoKTtcclxuICAgICAgICAgICAgZmJIZWlnaHQgPSBmYkNvbnQuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmJXaWR0aCA8IGZpcnN0V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciByYXRpbyA9IGZiV2lkdGggLyBmaXJzdFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIGZiV2lkdGggPSBmaXJzdFdpZHRoICogcmF0aW87XHJcbiAgICAgICAgICAgICAgICBmYkhlaWdodCA9IGZpcnN0SGVpZ2h0ICogcmF0aW87XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmYldpZHRoID4gZmlyc3RXaWR0aCB8fCBmYkhlaWdodCA+IGZpcnN0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBmYldpZHRoID0gZmlyc3RXaWR0aDtcclxuICAgICAgICAgICAgICAgIGZiSGVpZ2h0ID0gZmlyc3RIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmYldpZHRoIDwgZmJOYXYud2lkdGgoKSArIDIwKSB7XHJcbiAgICAgICAgICAgICAgICBmYldpZHRoID0gZmJOYXYud2lkdGgoKSArIDIwO1xyXG4gICAgICAgICAgICAgICAgZmJIZWlnaHQgPSBmaXJzdEhlaWdodCAqIChmYldpZHRoIC8gZmlyc3RXaWR0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmYldpZHRoICE9IGZsaXBib29rLndpZHRoKCkgfHwgZmJIZWlnaHQgIT0gZmxpcGJvb2suaGVpZ2h0KCkpIHJlc2l6ZUZCKGZiV2lkdGgsIGZiSGVpZ2h0LCBmbGlwYm9vaywgZmJDb250LCB6b29tZWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGhlaWdodCA+IGFyZWFIZWlnaHQgJiYgd2lkdGggPiBhcmVhV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGZiV2lkdGggPSBmaXJzdFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgZmJIZWlnaHQgPSBmaXJzdEhlaWdodDtcclxuICAgICAgICAgICAgICAgIHJlc2l6ZUZCKGZpcnN0V2lkdGgsIGZpcnN0SGVpZ2h0LCBmbGlwYm9vaywgZmJDb250LCB6b29tZWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmYlBlcmNlbnRhZ2UgPSBmbGlwYm9vay5oZWlnaHQoKSAvIGZpcnN0SGVpZ2h0O1xyXG4gICAgICAgICAgICBmYlBlcmNlbnRhZ2UgPSBwYXJzZUludChmYlBlcmNlbnRhZ2UgKiAxMDApO1xyXG5cclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG5cclxuICAgICAgICAgICAgJCgnLmZsaXBib29rIGRpdi5wYWdlLWNvbnRlbnQgLmVubGFyZ2UnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmYlBlcmNlbnRhZ2UgPT0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2ZvbnQtc2l6ZScsIHBvc0FycmF5W2ldWzBdICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnbGluZS1oZWlnaHQnLCBwb3NBcnJheVtpXVsxXSArIFwicHhcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdmb250LXNpemUnLCBwb3NBcnJheVtpXVswXSAqIChmYlBlcmNlbnRhZ2UgLyAxMDApICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnbGluZS1oZWlnaHQnLCBwb3NBcnJheVtpXVsxXSAqIChmYlBlcmNlbnRhZ2UgLyAxMDApICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB3aWR0aCA9ICR0aGlzLndpZHRoKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJHRoaXMuaGVpZ2h0KCkgLSBmYk5hdi5vZmZzZXQoKS50b3AgKyAxNTAgPCAwKSBoZWlnaHQgPSAkdGhpcy5oZWlnaHQoKSAtIGZsaXBib29rLm9mZnNldCgpLnRvcCAtICgkdGhpcy5oZWlnaHQoKSAtIGZiTmF2Lm9mZnNldCgpLnRvcCArIDE1MCk7XHJcbiAgICAgICAgICAgIGVsc2UgaGVpZ2h0ID0gJHRoaXMuaGVpZ2h0KCkgLSBmbGlwYm9vay5vZmZzZXQoKS50b3AgLSAyMDtcclxuXHJcbiAgICAgICAgICAgIGFyZWFIZWlnaHQgPSBwYXJzZUludChmbGlwYm9vay5jc3MoJ21hcmdpbi10b3AnKS5yZXBsYWNlKFwicHhcIiwgXCJcIikpICsgcGFyc2VJbnQoZmxpcGJvb2suY3NzKCdtYXJnaW4tYm90dG9tJykucmVwbGFjZShcInB4XCIsIFwiXCIpKSArIGZiSGVpZ2h0ICsgcGFyc2VJbnQoZmJOYXYuY3NzKCdtYXJnaW4tdG9wJykucmVwbGFjZShcInB4XCIsIFwiXCIpKSArIHBhcnNlSW50KGZiTmF2LmNzcygnbWFyZ2luLWJvdHRvbScpLnJlcGxhY2UoXCJweFwiLCBcIlwiKSkgKyBmYk5hdi5oZWlnaHQoKTtcclxuICAgICAgICAgICAgYXJlYVdpZHRoID0gZmJXaWR0aCArIDMzMDtcclxuXHJcbiAgICAgICAgICAgIGFyZWFNaW5IZWlnaHQgPSBwYXJzZUludChmbGlwYm9vay5jc3MoJ21hcmdpbi10b3AnKS5yZXBsYWNlKFwicHhcIiwgXCJcIikpICsgZmJIZWlnaHQgKyBmYk5hdi5oZWlnaHQoKSAtIDU1O1xyXG4gICAgICAgICAgICBhcmVhTWluV2lkdGggPSBmYldpZHRoICsgMTQwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJRCA9PSAxIHx8IGN1cnJlbnRJRCA9PSBmbGlwYm9vay5kYXRhKCkudG90YWxQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxlZnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJRCA9PSAxKSBsZWZ0ID0gTWF0aC5mbG9vcigoZmJDb250LndpZHRoKCkgLSBmbGlwYm9vay53aWR0aCgpIC8gMikgKiAwLjUpIC0gZmxpcGJvb2sud2lkdGgoKSAvIDI7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGxlZnQgPSBNYXRoLmZsb29yKChmYkNvbnQud2lkdGgoKSAtIGZsaXBib29rLndpZHRoKCkgLyAyKSAqIDAuNSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGZsaXBib29rLmNzcygnbGVmdCcpKSAhPSBsZWZ0KSBmbGlwYm9vay5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogbGVmdFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogTWF0aC5mbG9vcigoZmJDb250LndpZHRoKCkgLSBmbGlwYm9vay53aWR0aCgpKSAqIDAuNSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh6b29tZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmYkNvbnQuY2hpbGRyZW4oJ2Rpdi56b29tZWQnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IE1hdGguZmxvb3IoKGZiQ29udC53aWR0aCgpIC0gZmxpcGJvb2sud2lkdGgoKSkgKiAwLjUpIC0gMTBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBmYkNvbnQuY2hpbGRyZW4oJ2Rpdi56b29tZWQtc2hhZG93LCBkaXYuem9vbWVkLXNoYWRvdy1ib3R0b20sIGRpdi56b29tZWQtc2hhZG93LXRvcCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogTWF0aC5mbG9vcigoZmJDb250LndpZHRoKCkgLSBmbGlwYm9vay53aWR0aCgpKSAqIDAuNSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogUHJldmlldyAvIE5leHQgQXJyb3dzICovXHJcbiAgICAgICAgICAgIGlmICh3aWR0aCA8IGFyZWFXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgZmJOZXh0LmFkZENsYXNzKCdzbWFsbCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCArIGZsaXBib29rLndpZHRoKCkgLSA0MFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYlByZXYuYWRkQ2xhc3MoJ3NtYWxsJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0IC0gNDVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJQcmV2LmZpbmQoJ3NwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDZcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJOZXh0LmZpbmQoJ3NwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDQxXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh3aWR0aCA+IGFyZWFXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgZmJOZXh0LnJlbW92ZUNsYXNzKCdzbWFsbCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCArIGZsaXBib29rLndpZHRoKCkgKyAyNFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYlByZXYucmVtb3ZlQ2xhc3MoJ3NtYWxsJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0IC0gMTEwXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiUHJldi5maW5kKCdzcGFuLmJ1dHRvbi1pY29uJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAyMlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYk5leHQuZmluZCgnc3Bhbi5idXR0b24taWNvbicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMjZcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZmJQcmV2LmNzcygnb3BhY2l0eScpID09IFwiMFwiKSBmYlByZXYuY3NzKCdsZWZ0JywgJzEwMHB4Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmJOZXh0LmNzcygnb3BhY2l0eScpID09IFwiMFwiKSBmYk5leHQuY3NzKCdyaWdodCcsICcxMDBweCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHpvb21lZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSBwYXJzZUludChmYkNvbnQuZmluZCgnZGl2Lnpvb21lZCcpLmNzcygnbGVmdCcpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuY2hpbGRyZW4oJy5iaWctc2lkZS5zaG93LXByZXZpb3VzJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IGwgLSA0MFxyXG4gICAgICAgICAgICAgICAgfSkuaGVpZ2h0KGZiSGVpZ2h0KS5jaGlsZHJlbignLmNlbnRlciwgLmNlbnRlci5ob3ZlcicpLmhlaWdodChmYkhlaWdodCAtIDI0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuY2hpbGRyZW4oJy5iaWctc2lkZS5zaG93LW5leHQnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdyaWdodCc6IGwgLSA0MFxyXG4gICAgICAgICAgICAgICAgfSkuaGVpZ2h0KGZiSGVpZ2h0KS5jaGlsZHJlbignLmNlbnRlciwgLmNlbnRlci5ob3ZlcicpLmhlaWdodChmYkhlaWdodCAtIDI0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogQm90dG9tIFVJICovXHJcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPCBhcmVhSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBmYk5hdi5hZGRDbGFzcygnc21hbGwnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogLTQwIC0gcGFyc2VJbnQoZmxpcGJvb2suY3NzKCdtYXJnaW4tYm90dG9tJykucmVwbGFjZShcInB4XCIsIFwiXCIpKSAtIHBhcnNlSW50KGZiTmF2LmNzcygnbWFyZ2luLXRvcCcpLnJlcGxhY2UoXCJweFwiLCBcIlwiKSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgPiBsaS50b2MgPiBzcGFuLmJ1dHRvbi1pY29uJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDQwXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsID4gbGkuem9vbSA+IHNwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogMzhcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgPiBsaS5zbGlkZXNob3cgPiBzcGFuLmJ1dHRvbi1pY29uLCB1bCA+IGxpLnNsaWRlc2hvdyA+IHNwYW4uYnV0dG9uLWljb24tb3ZlcicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAzOVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCA+IGxpLnNob3ctYWxsID4gc3Bhbi5idXR0b24taWNvbicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiA0MFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGVpZ2h0ID4gYXJlYUhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgZmJOYXYucmVtb3ZlQ2xhc3MoJ3NtYWxsJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgPiBsaS50b2MgPiBzcGFuLmJ1dHRvbi1pY29uJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDI1XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiTmF2LmZpbmQoJ3VsID4gbGkuem9vbSA+IHNwYW4uYnV0dG9uLWljb24nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogMjRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgPiBsaS5zbGlkZXNob3cgPiBzcGFuLmJ1dHRvbi1pY29uLCB1bCA+IGxpLnNsaWRlc2hvdyA+IHNwYW4uYnV0dG9uLWljb24tb3ZlcicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAyNVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYk5hdi5maW5kKCd1bCA+IGxpLnNob3ctYWxsID4gc3Bhbi5idXR0b24taWNvbicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAyNlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogRmxpcCBCb29rIEV2ZW50cyAqL1xyXG4gICAgICAgIGZsaXBib29rLmJpbmQoJ3R1cm5lZCcsIGZ1bmN0aW9uIChlLCBwYWdlLCBwYWdlT2JqKSB7XHJcbiAgICAgICAgICAgIHNldEhhc2hUYWcoZmxpcGJvb2spO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIEdsb2JhbCBFdmVudHMgKi9cclxuICAgICAgICAkKHdpbmRvdykuYmluZCgna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIC8vIGtleWJvYXJkIGV2ZW50c1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDM3KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFnZVR1cm5pbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoem9vbWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRwcmV2ID0gZmJDb250LmNoaWxkcmVuKCcuYmlnLXNpZGUuc2hvdy1wcmV2aW91cycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHByZXYuaXMoJzpoaWRkZW4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcHJldi5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQXJyb3cgPSAnbGVmdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sudHJpZ2dlcignbW91c2VvdmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcGJvb2sudHVybigncHJldmlvdXMnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMzkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYWdlVHVybmluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh6b29tZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJG5leHQgPSBmYkNvbnQuY2hpbGRyZW4oJy5iaWctc2lkZS5zaG93LW5leHQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISRuZXh0LmlzKCc6aGlkZGVuJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG5leHQuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUFycm93ID0gJ3JpZ2h0JztcclxuICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay50cmlnZ2VyKCdtb3VzZW92ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICBmbGlwYm9vay50dXJuKCduZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDI3KSB7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdhbGwnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZsaXBib29rLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICAgICAgfSwgMzAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVNoYWRvd3MoJ3R1cm5lZCcsICdmYWxzZScsIGZsaXBib29rLCBmYkNvbnQsICd6b29tJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgem9vbWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZmJOYXYuZmluZCgndWwgbGkuem9vbScpLnRyaWdnZXIoJ21vdXNlb3V0Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmYk5hdi5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZmJOYXYuc3RvcCh0cnVlKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAnb3BhY2l0eSc6IDFcclxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi5uZXh0LCBkaXYucHJldmlldycpLnN0b3AodHJ1ZSkuZmFkZUluKDUwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93LXRvcCcpLmNsZWFyUXVldWUoKTtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdkaXYuem9vbWVkLXNoYWRvdy1ib3R0b20nKS5jbGVhclF1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3cnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9LCAzMDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnZGl2Lnpvb21lZC1zaGFkb3ctYm90dG9tJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSwgMTAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmJDb250LmZpbmQoJ2Rpdi56b29tZWQtc2hhZG93LXRvcCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgIH0sIDEwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZiQ29udC5maW5kKCdzcGFuLmJpZy1zaWRlLnNob3ctcHJldmlvdXMnKS5mYWRlT3V0KDIwMCk7XHJcbiAgICAgICAgICAgICAgICBmYkNvbnQuZmluZCgnc3Bhbi5iaWctc2lkZS5zaG93LW5leHQnKS5mYWRlT3V0KDIwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5iaW5kKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBoYXNoY2hhbmdlIGV2ZW50ICh1bmlxdWUgdXJsIGZvciBlYWNoIHBhZ2UpXHJcbiAgICAgICAgICAgIGhhc2hDaGFuZ2UoZmxpcGJvb2ssIGZiQ29udCk7XHJcbiAgICAgICAgfSkuYmluZCgndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIC8vIHRvdWNoIGV2ZW50cyBmb3IgbW9iaWxlIHN0dWZmXHJcbiAgICAgICAgICAgIHZhciB0ID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XHJcbiAgICAgICAgICAgIGlmICh0WzBdKSB0b3VjaFN0YXJ0ID0ge1xyXG4gICAgICAgICAgICAgICAgeDogdFswXS5wYWdlWCxcclxuICAgICAgICAgICAgICAgIHk6IHRbMF0ucGFnZVlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRvdWNoRW5kID0gbnVsbDtcclxuICAgICAgICB9KS5iaW5kKCd0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgdCA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzLFxyXG4gICAgICAgICAgICAgICAgcG9zID0gZmxpcGJvb2sub2Zmc2V0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodFswXS5wYWdlWCA+IHBvcy5sZWZ0ICYmIHRbMF0ucGFnZVkgPiBwb3MudG9wICYmIHRbMF0ucGFnZVggPCBwb3MubGVmdCArIGZsaXBib29rLndpZHRoKCkgJiYgdFswXS5wYWdlWSA8IHBvcy50b3AgKyBmbGlwYm9vay5oZWlnaHQoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHQubGVuZ3RoID09IDEpIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodFswXSkgdG91Y2hFbmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogdFswXS5wYWdlWCxcclxuICAgICAgICAgICAgICAgICAgICB5OiB0WzBdLnBhZ2VZXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuYmluZCgndG91Y2hlbmQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAod2luZG93LnRvdWNoU3RhcnQgJiYgd2luZG93LnRvdWNoRW5kKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdyA9IGZsaXBib29rLndpZHRoKCkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIGQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IHRvdWNoRW5kLnggLSB0b3VjaFN0YXJ0LngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRvdWNoRW5kLnkgLSB0b3VjaFN0YXJ0LnlcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogdG91Y2hTdGFydC54IC0gZmxpcGJvb2sub2Zmc2V0KCkubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdG91Y2hTdGFydC55IC0gZmxpcGJvb2sub2Zmc2V0KCkudG9wXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZC55KSA8IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlVHVybmluZykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkLnggPiAxMDAgJiYgcG9zLnggPCB3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ3ByZXZpb3VzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLnggPCAxMDAgJiYgcG9zLnggPiB3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBib29rLnR1cm4oJ25leHQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5iaW5kKCdzdGFydCcsIGZ1bmN0aW9uIChlLCB0dXJuKSB7XHJcbiAgICAgICAgICAgIGlmIChpZSkge1xyXG4gICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZwYWdlIG9iamVjdCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnbm9uZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LnZpZGVvIG9iamVjdCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnbm9uZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZwYWdlIG9iamVjdCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaGlkZVNoYWRvd3MoJ3N0YXJ0JywgYWN0aXZlQXJyb3csIGZsaXBib29rLCBmYkNvbnQsICdzdGFydCcpO1xyXG4gICAgICAgICAgICBhY3RpdmVDb3JuZXIgPSB0cnVlO1xyXG4gICAgICAgIH0pLmJpbmQoJ2VuZCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChpZSkge1xyXG4gICAgICAgICAgICAgICAgZmxpcGJvb2suZmluZCgnZGl2LmZwYWdlIG9iamVjdCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnYmxvY2snXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZsaXBib29rLmZpbmQoJ2Rpdi52aWRlbyBvYmplY3QnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmbGlwYm9vay5maW5kKCdkaXYuZnBhZ2Ugb2JqZWN0JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBoaWRlU2hhZG93cygndHVybmVkJywgJ2ZhbHNlJywgZmxpcGJvb2ssIGZiQ29udCwgJ2VuZCcpO1xyXG4gICAgICAgICAgICBhY3RpdmVDb3JuZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGxpbWl0ZXIgPSAwO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXNpemVGQihmaXJzdFdpZHRoLCBmaXJzdEhlaWdodCwgZmxpcGJvb2ssIGZiQ29udCwgem9vbWVkKTtcclxuXHJcbiAgICAgICAgZmJGaXJzdFJ1bihmbGlwYm9vaywgZmJDb250KTtcclxuICAgIH0pO1xyXG59KSgpOyJdfQ==
