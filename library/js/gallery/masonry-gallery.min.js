"use strict";!function(t){function e(e,i,a){var n,o,r,c,l=t("#gallery-container").width();return l>900?n=3:l>600?n=2:l>300&&(n=1),n>1?(o=(l-a*(n-1))/n,r=380-o,c=e-r*i):(r=380-l,1==i?c=e-r*i:2==i&&(c=l/e*e)),Math.floor(c)}function i(){var i,a,n,o=20,r=380,c=780,l=180,s=380;t("#gallery-container").find(".item").each(function(){if(t(this).attr("class"))for(var d,f,h=t(this).attr("class").split(" "),u=0,m=h.length;m>u;++u){switch(h[1]){case"item--width1":i=r,n=e(i,1,o);break;case"item--width2":i=c,n=e(i,2,o);break;default:i=r,n=e(i,1,o)}switch(h[2]){case"item--height1":a=l;break;case"item--height2":a=s;break;default:a=l}d=n/i,f=a*d,t(this).find("img").css({height:Math.floor(f),width:Math.floor(n)})}})}t(document).ready(function(){t("#gallery-filters li").on("click",function(){var e=this.className;t("#gallery-container").isotope({filter:e})})}),t(window).load(function(){t("#gallery-container .item > a").addClass("fancybox").attr("rel","gallery"),t(".fancybox").fancybox({padding:0,margin:[20,60,20,60],closeBtn:!0}),t(".fancybox").click(function(){t.fancybox.showLoading();var e=t('<div id="dummy"></div>').appendTo("body"),i=t(this).clone().appendTo(e);return i.oembed(null,{embedMethod:"replace",afterEmbed:function(i){var a=t(i.code),n="html",o="no";"photo"==i.type?(a=a.find("img:first").attr("src"),n="image"):"rich"===i.type&&(o="auto"),t.fancybox.open({href:a,type:n,scrolling:o,title:i.title||t(this).attr("title"),width:640,height:384,autoSize:!1}),e.remove()},onError:function(){t.fancybox.open(this)}}),!1});var e=t("#gallery-container").imagesLoaded(function(){e.isotope({itemSelector:".item",masonry:{gutter:20}})});t(window).resize(function(){i()}),i()})}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnJhcnkvanMvZ2FsbGVyeS9tYXNvbnJ5LWdhbGxlcnkuanMiXSwibmFtZXMiOlsiJCIsIndpZHRoQnlEZXZpY2UiLCJvcmlnV2lkdGgiLCJtdWx0aXBsaWVyIiwiZ3V0dGVyIiwiY29sdW1uTnVtIiwiY29sV2lkdGgiLCJjb2x1bW5EaWZmIiwibmV3V2lkdGgiLCJ2aWV3cG9ydCIsIndpZHRoIiwiTWF0aCIsImZsb29yIiwicmVzaXplR2FsbGVyeSIsIm9yaWdIZWlnaHQiLCJ3MSIsIncyIiwiaDEiLCJoMiIsImZpbmQiLCJlYWNoIiwidGhpcyIsImF0dHIiLCJhc3BlY3RSYXRpbyIsImhlaWdodCIsImNsYXNzZXMiLCJzcGxpdCIsImkiLCJsIiwibGVuZ3RoIiwiY3NzIiwiZG9jdW1lbnQiLCJyZWFkeSIsIm9uIiwiZmlsdGVyVmFsdWUiLCJjbGFzc05hbWUiLCJpc290b3BlIiwiZmlsdGVyIiwid2luZG93IiwibG9hZCIsImFkZENsYXNzIiwiZmFuY3lib3giLCJwYWRkaW5nIiwibWFyZ2luIiwiY2xvc2VCdG4iLCJjbGljayIsInNob3dMb2FkaW5nIiwid3JhcCIsImFwcGVuZFRvIiwiZWwiLCJjbG9uZSIsIm9lbWJlZCIsImVtYmVkTWV0aG9kIiwiYWZ0ZXJFbWJlZCIsInJleiIsIndoYXQiLCJjb2RlIiwidHlwZSIsInNjcm9sbGluZyIsIm9wZW4iLCJocmVmIiwidGl0bGUiLCJhdXRvU2l6ZSIsInJlbW92ZSIsIm9uRXJyb3IiLCIkZ3JpZCIsImltYWdlc0xvYWRlZCIsIml0ZW1TZWxlY3RvciIsIm1hc29ucnkiLCJyZXNpemUiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJBQUFBLGNBc0NBLFNBQVdBLEdBQUcsUUEySERDLEdBQWNDLEVBQVdDLEVBQVlDLEdBRzFDLEdBQUlDLEdBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQVdULEVBQUUsc0JBQXNCVSxPQVBXLE9BVTlDRCxHQUFXLElBRVhKLEVBQVksRUFFTEksRUFBVyxJQUVsQkosRUFBWSxFQUVMSSxFQUFXLE1BRWxCSixFQUFZLEdBS1pBLEVBQVksR0FFWkMsR0FBWUcsRUFBWUwsR0FBVUMsRUFBWSxJQUFPQSxFQUVyREUsRUFBYSxJQUFNRCxFQUVuQkUsRUFBV04sRUFBYUssRUFBYUosSUFJckNJLEVBQWEsSUFBTUUsRUFHRCxHQUFkTixFQUVBSyxFQUFXTixFQUFhSyxFQUFhSixFQUdoQixHQUFkQSxJQUVQSyxFQUFXQyxFQUFZUCxFQUFhQSxJQU9yQ1MsS0FBS0MsTUFBTUosR0EvS1osUUFtTERLLEtBUUwsR0FLUVgsR0FDQVksRUFDQUosRUFQSk4sRUFBUyxHQUNMVyxFQUFLLElBQ0xDLEVBQUssSUFDTEMsRUFBSyxJQUNMQyxFQUFLLEdBTWJsQixHQUFFLHNCQUFzQm1CLEtBQUssU0FBU0MsS0FBSyxXQUV2QyxHQUFLcEIsRUFBRXFCLE1BQU1DLEtBQUssU0FPZCxJQUFNLEdBSkZDLEdBQ0FDLEVBRkFDLEVBQVV6QixFQUFFcUIsTUFBTUMsS0FBSyxTQUFTSSxNQUFNLEtBS2hDQyxFQUFJLEVBQUdDLEVBQUlILEVBQVFJLE9BQVVELEVBQUZELElBQU9BLEVBQUksQ0FPNUMsT0FBUUYsRUFBUSxJQUVaLElBQUssZUFDRHZCLEVBQVlhLEVBQ1pMLEVBQVFULEVBQWNDLEVBQVcsRUFBR0UsRUFDcEMsTUFMUixLQU1TLGVBQ0RGLEVBQVljLEVBQ1pOLEVBQVFULEVBQWNDLEVBQVcsRUFBR0UsRUFDcEMsTUFUUixTQVdRRixFQUFZYSxFQUNaTCxFQUFRVCxFQUFjQyxFQUFXLEVBQUdFLEdBbkJBLE9BMEJwQ3FCLEVBQVEsSUFFWixJQUFLLGdCQUNEWCxFQUFhRyxDQUNiLE1BSlIsS0FLUyxnQkFDREgsRUFBYUksQ0FDYixNQVBSLFNBU1FKLEVBQWFHLEVBbkN1Qk0sRUF5QzlCYixFQUFRUixFQXpDc0JzQixFQTRDbkNWLEVBQWFTLEVBNUNzQnZCLEVBK0MxQ3FCLE1BQU1GLEtBQUssT0FBT1csS0FDaEJOLE9BQVNiLEtBQUtDLE1BQU1ZLEdBQ3BCZCxNQUFRQyxLQUFLQyxNQUFNRixRQTdQdkNWLEVBQUUrQixVQUFVQyxNQUFNLFdBR2RoQyxFQUFFLHVCQUF1QmlDLEdBQUcsUUFBUyxXQUVqQyxHQUFJQyxHQUFjYixLQUFLYyxTQUZzQm5DLEdBSzNDLHNCQUFzQm9DLFNBQ3BCQyxPQUFRSCxRQU1wQmxDLEVBQUVzQyxRQUFRQyxLQUFLLFdBR1h2QyxFQUFFLGdDQUNHd0MsU0FBVSxZQUNWbEIsS0FBSyxNQUFPLFdBQ2pCdEIsRUFBRSxhQUNHeUMsVUFNR0MsUUFBYyxFQUNkQyxRQUFlLEdBQUksR0FBSSxHQUFJLElBQzNCQyxVQUFZLElBZkc1QyxFQWtCckIsYUFBYTZDLE1BQU0sV0FDakI3QyxFQUFFeUMsU0FBU0ssYUFFWCxJQUFJQyxHQUFPL0MsRUFBRSwwQkFBMEJnRCxTQUFTLFFBQzVDQyxFQUFPakQsRUFBRXFCLE1BQU02QixRQUFRRixTQUFTRCxFQWlDcEMsT0EvQkFFLEdBQUdFLE9BQU8sTUFDTkMsWUFBYyxVQUNkQyxXQUFjLFNBQVNDLEdBQ25CLEdBQUlDLEdBQU92RCxFQUFFc0QsRUFBSUUsTUFDYkMsRUFBTyxPQUNQQyxFQUFZLElBRUEsVUFBWkosRUFBSUcsTUFDSkYsRUFBT0EsRUFBS3BDLEtBQUssYUFBYUcsS0FBSyxPQUNuQ21DLEVBQU8sU0FDYSxTQUFiSCxFQUFJRyxPQUNYQyxFQUFZLFFBR2hCMUQsRUFBRXlDLFNBQVNrQixNQUNQQyxLQUFZTCxFQUNaRSxLQUFZQSxFQUNaQyxVQUFZQSxFQUNaRyxNQUFZUCxFQUFJTyxPQUFTN0QsRUFBRXFCLE1BQU1DLEtBQUssU0FDdENaLE1BQVksSUFDWmMsT0FBWSxJQUNac0MsVUFBWSxJQUdoQmYsRUFBS2dCLFVBRVRDLFFBQVUsV0FDUGhFLEVBQUV5QyxTQUFTa0IsS0FBS3RDLFVBSWhCLEdBdkRZLElBa0ZuQjRDLEdBQVFqRSxFQUFFLHNCQUFzQmtFLGFBQWMsV0FFaERELEVBQU03QixTQUVKK0IsYUFBYyxRQUNkQyxTQUNFaEUsT0FBUSxPQXhGU0osR0FnR3JCc0MsUUFBUStCLE9BQU8sV0FDYnhELE1BakdtQkEsT0E0UDVCeUQiLCJmaWxlIjoibGlicmFyeS9qcy9nYWxsZXJ5L21hc29ucnktZ2FsbGVyeS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIHZhciBmYW5jeWJveE1vZHVsZSA9IChmdW5jdGlvbigkLCB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBpbmRleFZpZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmlkT3BlbmVyID0gJChcIi52aWRPcGVuZXJcIiksXG4gICAgICAgICAgICB2aWRlb1RhZyA9IHZpZE9wZW5lci5zaWJsaW5ncyhcIi52aWRlb1RhZ1wiKS5odG1sKCksXG4gICAgICAgICAgICB2aWRlbztcbiAgICAgICAgXG4gICAgICAgIGlmICh2aWRPcGVuZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB2aWRPcGVuZXIuZmFuY3lib3goe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHZpZGVvVGFnLFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6MCxcbiAgICAgICAgICAgICAgICBoZWxwZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NrZWQgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCcgOiAncmdiYSgwLCAwLCAwLCAwLjgpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBiZWZvcmVTaG93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlkZW8gPSAkKCcuZmFuY3lib3gtaW5uZXInKS5maW5kKFwidmlkZW9cIikuZ2V0KDApOyAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2aWRlby5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGluZGV4VmlkKCk7XG4gICAgICAgIH1cbiAgICB9XG59KShqUXVlcnkpIFxuXG4kKGZ1bmN0aW9uKCkge1xuICAgIGZhbmN5Ym94TW9kdWxlLmluaXQoKTtcbn0pOyAqL1xuXG4oZnVuY3Rpb24gKCQpIHtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvL2JpbmQgZmlsdGVyIG9uIHNlbGVjdCBjaGFuZ2VcbiAgICAgICAgJCgnI2dhbGxlcnktZmlsdGVycyBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGdldCBmaWx0ZXIgdmFsdWUgZnJvbSBvcHRpb24gdmFsdWVcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IHRoaXMuY2xhc3NOYW1lO1xuICAgICAgICAgICAgLy8gdXNlIGZpbHRlckZuIGlmIG1hdGNoZXMgdmFsdWVcbiAgICAgICAgICAgIC8vIGZpbHRlclZhbHVlID0gZmlsdGVyRm5zWyBmaWx0ZXJWYWx1ZSBdIHx8IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgJCgnI2dhbGxlcnktY29udGFpbmVyJykuaXNvdG9wZSh7XG4gICAgICAgICAgICAgICAgZmlsdGVyOiBmaWx0ZXJWYWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICAkKHdpbmRvdykubG9hZChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gaW5pdGlhbGl6aW5nIGZhbmN5Ym94XG4gICAgICAgICQoJyNnYWxsZXJ5LWNvbnRhaW5lciAuaXRlbSA+IGEnKVxuICAgICAgICAgICAgLmFkZENsYXNzKCBcImZhbmN5Ym94XCIgKVxuICAgICAgICAgICAgLmF0dHIoJ3JlbCcsICdnYWxsZXJ5Jyk7XG4gICAgICAgICQoJy5mYW5jeWJveCcpXG4gICAgICAgICAgICAuZmFuY3lib3goe1xuICAgICAgICAgICAgICAgIC8qdHlwZSAgICAgICAgOiAnaW1hZ2UnLFxuICAgICAgICAgICAgICAgIG9wZW5FZmZlY3QgIDogJ25vbmUnLFxuICAgICAgICAgICAgICAgIGNsb3NlRWZmZWN0IDogJ25vbmUnLFxuICAgICAgICAgICAgICAgIG5leHRFZmZlY3QgIDogJ25vbmUnLFxuICAgICAgICAgICAgICAgIHByZXZFZmZlY3QgIDogJ25vbmUnLCAgICovICAgICAgICAgXG4gICAgICAgICAgICAgICAgcGFkZGluZyAgICAgOiAwLFxuICAgICAgICAgICAgICAgIG1hcmdpbiAgICAgIDogWzIwLCA2MCwgMjAsIDYwXSwgLy8gSW5jcmVhc2UgbGVmdC9yaWdodCBtYXJnaW5cbiAgICAgICAgICAgICAgICBjbG9zZUJ0biAgOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBhZGRpbmcgdGhlIGZvbGxvd2luZyBmcm9tIGh0dHA6Ly9qc2ZpZGRsZS5uZXQvUHVkTHEvIHRvIHN1cHBvcnQgZXh0ZXJuYWxseSBsaW5rZWQgeW91dHViZSB2aWRzIC0gTEsgMTcwMjE3XG4gICAgICAgICQoXCIuZmFuY3lib3hcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLmZhbmN5Ym94LnNob3dMb2FkaW5nKCk7ICBcblxuICAgICAgICAgICAgdmFyIHdyYXAgPSAkKCc8ZGl2IGlkPVwiZHVtbXlcIj48L2Rpdj4nKS5hcHBlbmRUbygnYm9keScpO1xuICAgICAgICAgICAgdmFyIGVsICAgPSAkKHRoaXMpLmNsb25lKCkuYXBwZW5kVG8od3JhcCk7XG5cbiAgICAgICAgICAgIGVsLm9lbWJlZChudWxsLCB7XG4gICAgICAgICAgICAgICAgZW1iZWRNZXRob2QgOiAncmVwbGFjZScsXG4gICAgICAgICAgICAgICAgYWZ0ZXJFbWJlZCAgOiBmdW5jdGlvbihyZXopIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdoYXQgPSAkKHJlei5jb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAnaHRtbCc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxpbmcgPSAnbm8nO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXoudHlwZSA9PSAncGhvdG8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGF0ID0gd2hhdC5maW5kKCdpbWc6Zmlyc3QnKS5hdHRyKCdzcmMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnaW1hZ2UnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlei50eXBlID09PSAncmljaCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGluZyA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQuZmFuY3lib3gub3Blbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmICAgICAgOiB3aGF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICAgIDogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGluZyA6IHNjcm9sbGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlICAgICA6IHJlei50aXRsZSB8fCAkKHRoaXMpLmF0dHIoJ3RpdGxlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAgICAgOiA2NDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgICAgOiAzODQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvU2l6ZSAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB3cmFwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25FcnJvciA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICQuZmFuY3lib3gub3Blbih0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTsgICAgICAgIFxuXG4gICAgICAgIC8vIGlzb3RvcGVcbiAgICAgICAgLy8gJCgnI2dhbGxlcnktY29udGFpbmVyJykuaXNvdG9wZSh7XG4gICAgICAgIC8vICAgICBpdGVtU2VsZWN0b3I6ICcuaXRlbScsXG4gICAgICAgIC8vICAgICBtYXNvbnJ5OiB7XG4gICAgICAgIC8vICAgICAgIGd1dHRlcjogMjBcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgLy8gLy8gaW5pdCBJc290b3BlXG4gICAgICAgIC8vIHZhciAkZ3JpZCA9ICQoJyNnYWxsZXJ5LWNvbnRhaW5lcicpLmlzb3RvcGUoe1xuICAgICAgICAvLyAgICAgLy8gb3B0aW9ucy4uLlxuICAgICAgICAvLyAgICAgaXRlbVNlbGVjdG9yOiAnLml0ZW0nLFxuICAgICAgICAvLyAgICAgbWFzb25yeToge1xuICAgICAgICAvLyAgICAgICBndXR0ZXI6IDIwXG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vIC8vIGxheW91dCBJc290b3BlIGFmdGVyIGVhY2ggaW1hZ2UgbG9hZHNcbiAgICAgICAgLy8gJGdyaWQuaW1hZ2VzTG9hZGVkKCkucHJvZ3Jlc3MoIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICRncmlkLmlzb3RvcGUoJ2xheW91dCcpO1xuICAgICAgICAvLyB9KTtcblxuXG5cbiAgICAgICAgdmFyICRncmlkID0gJCgnI2dhbGxlcnktY29udGFpbmVyJykuaW1hZ2VzTG9hZGVkKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyBpbml0IElzb3RvcGUgYWZ0ZXIgYWxsIGltYWdlcyBoYXZlIGxvYWRlZFxuICAgICAgICAgICRncmlkLmlzb3RvcGUoe1xuICAgICAgICAgICAgLy8gb3B0aW9ucy4uLlxuICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiAnLml0ZW0nLFxuICAgICAgICAgICAgbWFzb25yeToge1xuICAgICAgICAgICAgICBndXR0ZXI6IDIwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFxuXG4gICAgICAgIC8vcmVzaXplIGdhbGxlcnkgb24gd2luZG93IGNoYW5nZVxuICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc2l6ZUdhbGxlcnkoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9yZXNpemUgZ2FsbGVyeSBpbml0aWFsIGNhbGxcbiAgICAgICAgcmVzaXplR2FsbGVyeSgpO1xuXG4gICAgfSk7XG5cbiAgICAvLyBzZXQgd2lkdGggYnkgZGV2aWNlIGZ1bmN0aW9uXG4gICAgZnVuY3Rpb24gd2lkdGhCeURldmljZShvcmlnV2lkdGgsIG11bHRpcGxpZXIsIGd1dHRlcikge1xuXG4gICAgICAgIC8vIGNyZWF0ZSB2YXJpYWJsZXNcbiAgICAgICAgdmFyIGNvbHVtbk51bSxcbiAgICAgICAgICAgIGNvbFdpZHRoLFxuICAgICAgICAgICAgY29sdW1uRGlmZixcbiAgICAgICAgICAgIG5ld1dpZHRoLFxuICAgICAgICAgICAgdmlld3BvcnQgPSAkKCcjZ2FsbGVyeS1jb250YWluZXInKS53aWR0aCgpO1xuXG4gICAgICAgIC8vIGRldGVybWluZSBjb2x1bW4gY291bnRcbiAgICAgICAgaWYgKHZpZXdwb3J0ID4gOTAwKSB7XG5cbiAgICAgICAgICAgIGNvbHVtbk51bSA9IDM7XG5cbiAgICAgICAgfSBlbHNlIGlmICh2aWV3cG9ydCA+IDYwMCkge1xuXG4gICAgICAgICAgICBjb2x1bW5OdW0gPSAyO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodmlld3BvcnQgPiAzMDApIHtcblxuICAgICAgICAgICAgY29sdW1uTnVtID0gMTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZHRlcm1pbmUgY29sdW1uIHNwYWNpbmdcbiAgICAgICAgaWYgKGNvbHVtbk51bSA+IDEpIHtcblxuICAgICAgICAgICAgY29sV2lkdGggPSAodmlld3BvcnQgLSAoZ3V0dGVyICogKGNvbHVtbk51bSAtIDEpKSkgLyBjb2x1bW5OdW07XG5cbiAgICAgICAgICAgIGNvbHVtbkRpZmYgPSAzODAgLSBjb2xXaWR0aDtcblxuICAgICAgICAgICAgbmV3V2lkdGggPSBvcmlnV2lkdGggLSAoY29sdW1uRGlmZiAqIG11bHRpcGxpZXIpO1xuICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgY29sdW1uRGlmZiA9IDM4MCAtIHZpZXdwb3J0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBzY2VuYXJpbyBmb3IgaXRlbS0td2lkdGgxO1xuICAgICAgICAgICAgaWYgKG11bHRpcGxpZXIgPT0gMSkge1xuXG4gICAgICAgICAgICAgICAgbmV3V2lkdGggPSBvcmlnV2lkdGggLSAoY29sdW1uRGlmZiAqIG11bHRpcGxpZXIpO1xuXG4gICAgICAgICAgICAvLyBzY2VuYXJpbyBmb3IgaXRlbS0td2lkdGgyO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtdWx0aXBsaWVyID09IDIpIHtcblxuICAgICAgICAgICAgICAgIG5ld1dpZHRoID0gKHZpZXdwb3J0IC8gb3JpZ1dpZHRoKSAqIG9yaWdXaWR0aDtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXR1cm4gd2lkdGhcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IobmV3V2lkdGgpO1xuICAgIH1cblxuICAgIC8vIHNldCByZXNpemUgZ2FsbGVyeSBmdW5jdGlvblxuICAgIGZ1bmN0aW9uIHJlc2l6ZUdhbGxlcnkoKSB7XG5cbiAgICAgICAgLy9uZXcgY2xhc3Nlcy4uLlxuICAgICAgICAvL2dhbGxlcnlIZWlnaHQwMSA9IGgxXG4gICAgICAgIC8vZ2FsbGVyeUhlaWdodDAyID0gaDJcbiAgICAgICAgLy9nYWxsZXJ5V2lkdGgwMSA9IHcxXG4gICAgICAgIC8vZ2FsbGVyeVdpZHRoMDIgPSB3MlxuXG4gICAgICAgIHZhciBndXR0ZXIgPSAyMCxcbiAgICAgICAgICAgICAgICB3MSA9IDM4MCxcbiAgICAgICAgICAgICAgICB3MiA9IDc4MCxcbiAgICAgICAgICAgICAgICBoMSA9IDE4MCxcbiAgICAgICAgICAgICAgICBoMiA9IDM4MCxcbiAgICAgICAgICAgICAgICBvcmlnV2lkdGgsIFxuICAgICAgICAgICAgICAgIG9yaWdIZWlnaHQsXG4gICAgICAgICAgICAgICAgd2lkdGg7XG5cblxuICAgICAgICAkKCcjZ2FsbGVyeS1jb250YWluZXInKS5maW5kKCcuaXRlbScpLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIGlmICggJCh0aGlzKS5hdHRyKCdjbGFzcycpICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICBhc3BlY3RSYXRpbyxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0O1xuXG5cbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBjbGFzc2VzLmxlbmd0aDsgaTxsOyArK2kgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbG9vayBhdCB0aGUgY2xhc3NlcyBhc3NpZ25lZCB0byB0aGUgaXRlbVxuICAgICAgICAgICAgICAgICAgICAvLyBzaG91bGQgbG9vayBzb21ldGhpbmcgbGlrZSAnY2xhc3M9XCJpdGVtIGl0ZW0tLXdpZHRoMSBpdGVtLS1oZWlnaHQxIGRpbmluZ1wiJ1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgd2lkdGggYnkgbG9va2luZyBhdCB0aGUgc2Vjb25kIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciAnaXRlbS0td2lkdGgxJyBvciAnaXRlbS0td2lkdGgyJ1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNsYXNzZXNbMV0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIml0ZW0tLXdpZHRoMVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdXaWR0aCA9IHcxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gd2lkdGhCeURldmljZShvcmlnV2lkdGgsIDEsIGd1dHRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaXRlbS0td2lkdGgyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ1dpZHRoID0gdzI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSB3aWR0aEJ5RGV2aWNlKG9yaWdXaWR0aCwgMiwgZ3V0dGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ1dpZHRoID0gdzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSB3aWR0aEJ5RGV2aWNlKG9yaWdXaWR0aCwgMSwgZ3V0dGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBoZWlnaHQgYnkgbG9va2luZyBhdCB0aGUgdGhpcmQgcG9zaXRpb24gXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciAnaXRlbS0taGVpZ2h0MScgb3IgJ2l0ZW0tLWhlaWdodDInXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY2xhc3Nlc1syXSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaXRlbS0taGVpZ2h0MVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdIZWlnaHQgPSBoMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpdGVtLS1oZWlnaHQyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ0hlaWdodCA9IGgyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnSGVpZ2h0ID0gaDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGFuIGFzcGVjZHQgcmF0aW9cbiAgICAgICAgICAgICAgICAgICAgYXNwZWN0UmF0aW8gPSB3aWR0aCAvIG9yaWdXaWR0aDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIG5ldyBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gb3JpZ0hlaWdodCAqIGFzcGVjdFJhdGlvO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbmV3IGltYWdlIHNpemVzXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIE1hdGguZmxvb3IoaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAgTWF0aC5mbG9vcih3aWR0aClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdmFyICRpdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgIC8vICAgICBzaXplcyA9ICRpdGVtLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsgLy8gc2l6ZXNbMF0gPT4gaW1hZ2Ugd2lkdGgsIHNpemVzWzFdID0+IGltYWdlIGhlaWdodFxuXG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuXG59KShqUXVlcnkpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
